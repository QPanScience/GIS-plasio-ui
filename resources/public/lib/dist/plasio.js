!function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return t[r].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n(2),n(327)},function(t,e,n){(function(t){"use strict";function e(t,e,n){t[e]||Object[r](t,e,{writable:!0,configurable:!0,value:n})}if(n(3),n(323),n(324),t._babelPolyfill)throw new Error("only one instance of babel-polyfill is allowed");t._babelPolyfill=!0;var r="defineProperty";e(String.prototype,"padLeft","".padStart),e(String.prototype,"padRight","".padEnd),"pop,reverse,shift,keys,values,entries,indexOf,every,some,forEach,map,filter,find,findIndex,includes,join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill".split(",").forEach(function(t){[][t]&&e(Array,t,Function.call.bind([][t]))})}).call(e,function(){return this}())},function(t,e,n){n(4),n(52),n(53),n(54),n(55),n(57),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(70),n(72),n(74),n(76),n(79),n(80),n(81),n(85),n(87),n(89),n(92),n(93),n(94),n(95),n(97),n(98),n(99),n(100),n(101),n(102),n(103),n(105),n(106),n(107),n(109),n(110),n(111),n(113),n(115),n(116),n(117),n(118),n(119),n(120),n(121),n(122),n(123),n(124),n(125),n(126),n(127),n(132),n(133),n(137),n(138),n(139),n(140),n(142),n(143),n(144),n(145),n(146),n(147),n(148),n(149),n(150),n(151),n(152),n(153),n(154),n(155),n(156),n(158),n(159),n(161),n(162),n(168),n(169),n(171),n(172),n(173),n(177),n(178),n(179),n(180),n(181),n(183),n(184),n(185),n(186),n(189),n(191),n(192),n(193),n(195),n(197),n(199),n(200),n(201),n(203),n(204),n(205),n(206),n(216),n(220),n(221),n(223),n(224),n(228),n(229),n(231),n(232),n(233),n(234),n(235),n(236),n(237),n(238),n(239),n(240),n(241),n(242),n(243),n(244),n(245),n(246),n(247),n(248),n(249),n(251),n(252),n(253),n(254),n(255),n(257),n(258),n(259),n(261),n(262),n(263),n(264),n(265),n(266),n(267),n(268),n(270),n(271),n(273),n(274),n(275),n(276),n(279),n(280),n(282),n(283),n(284),n(285),n(287),n(288),n(289),n(290),n(291),n(292),n(293),n(294),n(295),n(296),n(298),n(299),n(300),n(301),n(302),n(303),n(304),n(305),n(306),n(307),n(308),n(310),n(311),n(312),n(313),n(314),n(315),n(316),n(317),n(318),n(319),n(320),n(321),n(322),t.exports=n(10)},function(t,e,n){"use strict";var r=n(5),i=n(6),o=n(7),a=n(9),u=n(19),s=n(23).KEY,c=n(8),f=n(24),l=n(25),h=n(20),p=n(26),d=n(27),v=n(28),y=n(30),g=n(45),m=n(13),_=n(33),b=n(17),w=n(18),x=n(46),E=n(49),k=n(51),P=n(12),S=n(31),M=k.f,O=P.f,A=E.f,C=r.Symbol,T=r.JSON,R=T&&T.stringify,j="prototype",I=p("_hidden"),F=p("toPrimitive"),L={}.propertyIsEnumerable,N=f("symbol-registry"),B=f("symbols"),D=f("op-symbols"),U=Object[j],z="function"==typeof C,q=r.QObject,Y=!q||!q[j]||!q[j].findChild,H=o&&c(function(){return 7!=x(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=M(U,e);r&&delete U[e],O(t,e,n),r&&t!==U&&O(U,e,r)}:O,V=function(t){var e=B[t]=x(C[j]);return e._k=t,e},G=z&&"symbol"==typeof C.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof C},W=function(t,e,n){return t===U&&W(D,e,n),m(t),e=b(e,!0),m(n),i(B,e)?(n.enumerable?(i(t,I)&&t[I][e]&&(t[I][e]=!1),n=x(n,{enumerable:w(0,!1)})):(i(t,I)||O(t,I,w(1,{})),t[I][e]=!0),H(t,e,n)):O(t,e,n)},X=function(t,e){m(t);for(var n,r=y(e=_(e)),i=0,o=r.length;o>i;)W(t,n=r[i++],e[n]);return t},$=function(t,e){return void 0===e?x(t):X(x(t),e)},Q=function(t){var e=L.call(this,t=b(t,!0));return!(this===U&&i(B,t)&&!i(D,t))&&(!(e||!i(this,t)||!i(B,t)||i(this,I)&&this[I][t])||e)},J=function(t,e){if(t=_(t),e=b(e,!0),t!==U||!i(B,e)||i(D,e)){var n=M(t,e);return!n||!i(B,e)||i(t,I)&&t[I][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=A(_(t)),r=[],o=0;n.length>o;)i(B,e=n[o++])||e==I||e==s||r.push(e);return r},Z=function(t){for(var e,n=t===U,r=A(n?D:_(t)),o=[],a=0;r.length>a;)!i(B,e=r[a++])||n&&!i(U,e)||o.push(B[e]);return o};z||(C=function(){if(this instanceof C)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(n){this===U&&e.call(D,n),i(this,I)&&i(this[I],t)&&(this[I][t]=!1),H(this,t,w(1,n))};return o&&Y&&H(U,t,{configurable:!0,set:e}),V(t)},u(C[j],"toString",function(){return this._k}),k.f=J,P.f=W,n(50).f=E.f=K,n(44).f=Q,n(43).f=Z,o&&!n(29)&&u(U,"propertyIsEnumerable",Q,!0),d.f=function(t){return V(p(t))}),a(a.G+a.W+a.F*!z,{Symbol:C});for(var tt="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),et=0;tt.length>et;)p(tt[et++]);for(var nt=S(p.store),rt=0;nt.length>rt;)v(nt[rt++]);a(a.S+a.F*!z,"Symbol",{for:function(t){return i(N,t+="")?N[t]:N[t]=C(t)},keyFor:function(t){if(!G(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){Y=!0},useSimple:function(){Y=!1}}),a(a.S+a.F*!z,"Object",{create:$,defineProperty:W,defineProperties:X,getOwnPropertyDescriptor:J,getOwnPropertyNames:K,getOwnPropertySymbols:Z}),T&&a(a.S+a.F*(!z||c(function(){var t=C();return"[null]"!=R([t])||"{}"!=R({a:t})||"{}"!=R(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!G(t)){for(var e,n,r=[t],i=1;arguments.length>i;)r.push(arguments[i++]);return e=r[1],"function"==typeof e&&(n=e),!n&&g(e)||(e=function(t,e){if(n&&(e=n.call(this,t,e)),!G(e))return e}),r[1]=e,R.apply(T,r)}}}),C[j][F]||n(11)(C[j],F,C[j].valueOf),l(C,"Symbol"),l(Math,"Math",!0),l(r.JSON,"JSON",!0)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){t.exports=!n(8)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e,n){var r=n(5),i=n(10),o=n(11),a=n(19),u=n(21),s="prototype",c=function(t,e,n){var f,l,h,p,d=t&c.F,v=t&c.G,y=t&c.S,g=t&c.P,m=t&c.B,_=v?r:y?r[e]||(r[e]={}):(r[e]||{})[s],b=v?i:i[e]||(i[e]={}),w=b[s]||(b[s]={});v&&(n=e);for(f in n)l=!d&&_&&void 0!==_[f],h=(l?_:n)[f],p=m&&l?u(h,r):g&&"function"==typeof h?u(Function.call,h):h,_&&a(_,f,h,t&c.U),b[f]!=h&&o(b,f,p),g&&w[f]!=h&&(w[f]=h)};r.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},function(t,e){var n=t.exports={version:"2.5.1"};"number"==typeof __e&&(__e=n)},function(t,e,n){var r=n(12),i=n(18);t.exports=n(7)?function(t,e,n){return r.f(t,e,i(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){var r=n(13),i=n(15),o=n(17),a=Object.defineProperty;e.f=n(7)?Object.defineProperty:function(t,e,n){if(r(t),e=o(e,!0),r(n),i)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){var r=n(14);t.exports=function(t){if(!r(t))throw TypeError(t+" is not an object!");return t}},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e,n){t.exports=!n(7)&&!n(8)(function(){return 7!=Object.defineProperty(n(16)("div"),"a",{get:function(){return 7}}).a})},function(t,e,n){var r=n(14),i=n(5).document,o=r(i)&&r(i.createElement);t.exports=function(t){return o?i.createElement(t):{}}},function(t,e,n){var r=n(14);t.exports=function(t,e){if(!r(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!r(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!r(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var r=n(5),i=n(11),o=n(6),a=n(20)("src"),u="toString",s=Function[u],c=(""+s).split(u);n(10).inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,u){var s="function"==typeof n;s&&(o(n,"name")||i(n,"name",e)),t[e]!==n&&(s&&(o(n,a)||i(n,a,t[e]?""+t[e]:c.join(String(e)))),t===r?t[e]=n:u?t[e]?t[e]=n:i(t,e,n):(delete t[e],i(t,e,n)))})(Function.prototype,u,function(){return"function"==typeof this&&this[a]||s.call(this)})},function(t,e){var n=0,r=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+r).toString(36))}},function(t,e,n){var r=n(22);t.exports=function(t,e,n){if(r(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e,n){var r=n(20)("meta"),i=n(14),o=n(6),a=n(12).f,u=0,s=Object.isExtensible||function(){return!0},c=!n(8)(function(){return s(Object.preventExtensions({}))}),f=function(t){a(t,r,{value:{i:"O"+ ++u,w:{}}})},l=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,r)){if(!s(t))return"F";if(!e)return"E";f(t)}return t[r].i},h=function(t,e){if(!o(t,r)){if(!s(t))return!0;if(!e)return!1;f(t)}return t[r].w},p=function(t){return c&&d.NEED&&s(t)&&!o(t,r)&&f(t),t},d=t.exports={KEY:r,NEED:!1,fastKey:l,getWeak:h,onFreeze:p}},function(t,e,n){var r=n(5),i="__core-js_shared__",o=r[i]||(r[i]={});t.exports=function(t){return o[t]||(o[t]={})}},function(t,e,n){var r=n(12).f,i=n(6),o=n(26)("toStringTag");t.exports=function(t,e,n){t&&!i(t=n?t:t.prototype,o)&&r(t,o,{configurable:!0,value:e})}},function(t,e,n){var r=n(24)("wks"),i=n(20),o=n(5).Symbol,a="function"==typeof o,u=t.exports=function(t){return r[t]||(r[t]=a&&o[t]||(a?o:i)("Symbol."+t))};u.store=r},function(t,e,n){e.f=n(26)},function(t,e,n){var r=n(5),i=n(10),o=n(29),a=n(27),u=n(12).f;t.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:r.Symbol||{});"_"==t.charAt(0)||t in e||u(e,t,{value:a.f(t)})}},function(t,e){t.exports=!1},function(t,e,n){var r=n(31),i=n(43),o=n(44);t.exports=function(t){var e=r(t),n=i.f;if(n)for(var a,u=n(t),s=o.f,c=0;u.length>c;)s.call(t,a=u[c++])&&e.push(a);return e}},function(t,e,n){var r=n(32),i=n(42);t.exports=Object.keys||function(t){return r(t,i)}},function(t,e,n){var r=n(6),i=n(33),o=n(37)(!1),a=n(41)("IE_PROTO");t.exports=function(t,e){var n,u=i(t),s=0,c=[];for(n in u)n!=a&&r(u,n)&&c.push(n);for(;e.length>s;)r(u,n=e[s++])&&(~o(c,n)||c.push(n));return c}},function(t,e,n){var r=n(34),i=n(36);t.exports=function(t){return r(i(t))}},function(t,e,n){var r=n(35);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==r(t)?t.split(""):Object(t)}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var r=n(33),i=n(38),o=n(40);t.exports=function(t){return function(e,n,a){var u,s=r(e),c=i(s.length),f=o(a,c);if(t&&n!=n){for(;c>f;)if(u=s[f++],u!=u)return!0}else for(;c>f;f++)if((t||f in s)&&s[f]===n)return t||f||0;return!t&&-1}}},function(t,e,n){var r=n(39),i=Math.min;t.exports=function(t){return t>0?i(r(t),9007199254740991):0}},function(t,e){var n=Math.ceil,r=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?r:n)(t)}},function(t,e,n){var r=n(39),i=Math.max,o=Math.min;t.exports=function(t,e){return t=r(t),t<0?i(t+e,0):o(t,e)}},function(t,e,n){var r=n(24)("keys"),i=n(20);t.exports=function(t){return r[t]||(r[t]=i(t))}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var r=n(35);t.exports=Array.isArray||function(t){return"Array"==r(t)}},function(t,e,n){var r=n(13),i=n(47),o=n(42),a=n(41)("IE_PROTO"),u=function(){},s="prototype",c=function(){var t,e=n(16)("iframe"),r=o.length,i="<",a=">";for(e.style.display="none",n(48).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(i+"script"+a+"document.F=Object"+i+"/script"+a),t.close(),c=t.F;r--;)delete c[s][o[r]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(u[s]=r(t),n=new u,u[s]=null,n[a]=t):n=c(),void 0===e?n:i(n,e)}},function(t,e,n){var r=n(12),i=n(13),o=n(31);t.exports=n(7)?Object.defineProperties:function(t,e){i(t);for(var n,a=o(e),u=a.length,s=0;u>s;)r.f(t,n=a[s++],e[n]);return t}},function(t,e,n){var r=n(5).document;t.exports=r&&r.documentElement},function(t,e,n){var r=n(33),i=n(50).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],u=function(t){try{return i(t)}catch(t){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?u(t):i(r(t))}},function(t,e,n){var r=n(32),i=n(42).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},function(t,e,n){var r=n(44),i=n(18),o=n(33),a=n(17),u=n(6),s=n(15),c=Object.getOwnPropertyDescriptor;e.f=n(7)?c:function(t,e){if(t=o(t),e=a(e,!0),s)try{return c(t,e)}catch(t){}if(u(t,e))return i(!r.f.call(t,e),t[e])}},function(t,e,n){var r=n(9);r(r.S,"Object",{create:n(46)})},function(t,e,n){var r=n(9);r(r.S+r.F*!n(7),"Object",{defineProperty:n(12).f})},function(t,e,n){var r=n(9);r(r.S+r.F*!n(7),"Object",{defineProperties:n(47)})},function(t,e,n){var r=n(33),i=n(51).f;n(56)("getOwnPropertyDescriptor",function(){return function(t,e){return i(r(t),e)}})},function(t,e,n){var r=n(9),i=n(10),o=n(8);t.exports=function(t,e){var n=(i.Object||{})[t]||Object[t],a={};a[t]=e(n),r(r.S+r.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var r=n(58),i=n(59);n(56)("getPrototypeOf",function(){return function(t){return i(r(t))}})},function(t,e,n){var r=n(36);t.exports=function(t){return Object(r(t))}},function(t,e,n){var r=n(6),i=n(58),o=n(41)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=i(t),r(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var r=n(58),i=n(31);n(56)("keys",function(){return function(t){return i(r(t))}})},function(t,e,n){n(56)("getOwnPropertyNames",function(){return n(49).f})},function(t,e,n){var r=n(14),i=n(23).onFreeze;n(56)("freeze",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(14),i=n(23).onFreeze;n(56)("seal",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(14),i=n(23).onFreeze;n(56)("preventExtensions",function(t){return function(e){return t&&r(e)?t(i(e)):e}})},function(t,e,n){var r=n(14);n(56)("isFrozen",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(14);n(56)("isSealed",function(t){return function(e){return!r(e)||!!t&&t(e)}})},function(t,e,n){var r=n(14);n(56)("isExtensible",function(t){return function(e){return!!r(e)&&(!t||t(e))}})},function(t,e,n){var r=n(9);r(r.S+r.F,"Object",{assign:n(69)})},function(t,e,n){"use strict";var r=n(31),i=n(43),o=n(44),a=n(58),u=n(34),s=Object.assign;t.exports=!s||n(8)(function(){var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=s({},t)[n]||Object.keys(s({},e)).join("")!=r})?function(t,e){for(var n=a(t),s=arguments.length,c=1,f=i.f,l=o.f;s>c;)for(var h,p=u(arguments[c++]),d=f?r(p).concat(f(p)):r(p),v=d.length,y=0;v>y;)l.call(p,h=d[y++])&&(n[h]=p[h]);return n}:s},function(t,e,n){var r=n(9);r(r.S,"Object",{is:n(71)})},function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},function(t,e,n){var r=n(9);r(r.S,"Object",{setPrototypeOf:n(73).set})},function(t,e,n){var r=n(14),i=n(13),o=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n(21)(Function.call,n(51).f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(t){e=!0}return function(t,n){return o(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:o}},function(t,e,n){"use strict";var r=n(75),i={};i[n(26)("toStringTag")]="z",i+""!="[object z]"&&n(19)(Object.prototype,"toString",function(){return"[object "+r(this)+"]"},!0)},function(t,e,n){var r=n(35),i=n(26)("toStringTag"),o="Arguments"==r(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,u;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),i))?n:o?r(e):"Object"==(u=r(e))&&"function"==typeof e.callee?"Arguments":u}},function(t,e,n){var r=n(9);r(r.P,"Function",{bind:n(77)})},function(t,e,n){"use strict";var r=n(22),i=n(14),o=n(78),a=[].slice,u={},s=function(t,e,n){if(!(e in u)){for(var r=[],i=0;i<e;i++)r[i]="a["+i+"]";u[e]=Function("F,a","return new F("+r.join(",")+")")}return u[e](t,n)};t.exports=Function.bind||function(t){var e=r(this),n=a.call(arguments,1),u=function(){var r=n.concat(a.call(arguments));return this instanceof u?s(e,r.length,r):o(e,r,t)};return i(e.prototype)&&(u.prototype=e.prototype),u}},function(t,e){t.exports=function(t,e,n){var r=void 0===n;switch(e.length){case 0:return r?t():t.call(n);case 1:return r?t(e[0]):t.call(n,e[0]);case 2:return r?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return r?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return r?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var r=n(12).f,i=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in i||n(7)&&r(i,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},function(t,e,n){"use strict";var r=n(14),i=n(59),o=n(26)("hasInstance"),a=Function.prototype;o in a||n(12).f(a,o,{value:function(t){if("function"!=typeof this||!r(t))return!1;if(!r(this.prototype))return t instanceof this;for(;t=i(t);)if(this.prototype===t)return!0;return!1}})},function(t,e,n){var r=n(9),i=n(82);r(r.G+r.F*(parseInt!=i),{parseInt:i})},function(t,e,n){var r=n(5).parseInt,i=n(83).trim,o=n(84),a=/^[-+]?0[xX]/;t.exports=8!==r(o+"08")||22!==r(o+"0x16")?function(t,e){var n=i(String(t),3);return r(n,e>>>0||(a.test(n)?16:10))}:r},function(t,e,n){var r=n(9),i=n(36),o=n(8),a=n(84),u="["+a+"]",s="​",c=RegExp("^"+u+u+"*"),f=RegExp(u+u+"*$"),l=function(t,e,n){var i={},u=o(function(){return!!a[t]()||s[t]()!=s}),c=i[t]=u?e(h):a[t];n&&(i[n]=c),r(r.P+r.F*u,"String",i)},h=l.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(c,"")),2&e&&(t=t.replace(f,"")),t};t.exports=l},function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},function(t,e,n){var r=n(9),i=n(86);r(r.G+r.F*(parseFloat!=i),{parseFloat:i})},function(t,e,n){var r=n(5).parseFloat,i=n(83).trim;t.exports=1/r(n(84)+"-0")!==-(1/0)?function(t){var e=i(String(t),3),n=r(e);return 0===n&&"-"==e.charAt(0)?-0:n}:r},function(t,e,n){"use strict";var r=n(5),i=n(6),o=n(35),a=n(88),u=n(17),s=n(8),c=n(50).f,f=n(51).f,l=n(12).f,h=n(83).trim,p="Number",d=r[p],v=d,y=d.prototype,g=o(n(46)(y))==p,m="trim"in String.prototype,_=function(t){var e=u(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():h(e,3);var n,r,i,o=e.charCodeAt(0);if(43===o||45===o){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===o){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),c=0,f=s.length;c<f;c++)if(a=s.charCodeAt(c),a<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!d(" 0o1")||!d("0b1")||d("+0x1")){d=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof d&&(g?s(function(){y.valueOf.call(n)}):o(n)!=p)?a(new v(_(e)),n,d):_(e)};for(var b,w=n(7)?c(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),x=0;w.length>x;x++)i(v,b=w[x])&&!i(d,b)&&l(d,b,f(v,b));d.prototype=y,y.constructor=d,n(19)(r,p,d)}},function(t,e,n){var r=n(14),i=n(73).set;t.exports=function(t,e,n){var o,a=e.constructor;return a!==n&&"function"==typeof a&&(o=a.prototype)!==n.prototype&&r(o)&&i&&i(t,o),t}},function(t,e,n){"use strict";var r=n(9),i=n(39),o=n(90),a=n(91),u=1..toFixed,s=Math.floor,c=[0,0,0,0,0,0],f="Number.toFixed: incorrect invocation!",l="0",h=function(t,e){for(var n=-1,r=e;++n<6;)r+=t*c[n],c[n]=r%1e7,r=s(r/1e7)},p=function(t){for(var e=6,n=0;--e>=0;)n+=c[e],c[e]=s(n/t),n=n%t*1e7},d=function(){for(var t=6,e="";--t>=0;)if(""!==e||0===t||0!==c[t]){var n=String(c[t]);e=""===e?n:e+a.call(l,7-n.length)+n}return e},v=function(t,e,n){return 0===e?n:e%2===1?v(t,e-1,n*t):v(t*t,e/2,n)},y=function(t){for(var e=0,n=t;n>=4096;)e+=12,n/=4096;for(;n>=2;)e+=1,n/=2;return e};r(r.P+r.F*(!!u&&("0.000"!==8e-5.toFixed(3)||"1"!==.9.toFixed(0)||"1.25"!==1.255.toFixed(2)||"1000000000000000128"!==(0xde0b6b3a7640080).toFixed(0))||!n(8)(function(){u.call({})})),"Number",{toFixed:function(t){var e,n,r,u,s=o(this,f),c=i(t),g="",m=l;if(c<0||c>20)throw RangeError(f);if(s!=s)return"NaN";if(s<=-1e21||s>=1e21)return String(s);if(s<0&&(g="-",s=-s),s>1e-21)if(e=y(s*v(2,69,1))-69,n=e<0?s*v(2,-e,1):s/v(2,e,1),n*=4503599627370496,e=52-e,e>0){for(h(0,n),r=c;r>=7;)h(1e7,0),r-=7;for(h(v(10,r,1),0),r=e-1;r>=23;)p(1<<23),r-=23;p(1<<r),h(1,1),p(2),m=d()}else h(0,n),h(1<<-e,0),m=d()+a.call(l,c);return c>0?(u=m.length,m=g+(u<=c?"0."+a.call(l,c-u)+m:m.slice(0,u-c)+"."+m.slice(u-c))):m=g+m,m}})},function(t,e,n){var r=n(35);t.exports=function(t,e){if("number"!=typeof t&&"Number"!=r(t))throw TypeError(e);return+t}},function(t,e,n){"use strict";var r=n(39),i=n(36);t.exports=function(t){var e=String(i(this)),n="",o=r(t);if(o<0||o==1/0)throw RangeError("Count can't be negative");for(;o>0;(o>>>=1)&&(e+=e))1&o&&(n+=e);return n}},function(t,e,n){"use strict";var r=n(9),i=n(8),o=n(90),a=1..toPrecision;r(r.P+r.F*(i(function(){return"1"!==a.call(1,void 0)})||!i(function(){a.call({})})),"Number",{toPrecision:function(t){var e=o(this,"Number#toPrecision: incorrect invocation!");return void 0===t?a.call(e):a.call(e,t)}})},function(t,e,n){var r=n(9);r(r.S,"Number",{EPSILON:Math.pow(2,-52)})},function(t,e,n){var r=n(9),i=n(5).isFinite;r(r.S,"Number",{isFinite:function(t){return"number"==typeof t&&i(t)}})},function(t,e,n){var r=n(9);r(r.S,"Number",{isInteger:n(96)})},function(t,e,n){var r=n(14),i=Math.floor;t.exports=function(t){return!r(t)&&isFinite(t)&&i(t)===t}},function(t,e,n){var r=n(9);r(r.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var r=n(9),i=n(96),o=Math.abs;r(r.S,"Number",{isSafeInteger:function(t){return i(t)&&o(t)<=9007199254740991}})},function(t,e,n){var r=n(9);r(r.S,"Number",{MAX_SAFE_INTEGER:9007199254740991})},function(t,e,n){var r=n(9);r(r.S,"Number",{MIN_SAFE_INTEGER:-9007199254740991})},function(t,e,n){var r=n(9),i=n(86);r(r.S+r.F*(Number.parseFloat!=i),"Number",{parseFloat:i})},function(t,e,n){var r=n(9),i=n(82);r(r.S+r.F*(Number.parseInt!=i),"Number",{parseInt:i})},function(t,e,n){var r=n(9),i=n(104),o=Math.sqrt,a=Math.acosh;r(r.S+r.F*!(a&&710==Math.floor(a(Number.MAX_VALUE))&&a(1/0)==1/0),"Math",{acosh:function(t){return(t=+t)<1?NaN:t>94906265.62425156?Math.log(t)+Math.LN2:i(t-1+o(t-1)*o(t+1))}})},function(t,e){t.exports=Math.log1p||function(t){return(t=+t)>-1e-8&&t<1e-8?t-t*t/2:Math.log(1+t)}},function(t,e,n){function r(t){return isFinite(t=+t)&&0!=t?t<0?-r(-t):Math.log(t+Math.sqrt(t*t+1)):t}var i=n(9),o=Math.asinh;i(i.S+i.F*!(o&&1/o(0)>0),"Math",{asinh:r})},function(t,e,n){var r=n(9),i=Math.atanh;r(r.S+r.F*!(i&&1/i(-0)<0),"Math",{atanh:function(t){return 0==(t=+t)?t:Math.log((1+t)/(1-t))/2}})},function(t,e,n){var r=n(9),i=n(108);r(r.S,"Math",{cbrt:function(t){return i(t=+t)*Math.pow(Math.abs(t),1/3)}})},function(t,e){t.exports=Math.sign||function(t){return 0==(t=+t)||t!=t?t:t<0?-1:1}},function(t,e,n){var r=n(9);r(r.S,"Math",{clz32:function(t){return(t>>>=0)?31-Math.floor(Math.log(t+.5)*Math.LOG2E):32}})},function(t,e,n){var r=n(9),i=Math.exp;r(r.S,"Math",{cosh:function(t){return(i(t=+t)+i(-t))/2}})},function(t,e,n){var r=n(9),i=n(112);r(r.S+r.F*(i!=Math.expm1),"Math",{expm1:i})},function(t,e){var n=Math.expm1;t.exports=!n||n(10)>22025.465794806718||n(10)<22025.465794806718||n(-2e-17)!=-2e-17?function(t){return 0==(t=+t)?t:t>-1e-6&&t<1e-6?t+t*t/2:Math.exp(t)-1}:n},function(t,e,n){var r=n(9);r(r.S,"Math",{fround:n(114)})},function(t,e,n){var r=n(108),i=Math.pow,o=i(2,-52),a=i(2,-23),u=i(2,127)*(2-a),s=i(2,-126),c=function(t){return t+1/o-1/o};t.exports=Math.fround||function(t){var e,n,i=Math.abs(t),f=r(t);return i<s?f*c(i/s/a)*s*a:(e=(1+a/o)*i,n=e-(e-i),n>u||n!=n?f*(1/0):f*n)}},function(t,e,n){var r=n(9),i=Math.abs;r(r.S,"Math",{hypot:function(t,e){for(var n,r,o=0,a=0,u=arguments.length,s=0;a<u;)n=i(arguments[a++]),s<n?(r=s/n,o=o*r*r+1,s=n):n>0?(r=n/s,o+=r*r):o+=n;return s===1/0?1/0:s*Math.sqrt(o)}})},function(t,e,n){var r=n(9),i=Math.imul;r(r.S+r.F*n(8)(function(){return i(4294967295,5)!=-5||2!=i.length}),"Math",{imul:function(t,e){var n=65535,r=+t,i=+e,o=n&r,a=n&i;return 0|o*a+((n&r>>>16)*a+o*(n&i>>>16)<<16>>>0)}})},function(t,e,n){var r=n(9);r(r.S,"Math",{log10:function(t){return Math.log(t)*Math.LOG10E}})},function(t,e,n){var r=n(9);r(r.S,"Math",{log1p:n(104)})},function(t,e,n){var r=n(9);r(r.S,"Math",{log2:function(t){return Math.log(t)/Math.LN2}})},function(t,e,n){var r=n(9);r(r.S,"Math",{sign:n(108)})},function(t,e,n){var r=n(9),i=n(112),o=Math.exp;r(r.S+r.F*n(8)(function(){return!Math.sinh(-2e-17)!=-2e-17}),"Math",{sinh:function(t){return Math.abs(t=+t)<1?(i(t)-i(-t))/2:(o(t-1)-o(-t-1))*(Math.E/2)}})},function(t,e,n){var r=n(9),i=n(112),o=Math.exp;r(r.S,"Math",{tanh:function(t){var e=i(t=+t),n=i(-t);return e==1/0?1:n==1/0?-1:(e-n)/(o(t)+o(-t))}})},function(t,e,n){var r=n(9);r(r.S,"Math",{trunc:function(t){return(t>0?Math.floor:Math.ceil)(t)}})},function(t,e,n){var r=n(9),i=n(40),o=String.fromCharCode,a=String.fromCodePoint;r(r.S+r.F*(!!a&&1!=a.length),"String",{fromCodePoint:function(t){for(var e,n=[],r=arguments.length,a=0;r>a;){if(e=+arguments[a++],i(e,1114111)!==e)throw RangeError(e+" is not a valid code point");n.push(e<65536?o(e):o(((e-=65536)>>10)+55296,e%1024+56320))}return n.join("")}})},function(t,e,n){var r=n(9),i=n(33),o=n(38);r(r.S,"String",{raw:function(t){for(var e=i(t.raw),n=o(e.length),r=arguments.length,a=[],u=0;n>u;)a.push(String(e[u++])),u<r&&a.push(String(arguments[u]));return a.join("")}})},function(t,e,n){"use strict";n(83)("trim",function(t){return function(){return t(this,3)}})},function(t,e,n){"use strict";var r=n(128)(!0);n(129)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=r(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){var r=n(39),i=n(36);t.exports=function(t){return function(e,n){var o,a,u=String(i(e)),s=r(n),c=u.length;return s<0||s>=c?t?"":void 0:(o=u.charCodeAt(s),o<55296||o>56319||s+1===c||(a=u.charCodeAt(s+1))<56320||a>57343?t?u.charAt(s):o:t?u.slice(s,s+2):(o-55296<<10)+(a-56320)+65536)}}},function(t,e,n){"use strict";var r=n(29),i=n(9),o=n(19),a=n(11),u=n(6),s=n(130),c=n(131),f=n(25),l=n(59),h=n(26)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",v="keys",y="values",g=function(){return this};t.exports=function(t,e,n,m,_,b,w){c(n,e,m);var x,E,k,P=function(t){if(!p&&t in A)return A[t];switch(t){case v:return function(){return new n(this,t)};case y:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",M=_==y,O=!1,A=t.prototype,C=A[h]||A[d]||_&&A[_],T=C||P(_),R=_?M?P("entries"):T:void 0,j="Array"==e?A.entries||C:C;if(j&&(k=l(j.call(new t)),k!==Object.prototype&&k.next&&(f(k,S,!0),r||u(k,h)||a(k,h,g))),M&&C&&C.name!==y&&(O=!0,T=function(){return C.call(this)}),r&&!w||!p&&!O&&A[h]||a(A,h,T),s[e]=T,s[S]=g,_)if(x={values:M?T:P(y),keys:b?T:P(v),entries:R},w)for(E in x)E in A||o(A,E,x[E]);else i(i.P+i.F*(p||O),e,x);return x}},function(t,e){t.exports={}},function(t,e,n){"use strict";var r=n(46),i=n(18),o=n(25),a={};n(11)(a,n(26)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=r(a,{next:i(1,n)}),o(t,e+" Iterator")}},function(t,e,n){"use strict";var r=n(9),i=n(128)(!1);r(r.P,"String",{codePointAt:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(9),i=n(38),o=n(134),a="endsWith",u=""[a];r(r.P+r.F*n(136)(a),"String",{endsWith:function(t){var e=o(this,t,a),n=arguments.length>1?arguments[1]:void 0,r=i(e.length),s=void 0===n?r:Math.min(i(n),r),c=String(t);return u?u.call(e,c,s):e.slice(s-c.length,s)===c}})},function(t,e,n){var r=n(135),i=n(36);t.exports=function(t,e,n){if(r(e))throw TypeError("String#"+n+" doesn't accept regex!");return String(i(t))}},function(t,e,n){var r=n(14),i=n(35),o=n(26)("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[o])?!!e:"RegExp"==i(t))}},function(t,e,n){var r=n(26)("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[r]=!1,!"/./"[t](e)}catch(t){}}return!0}},function(t,e,n){"use strict";var r=n(9),i=n(134),o="includes";r(r.P+r.F*n(136)(o),"String",{includes:function(t){return!!~i(this,t,o).indexOf(t,arguments.length>1?arguments[1]:void 0)}})},function(t,e,n){var r=n(9);r(r.P,"String",{repeat:n(91)})},function(t,e,n){"use strict";var r=n(9),i=n(38),o=n(134),a="startsWith",u=""[a];r(r.P+r.F*n(136)(a),"String",{startsWith:function(t){var e=o(this,t,a),n=i(Math.min(arguments.length>1?arguments[1]:void 0,e.length)),r=String(t);return u?u.call(e,r,n):e.slice(n,n+r.length)===r}})},function(t,e,n){"use strict";n(141)("anchor",function(t){return function(e){return t(this,"a","name",e)}})},function(t,e,n){var r=n(9),i=n(8),o=n(36),a=/"/g,u=function(t,e,n,r){var i=String(o(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+String(r).replace(a,"&quot;")+'"'),u+">"+i+"</"+e+">"};t.exports=function(t,e){var n={};n[t]=e(u),r(r.P+r.F*i(function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}),"String",n)}},function(t,e,n){"use strict";n(141)("big",function(t){return function(){return t(this,"big","","")}})},function(t,e,n){"use strict";n(141)("blink",function(t){return function(){return t(this,"blink","","")}})},function(t,e,n){"use strict";n(141)("bold",function(t){return function(){return t(this,"b","","")}})},function(t,e,n){"use strict";n(141)("fixed",function(t){return function(){return t(this,"tt","","")}})},function(t,e,n){"use strict";n(141)("fontcolor",function(t){return function(e){return t(this,"font","color",e)}})},function(t,e,n){"use strict";n(141)("fontsize",function(t){return function(e){return t(this,"font","size",e)}})},function(t,e,n){"use strict";n(141)("italics",function(t){return function(){return t(this,"i","","")}})},function(t,e,n){"use strict";n(141)("link",function(t){return function(e){return t(this,"a","href",e)}})},function(t,e,n){"use strict";n(141)("small",function(t){return function(){return t(this,"small","","")}})},function(t,e,n){"use strict";n(141)("strike",function(t){return function(){return t(this,"strike","","")}})},function(t,e,n){"use strict";n(141)("sub",function(t){return function(){return t(this,"sub","","")}})},function(t,e,n){"use strict";n(141)("sup",function(t){return function(){return t(this,"sup","","")}})},function(t,e,n){var r=n(9);r(r.S,"Date",{now:function(){return(new Date).getTime()}})},function(t,e,n){"use strict";var r=n(9),i=n(58),o=n(17);r(r.P+r.F*n(8)(function(){return null!==new Date(NaN).toJSON()||1!==Date.prototype.toJSON.call({toISOString:function(){return 1}})}),"Date",{toJSON:function(t){var e=i(this),n=o(e);return"number"!=typeof n||isFinite(n)?e.toISOString():null}})},function(t,e,n){var r=n(9),i=n(157);r(r.P+r.F*(Date.prototype.toISOString!==i),"Date",{toISOString:i})},function(t,e,n){"use strict";var r=n(8),i=Date.prototype.getTime,o=Date.prototype.toISOString,a=function(t){return t>9?t:"0"+t};t.exports=r(function(){return"0385-07-25T07:06:39.999Z"!=o.call(new Date(-5e13-1))})||!r(function(){o.call(new Date(NaN))})?function(){if(!isFinite(i.call(this)))throw RangeError("Invalid time value");
var t=this,e=t.getUTCFullYear(),n=t.getUTCMilliseconds(),r=e<0?"-":e>9999?"+":"";return r+("00000"+Math.abs(e)).slice(r?-6:-4)+"-"+a(t.getUTCMonth()+1)+"-"+a(t.getUTCDate())+"T"+a(t.getUTCHours())+":"+a(t.getUTCMinutes())+":"+a(t.getUTCSeconds())+"."+(n>99?n:"0"+a(n))+"Z"}:o},function(t,e,n){var r=Date.prototype,i="Invalid Date",o="toString",a=r[o],u=r.getTime;new Date(NaN)+""!=i&&n(19)(r,o,function(){var t=u.call(this);return t===t?a.call(this):i})},function(t,e,n){var r=n(26)("toPrimitive"),i=Date.prototype;r in i||n(11)(i,r,n(160))},function(t,e,n){"use strict";var r=n(13),i=n(17),o="number";t.exports=function(t){if("string"!==t&&t!==o&&"default"!==t)throw TypeError("Incorrect hint");return i(r(this),t!=o)}},function(t,e,n){var r=n(9);r(r.S,"Array",{isArray:n(45)})},function(t,e,n){"use strict";var r=n(21),i=n(9),o=n(58),a=n(163),u=n(164),s=n(38),c=n(165),f=n(166);i(i.S+i.F*!n(167)(function(t){Array.from(t)}),"Array",{from:function(t){var e,n,i,l,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,v=d>1?arguments[1]:void 0,y=void 0!==v,g=0,m=f(h);if(y&&(v=r(v,d>2?arguments[2]:void 0,2)),void 0==m||p==Array&&u(m))for(e=s(h.length),n=new p(e);e>g;g++)c(n,g,y?v(h[g],g):h[g]);else for(l=m.call(h),n=new p;!(i=l.next()).done;g++)c(n,g,y?a(l,v,[i.value,g],!0):i.value);return n.length=g,n}})},function(t,e,n){var r=n(13);t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&r(o.call(t)),e}}},function(t,e,n){var r=n(130),i=n(26)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(r.Array===t||o[i]===t)}},function(t,e,n){"use strict";var r=n(12),i=n(18);t.exports=function(t,e,n){e in t?r.f(t,e,i(0,n)):t[e]=n}},function(t,e,n){var r=n(75),i=n(26)("iterator"),o=n(130);t.exports=n(10).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[r(t)]}},function(t,e,n){var r=n(26)("iterator"),i=!1;try{var o=[7][r]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!i)return!1;var n=!1;try{var o=[7],a=o[r]();a.next=function(){return{done:n=!0}},o[r]=function(){return a},t(o)}catch(t){}return n}},function(t,e,n){"use strict";var r=n(9),i=n(165);r(r.S+r.F*n(8)(function(){function t(){}return!(Array.of.call(t)instanceof t)}),"Array",{of:function(){for(var t=0,e=arguments.length,n=new("function"==typeof this?this:Array)(e);e>t;)i(n,t,arguments[t++]);return n.length=e,n}})},function(t,e,n){"use strict";var r=n(9),i=n(33),o=[].join;r(r.P+r.F*(n(34)!=Object||!n(170)(o)),"Array",{join:function(t){return o.call(i(this),void 0===t?",":t)}})},function(t,e,n){"use strict";var r=n(8);t.exports=function(t,e){return!!t&&r(function(){e?t.call(null,function(){},1):t.call(null)})}},function(t,e,n){"use strict";var r=n(9),i=n(48),o=n(35),a=n(40),u=n(38),s=[].slice;r(r.P+r.F*n(8)(function(){i&&s.call(i)}),"Array",{slice:function(t,e){var n=u(this.length),r=o(this);if(e=void 0===e?n:e,"Array"==r)return s.call(this,t,e);for(var i=a(t,n),c=a(e,n),f=u(c-i),l=Array(f),h=0;h<f;h++)l[h]="String"==r?this.charAt(i+h):this[i+h];return l}})},function(t,e,n){"use strict";var r=n(9),i=n(22),o=n(58),a=n(8),u=[].sort,s=[1,2,3];r(r.P+r.F*(a(function(){s.sort(void 0)})||!a(function(){s.sort(null)})||!n(170)(u)),"Array",{sort:function(t){return void 0===t?u.call(o(this)):u.call(o(this),i(t))}})},function(t,e,n){"use strict";var r=n(9),i=n(174)(0),o=n(170)([].forEach,!0);r(r.P+r.F*!o,"Array",{forEach:function(t){return i(this,t,arguments[1])}})},function(t,e,n){var r=n(21),i=n(34),o=n(58),a=n(38),u=n(175);t.exports=function(t,e){var n=1==t,s=2==t,c=3==t,f=4==t,l=6==t,h=5==t||l,p=e||u;return function(e,u,d){for(var v,y,g=o(e),m=i(g),_=r(u,d,3),b=a(m.length),w=0,x=n?p(e,b):s?p(e,0):void 0;b>w;w++)if((h||w in m)&&(v=m[w],y=_(v,w,g),t))if(n)x[w]=y;else if(y)switch(t){case 3:return!0;case 5:return v;case 6:return w;case 2:x.push(v)}else if(f)return!1;return l?-1:c||f?f:x}}},function(t,e,n){var r=n(176);t.exports=function(t,e){return new(r(t))(e)}},function(t,e,n){var r=n(14),i=n(45),o=n(26)("species");t.exports=function(t){var e;return i(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!i(e.prototype)||(e=void 0),r(e)&&(e=e[o],null===e&&(e=void 0))),void 0===e?Array:e}},function(t,e,n){"use strict";var r=n(9),i=n(174)(1);r(r.P+r.F*!n(170)([].map,!0),"Array",{map:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(9),i=n(174)(2);r(r.P+r.F*!n(170)([].filter,!0),"Array",{filter:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(9),i=n(174)(3);r(r.P+r.F*!n(170)([].some,!0),"Array",{some:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(9),i=n(174)(4);r(r.P+r.F*!n(170)([].every,!0),"Array",{every:function(t){return i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(9),i=n(182);r(r.P+r.F*!n(170)([].reduce,!0),"Array",{reduce:function(t){return i(this,t,arguments.length,arguments[1],!1)}})},function(t,e,n){var r=n(22),i=n(58),o=n(34),a=n(38);t.exports=function(t,e,n,u,s){r(e);var c=i(t),f=o(c),l=a(c.length),h=s?l-1:0,p=s?-1:1;if(n<2)for(;;){if(h in f){u=f[h],h+=p;break}if(h+=p,s?h<0:l<=h)throw TypeError("Reduce of empty array with no initial value")}for(;s?h>=0:l>h;h+=p)h in f&&(u=e(u,f[h],h,c));return u}},function(t,e,n){"use strict";var r=n(9),i=n(182);r(r.P+r.F*!n(170)([].reduceRight,!0),"Array",{reduceRight:function(t){return i(this,t,arguments.length,arguments[1],!0)}})},function(t,e,n){"use strict";var r=n(9),i=n(37)(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;r(r.P+r.F*(a||!n(170)(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:i(this,t,arguments[1])}})},function(t,e,n){"use strict";var r=n(9),i=n(33),o=n(39),a=n(38),u=[].lastIndexOf,s=!!u&&1/[1].lastIndexOf(1,-0)<0;r(r.P+r.F*(s||!n(170)(u)),"Array",{lastIndexOf:function(t){if(s)return u.apply(this,arguments)||0;var e=i(this),n=a(e.length),r=n-1;for(arguments.length>1&&(r=Math.min(r,o(arguments[1]))),r<0&&(r=n+r);r>=0;r--)if(r in e&&e[r]===t)return r||0;return-1}})},function(t,e,n){var r=n(9);r(r.P,"Array",{copyWithin:n(187)}),n(188)("copyWithin")},function(t,e,n){"use strict";var r=n(58),i=n(40),o=n(38);t.exports=[].copyWithin||function(t,e){var n=r(this),a=o(n.length),u=i(t,a),s=i(e,a),c=arguments.length>2?arguments[2]:void 0,f=Math.min((void 0===c?a:i(c,a))-s,a-u),l=1;for(s<u&&u<s+f&&(l=-1,s+=f-1,u+=f-1);f-- >0;)s in n?n[u]=n[s]:delete n[u],u+=l,s+=l;return n}},function(t,e,n){var r=n(26)("unscopables"),i=Array.prototype;void 0==i[r]&&n(11)(i,r,{}),t.exports=function(t){i[r][t]=!0}},function(t,e,n){var r=n(9);r(r.P,"Array",{fill:n(190)}),n(188)("fill")},function(t,e,n){"use strict";var r=n(58),i=n(40),o=n(38);t.exports=function(t){for(var e=r(this),n=o(e.length),a=arguments.length,u=i(a>1?arguments[1]:void 0,n),s=a>2?arguments[2]:void 0,c=void 0===s?n:i(s,n);c>u;)e[u++]=t;return e}},function(t,e,n){"use strict";var r=n(9),i=n(174)(5),o="find",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(188)(o)},function(t,e,n){"use strict";var r=n(9),i=n(174)(6),o="findIndex",a=!0;o in[]&&Array(1)[o](function(){a=!1}),r(r.P+r.F*a,"Array",{findIndex:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(188)(o)},function(t,e,n){n(194)("Array")},function(t,e,n){"use strict";var r=n(5),i=n(12),o=n(7),a=n(26)("species");t.exports=function(t){var e=r[t];o&&e&&!e[a]&&i.f(e,a,{configurable:!0,get:function(){return this}})}},function(t,e,n){"use strict";var r=n(188),i=n(196),o=n(130),a=n(33);t.exports=n(129)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,n):"values"==e?i(0,t[n]):i(0,[n,t[n]])},"values"),o.Arguments=o.Array,r("keys"),r("values"),r("entries")},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var r=n(5),i=n(88),o=n(12).f,a=n(50).f,u=n(135),s=n(198),c=r.RegExp,f=c,l=c.prototype,h=/a/g,p=/a/g,d=new c(h)!==h;if(n(7)&&(!d||n(8)(function(){return p[n(26)("match")]=!1,c(h)!=h||c(p)==p||"/a/i"!=c(h,"i")}))){c=function(t,e){var n=this instanceof c,r=u(t),o=void 0===e;return!n&&r&&t.constructor===c&&o?t:i(d?new f(r&&!o?t.source:t,e):f((r=t instanceof c)?t.source:t,r&&o?s.call(t):e),n?this:l,c)};for(var v=(function(t){t in c||o(c,t,{configurable:!0,get:function(){return f[t]},set:function(e){f[t]=e}})}),y=a(f),g=0;y.length>g;)v(y[g++]);l.constructor=c,c.prototype=l,n(19)(r,"RegExp",c)}n(194)("RegExp")},function(t,e,n){"use strict";var r=n(13);t.exports=function(){var t=r(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},function(t,e,n){"use strict";n(200);var r=n(13),i=n(198),o=n(7),a="toString",u=/./[a],s=function(t){n(19)(RegExp.prototype,a,t,!0)};n(8)(function(){return"/a/b"!=u.call({source:"a",flags:"b"})})?s(function(){var t=r(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?i.call(t):void 0)}):u.name!=a&&s(function(){return u.call(this)})},function(t,e,n){n(7)&&"g"!=/./g.flags&&n(12).f(RegExp.prototype,"flags",{configurable:!0,get:n(198)})},function(t,e,n){n(202)("match",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){"use strict";var r=n(11),i=n(19),o=n(8),a=n(36),u=n(26);t.exports=function(t,e,n){var s=u(t),c=n(a,s,""[t]),f=c[0],l=c[1];o(function(){var e={};return e[s]=function(){return 7},7!=""[t](e)})&&(i(String.prototype,t,f),r(RegExp.prototype,s,2==e?function(t,e){return l.call(t,this,e)}:function(t){return l.call(t,this)}))}},function(t,e,n){n(202)("replace",2,function(t,e,n){return[function(r,i){"use strict";var o=t(this),a=void 0==r?void 0:r[e];return void 0!==a?a.call(r,o,i):n.call(String(o),r,i)},n]})},function(t,e,n){n(202)("search",1,function(t,e,n){return[function(n){"use strict";var r=t(this),i=void 0==n?void 0:n[e];return void 0!==i?i.call(n,r):new RegExp(n)[e](String(r))},n]})},function(t,e,n){n(202)("split",2,function(t,e,r){"use strict";var i=n(135),o=r,a=[].push,u="split",s="length",c="lastIndex";if("c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[s]||2!="ab"[u](/(?:ab)*/)[s]||4!="."[u](/(.?)(.?)/)[s]||"."[u](/()()/)[s]>1||""[u](/.?/)[s]){var f=void 0===/()??/.exec("")[1];r=function(t,e){var n=String(this);if(void 0===t&&0===e)return[];if(!i(t))return o.call(n,t,e);var r,u,l,h,p,d=[],v=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),y=0,g=void 0===e?4294967295:e>>>0,m=new RegExp(t.source,v+"g");for(f||(r=new RegExp("^"+m.source+"$(?!\\s)",v));(u=m.exec(n))&&(l=u.index+u[0][s],!(l>y&&(d.push(n.slice(y,u.index)),!f&&u[s]>1&&u[0].replace(r,function(){for(p=1;p<arguments[s]-2;p++)void 0===arguments[p]&&(u[p]=void 0)}),u[s]>1&&u.index<n[s]&&a.apply(d,u.slice(1)),h=u[0][s],y=l,d[s]>=g)));)m[c]===u.index&&m[c]++;return y===n[s]?!h&&m.test("")||d.push(""):d.push(n.slice(y)),d[s]>g?d.slice(0,g):d}}else"0"[u](void 0,0)[s]&&(r=function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)});return[function(n,i){var o=t(this),a=void 0==n?void 0:n[e];return void 0!==a?a.call(n,o,i):r.call(String(o),n,i)},r]})},function(t,e,n){"use strict";var r,i,o,a,u=n(29),s=n(5),c=n(21),f=n(75),l=n(9),h=n(14),p=n(22),d=n(207),v=n(208),y=n(209),g=n(210).set,m=n(211)(),_=n(212),b=n(213),w=n(214),x="Promise",E=s.TypeError,k=s.process,P=s[x],S="process"==f(k),M=function(){},O=i=_.f,A=!!function(){try{var t=P.resolve(1),e=(t.constructor={})[n(26)("species")]=function(t){t(M,M)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(M)instanceof e}catch(t){}}(),C=function(t){var e;return!(!h(t)||"function"!=typeof(e=t.then))&&e},T=function(t,e){if(!t._n){t._n=!0;var n=t._c;m(function(){for(var r=t._v,i=1==t._s,o=0,a=function(e){var n,o,a=i?e.ok:e.fail,u=e.resolve,s=e.reject,c=e.domain;try{a?(i||(2==t._h&&I(t),t._h=1),a===!0?n=r:(c&&c.enter(),n=a(r),c&&c.exit()),n===e.promise?s(E("Promise-chain cycle")):(o=C(n))?o.call(n,u,s):u(n)):s(r)}catch(t){s(t)}};n.length>o;)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&R(t)})}},R=function(t){g.call(s,function(){var e,n,r,i=t._v,o=j(t);if(o&&(e=b(function(){S?k.emit("unhandledRejection",i,t):(n=s.onunhandledrejection)?n({promise:t,reason:i}):(r=s.console)&&r.error&&r.error("Unhandled promise rejection",i)}),t._h=S||j(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},j=function(t){if(1==t._h)return!1;for(var e,n=t._a||t._c,r=0;n.length>r;)if(e=n[r++],e.fail||!j(e.promise))return!1;return!0},I=function(t){g.call(s,function(){var e;S?k.emit("rejectionHandled",t):(e=s.onrejectionhandled)&&e({promise:t,reason:t._v})})},F=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),T(e,!0))},L=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw E("Promise can't be resolved itself");(e=C(t))?m(function(){var r={_w:n,_d:!1};try{e.call(t,c(L,r,1),c(F,r,1))}catch(t){F.call(r,t)}}):(n._v=t,n._s=1,T(n,!1))}catch(t){F.call({_w:n,_d:!1},t)}}};A||(P=function(t){d(this,P,x,"_h"),p(t),r.call(this);try{t(c(L,this,1),c(F,this,1))}catch(t){F.call(this,t)}},r=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},r.prototype=n(215)(P.prototype,{then:function(t,e){var n=O(y(this,P));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=S?k.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&T(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new r;this.promise=t,this.resolve=c(L,t,1),this.reject=c(F,t,1)},_.f=O=function(t){return t===P||t===a?new o(t):i(t)}),l(l.G+l.W+l.F*!A,{Promise:P}),n(25)(P,x),n(194)(x),a=n(10)[x],l(l.S+l.F*!A,x,{reject:function(t){var e=O(this),n=e.reject;return n(t),e.promise}}),l(l.S+l.F*(u||!A),x,{resolve:function(t){return w(u&&this===a?P:this,t)}}),l(l.S+l.F*!(A&&n(167)(function(t){P.all(t).catch(M)})),x,{all:function(t){var e=this,n=O(e),r=n.resolve,i=n.reject,o=b(function(){var n=[],o=0,a=1;v(t,!1,function(t){var u=o++,s=!1;n.push(void 0),a++,e.resolve(t).then(function(t){s||(s=!0,n[u]=t,--a||r(n))},i)}),--a||r(n)});return o.e&&i(o.v),n.promise},race:function(t){var e=this,n=O(e),r=n.reject,i=b(function(){v(t,!1,function(t){e.resolve(t).then(n.resolve,r)})});return i.e&&r(i.v),n.promise}})},function(t,e){t.exports=function(t,e,n,r){if(!(t instanceof e)||void 0!==r&&r in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var r=n(21),i=n(163),o=n(164),a=n(13),u=n(38),s=n(166),c={},f={},e=t.exports=function(t,e,n,l,h){var p,d,v,y,g=h?function(){return t}:s(t),m=r(n,l,e?2:1),_=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=u(t.length);p>_;_++)if(y=e?m(a(d=t[_])[0],d[1]):m(t[_]),y===c||y===f)return y}else for(v=g.call(t);!(d=v.next()).done;)if(y=i(v,m,d.value,e),y===c||y===f)return y};e.BREAK=c,e.RETURN=f},function(t,e,n){var r=n(13),i=n(22),o=n(26)("species");t.exports=function(t,e){var n,a=r(t).constructor;return void 0===a||void 0==(n=r(a)[o])?e:i(n)}},function(t,e,n){var r,i,o,a=n(21),u=n(78),s=n(48),c=n(16),f=n(5),l=f.process,h=f.setImmediate,p=f.clearImmediate,d=f.MessageChannel,v=f.Dispatch,y=0,g={},m="onreadystatechange",_=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){_.call(t.data)};h&&p||(h=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++y]=function(){u("function"==typeof t?t:Function(t),e)},r(y),y},p=function(t){delete g[t]},"process"==n(35)(l)?r=function(t){l.nextTick(a(_,t,1))}:v&&v.now?r=function(t){v.now(a(_,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=b,r=a(o.postMessage,o,1)):f.addEventListener&&"function"==typeof postMessage&&!f.importScripts?(r=function(t){f.postMessage(t+"","*")},f.addEventListener("message",b,!1)):r=m in c("script")?function(t){s.appendChild(c("script"))[m]=function(){s.removeChild(this),_.call(t)}}:function(t){setTimeout(a(_,t,1),0)}),t.exports={set:h,clear:p}},function(t,e,n){var r=n(5),i=n(210).set,o=r.MutationObserver||r.WebKitMutationObserver,a=r.process,u=r.Promise,s="process"==n(35)(a);t.exports=function(){var t,e,n,c=function(){var r,i;for(s&&(r=a.domain)&&r.exit();t;){i=t.fn,t=t.next;try{i()}catch(r){throw t?n():e=void 0,r}}e=void 0,r&&r.enter()};if(s)n=function(){a.nextTick(c)};else if(o){var f=!0,l=document.createTextNode("");new o(c).observe(l,{characterData:!0}),n=function(){l.data=f=!f}}else if(u&&u.resolve){var h=u.resolve();n=function(){h.then(c)}}else n=function(){i.call(r,c)};return function(r){var i={fn:r,next:void 0};e&&(e.next=i),t||(t=i,n()),e=i}}},function(t,e,n){"use strict";function r(t){var e,n;this.promise=new t(function(t,r){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=r}),this.resolve=i(e),this.reject=i(n)}var i=n(22);t.exports.f=function(t){return new r(t)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var r=n(13),i=n(14),o=n(212);t.exports=function(t,e){if(r(t),i(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},function(t,e,n){var r=n(19);t.exports=function(t,e,n){for(var i in e)r(t,i,e[i],n);return t}},function(t,e,n){"use strict";var r=n(217),i=n(218),o="Map";t.exports=n(219)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=r.getEntry(i(this,o),t);return e&&e.v},set:function(t,e){return r.def(i(this,o),0===t?0:t,e)}},r,!0)},function(t,e,n){"use strict";var r=n(12).f,i=n(46),o=n(215),a=n(21),u=n(207),s=n(208),c=n(129),f=n(196),l=n(194),h=n(7),p=n(23).fastKey,d=n(218),v=h?"_s":"size",y=function(t,e){var n,r=p(e);if("F"!==r)return t._i[r];for(n=t._f;n;n=n.n)if(n.k==e)return n};t.exports={getConstructor:function(t,e,n,c){var f=t(function(t,r){u(t,f,e,"_i"),t._t=e,t._i=i(null),t._f=void 0,t._l=void 0,t[v]=0,void 0!=r&&s(r,n,t[c],t)});return o(f.prototype,{clear:function(){for(var t=d(this,e),n=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];t._f=t._l=void 0,t[v]=0},delete:function(t){var n=d(this,e),r=y(n,t);if(r){var i=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=i),i&&(i.p=o),n._f==r&&(n._f=i),n._l==r&&(n._l=o),n[v]--}return!!r},forEach:function(t){d(this,e);for(var n,r=a(t,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(t){return!!y(d(this,e),t)}}),h&&r(f.prototype,"size",{get:function(){return d(this,e)[v]}}),f},def:function(t,e,n){var r,i,o=y(t,e);return o?o.v=n:(t._l=o={i:i=p(e,!0),k:e,v:n,p:r=t._l,n:void 0,r:!1},t._f||(t._f=o),r&&(r.n=o),t[v]++,"F"!==i&&(t._i[i]=o)),t},getEntry:y,setStrong:function(t,e,n){c(t,e,function(t,n){this._t=d(t,e),this._k=n,this._l=void 0},function(){for(var t=this,e=t._k,n=t._l;n&&n.r;)n=n.p;return t._t&&(t._l=n=n?n.n:t._t._f)?"keys"==e?f(0,n.k):"values"==e?f(0,n.v):f(0,[n.k,n.v]):(t._t=void 0,f(1))},n?"entries":"values",!n,!0),l(e)}}},function(t,e,n){var r=n(14);t.exports=function(t,e){if(!r(t)||t._t!==e)throw TypeError("Incompatible receiver, "+e+" required!");return t}},function(t,e,n){"use strict";var r=n(5),i=n(9),o=n(19),a=n(215),u=n(23),s=n(208),c=n(207),f=n(14),l=n(8),h=n(167),p=n(25),d=n(88);t.exports=function(t,e,n,v,y,g){var m=r[t],_=m,b=y?"set":"add",w=_&&_.prototype,x={},E=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(g&&!f(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return g&&!f(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,n){return e.call(this,0===t?0:t,n),this})};if("function"==typeof _&&(g||w.forEach&&!l(function(){(new _).entries().next()}))){var k=new _,P=k[b](g?{}:-0,1)!=k,S=l(function(){k.has(1)}),M=h(function(t){new _(t)}),O=!g&&l(function(){for(var t=new _,e=5;e--;)t[b](e,e);return!t.has(-0)});M||(_=e(function(e,n){c(e,_,t);var r=d(new m,e,_);return void 0!=n&&s(n,y,r[b],r),r}),_.prototype=w,w.constructor=_),(S||O)&&(E("delete"),E("has"),y&&E("get")),(O||P)&&E(b),g&&w.clear&&delete w.clear}else _=v.getConstructor(e,t,y,b),a(_.prototype,n),u.NEED=!0;return p(_,t),x[t]=_,i(i.G+i.W+i.F*(_!=m),x),g||v.setStrong(_,t,y),_}},function(t,e,n){"use strict";var r=n(217),i=n(218),o="Set";t.exports=n(219)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t=0===t?0:t,t)}},r)},function(t,e,n){"use strict";var r,i=n(174)(0),o=n(19),a=n(23),u=n(69),s=n(222),c=n(14),f=n(8),l=n(218),h="WeakMap",p=a.getWeak,d=Object.isExtensible,v=s.ufstore,y={},g=function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},m={get:function(t){if(c(t)){var e=p(t);return e===!0?v(l(this,h)).get(t):e?e[this._i]:void 0}},set:function(t,e){return s.def(l(this,h),t,e)}},_=t.exports=n(219)(h,g,m,s,!0,!0);f(function(){return 7!=(new _).set((Object.freeze||Object)(y),7).get(y)})&&(r=s.getConstructor(g,h),u(r.prototype,m),a.NEED=!0,i(["delete","has","get","set"],function(t){var e=_.prototype,n=e[t];o(e,t,function(e,i){if(c(e)&&!d(e)){this._f||(this._f=new r);var o=this._f[t](e,i);return"set"==t?this:o}return n.call(this,e,i)})}))},function(t,e,n){"use strict";var r=n(215),i=n(23).getWeak,o=n(13),a=n(14),u=n(207),s=n(208),c=n(174),f=n(6),l=n(218),h=c(5),p=c(6),d=0,v=function(t){return t._l||(t._l=new y)},y=function(){this.a=[]},g=function(t,e){return h(t.a,function(t){return t[0]===e})};y.prototype={get:function(t){var e=g(this,t);if(e)return e[1]},has:function(t){return!!g(this,t)},set:function(t,e){var n=g(this,t);n?n[1]=e:this.a.push([t,e])},delete:function(t){var e=p(this.a,function(e){return e[0]===t});return~e&&this.a.splice(e,1),!!~e}},t.exports={getConstructor:function(t,e,n,o){var c=t(function(t,r){u(t,c,e,"_i"),t._t=e,t._i=d++,t._l=void 0,void 0!=r&&s(r,n,t[o],t)});return r(c.prototype,{delete:function(t){if(!a(t))return!1;var n=i(t);return n===!0?v(l(this,e)).delete(t):n&&f(n,this._i)&&delete n[this._i]},has:function(t){if(!a(t))return!1;var n=i(t);return n===!0?v(l(this,e)).has(t):n&&f(n,this._i)}}),c},def:function(t,e,n){var r=i(o(e),!0);return r===!0?v(t).set(e,n):r[t._i]=n,t},ufstore:v}},function(t,e,n){"use strict";var r=n(222),i=n(218),o="WeakSet";n(219)(o,function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return r.def(i(this,o),t,!0)}},r,!1,!0)},function(t,e,n){"use strict";var r=n(9),i=n(225),o=n(226),a=n(13),u=n(40),s=n(38),c=n(14),f=n(5).ArrayBuffer,l=n(209),h=o.ArrayBuffer,p=o.DataView,d=i.ABV&&f.isView,v=h.prototype.slice,y=i.VIEW,g="ArrayBuffer";r(r.G+r.W+r.F*(f!==h),{ArrayBuffer:h}),r(r.S+r.F*!i.CONSTR,g,{isView:function(t){return d&&d(t)||c(t)&&y in t}}),r(r.P+r.U+r.F*n(8)(function(){return!new h(2).slice(1,void 0).byteLength}),g,{slice:function(t,e){if(void 0!==v&&void 0===e)return v.call(a(this),t);for(var n=a(this).byteLength,r=u(t,n),i=u(void 0===e?n:e,n),o=new(l(this,h))(s(i-r)),c=new p(this),f=new p(o),d=0;r<i;)f.setUint8(d++,c.getUint8(r++));return o}}),n(194)(g)},function(t,e,n){for(var r,i=n(5),o=n(11),a=n(20),u=a("typed_array"),s=a("view"),c=!(!i.ArrayBuffer||!i.DataView),f=c,l=0,h=9,p="Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(",");l<h;)(r=i[p[l++]])?(o(r.prototype,u,!0),o(r.prototype,s,!0)):f=!1;t.exports={ABV:c,CONSTR:f,TYPED:u,VIEW:s}},function(t,e,n){"use strict";function r(t,e,n){var r,i,o,a=Array(n),u=8*n-e-1,s=(1<<u)-1,c=s>>1,f=23===e?z(2,-24)-z(2,-77):0,l=0,h=t<0||0===t&&1/t<0?1:0;for(t=U(t),t!=t||t===B?(i=t!=t?1:0,r=s):(r=q(Y(t)/H),t*(o=z(2,-r))<1&&(r--,o*=2),t+=r+c>=1?f/o:f*z(2,1-c),t*o>=2&&(r++,o/=2),r+c>=s?(i=0,r=s):r+c>=1?(i=(t*o-1)*z(2,e),r+=c):(i=t*z(2,c-1)*z(2,e),r=0));e>=8;a[l++]=255&i,i/=256,e-=8);for(r=r<<e|i,u+=e;u>0;a[l++]=255&r,r/=256,u-=8);return a[--l]|=128*h,a}function i(t,e,n){var r,i=8*n-e-1,o=(1<<i)-1,a=o>>1,u=i-7,s=n-1,c=t[s--],f=127&c;for(c>>=7;u>0;f=256*f+t[s],s--,u-=8);for(r=f&(1<<-u)-1,f>>=-u,u+=e;u>0;r=256*r+t[s],s--,u-=8);if(0===f)f=1-a;else{if(f===o)return r?NaN:c?-B:B;r+=z(2,e),f-=a}return(c?-1:1)*r*z(2,f-e)}function o(t){return t[3]<<24|t[2]<<16|t[1]<<8|t[0]}function a(t){return[255&t]}function u(t){return[255&t,t>>8&255]}function s(t){return[255&t,t>>8&255,t>>16&255,t>>24&255]}function c(t){return r(t,52,8)}function f(t){return r(t,23,4)}function l(t,e,n){S(t[T],e,{get:function(){return this[n]}})}function h(t,e,n,r){var i=+n,o=k(i);if(o+e>t[$])throw N(j);var a=t[X]._b,u=o+t[Q],s=a.slice(u,u+e);return r?s:s.reverse()}function p(t,e,n,r,i,o){var a=+n,u=k(a);if(u+e>t[$])throw N(j);for(var s=t[X]._b,c=u+t[Q],f=r(+i),l=0;l<e;l++)s[c+l]=f[o?l:e-l-1]}var d=n(5),v=n(7),y=n(29),g=n(225),m=n(11),_=n(215),b=n(8),w=n(207),x=n(39),E=n(38),k=n(227),P=n(50).f,S=n(12).f,M=n(190),O=n(25),A="ArrayBuffer",C="DataView",T="prototype",R="Wrong length!",j="Wrong index!",I=d[A],F=d[C],L=d.Math,N=d.RangeError,B=d.Infinity,D=I,U=L.abs,z=L.pow,q=L.floor,Y=L.log,H=L.LN2,V="buffer",G="byteLength",W="byteOffset",X=v?"_b":V,$=v?"_l":G,Q=v?"_o":W;if(g.ABV){if(!b(function(){I(1)})||!b(function(){new I(-1)})||b(function(){return new I,new I(1.5),new I(NaN),I.name!=A})){I=function(t){return w(this,I),new D(k(t))};for(var J,K=I[T]=D[T],Z=P(D),tt=0;Z.length>tt;)(J=Z[tt++])in I||m(I,J,D[J]);y||(K.constructor=I)}var et=new F(new I(2)),nt=F[T].setInt8;et.setInt8(0,2147483648),et.setInt8(1,2147483649),!et.getInt8(0)&&et.getInt8(1)||_(F[T],{setInt8:function(t,e){nt.call(this,t,e<<24>>24)},setUint8:function(t,e){nt.call(this,t,e<<24>>24)}},!0)}else I=function(t){w(this,I,A);var e=k(t);this._b=M.call(Array(e),0),this[$]=e},F=function(t,e,n){w(this,F,C),w(t,I,C);var r=t[$],i=x(e);if(i<0||i>r)throw N("Wrong offset!");if(n=void 0===n?r-i:E(n),i+n>r)throw N(R);this[X]=t,this[Q]=i,this[$]=n},v&&(l(I,G,"_l"),l(F,V,"_b"),l(F,G,"_l"),l(F,W,"_o")),_(F[T],{getInt8:function(t){return h(this,1,t)[0]<<24>>24},getUint8:function(t){return h(this,1,t)[0]},getInt16:function(t){var e=h(this,2,t,arguments[1]);return(e[1]<<8|e[0])<<16>>16},getUint16:function(t){var e=h(this,2,t,arguments[1]);return e[1]<<8|e[0]},getInt32:function(t){return o(h(this,4,t,arguments[1]))},getUint32:function(t){return o(h(this,4,t,arguments[1]))>>>0},getFloat32:function(t){return i(h(this,4,t,arguments[1]),23,4)},getFloat64:function(t){return i(h(this,8,t,arguments[1]),52,8)},setInt8:function(t,e){p(this,1,t,a,e)},setUint8:function(t,e){p(this,1,t,a,e)},setInt16:function(t,e){p(this,2,t,u,e,arguments[2])},setUint16:function(t,e){p(this,2,t,u,e,arguments[2])},setInt32:function(t,e){p(this,4,t,s,e,arguments[2])},setUint32:function(t,e){p(this,4,t,s,e,arguments[2])},setFloat32:function(t,e){p(this,4,t,f,e,arguments[2])},setFloat64:function(t,e){p(this,8,t,c,e,arguments[2])}});O(I,A),O(F,C),m(F[T],g.VIEW,!0),e[A]=I,e[C]=F},function(t,e,n){var r=n(39),i=n(38);t.exports=function(t){if(void 0===t)return 0;var e=r(t),n=i(e);if(e!==n)throw RangeError("Wrong length!");return n}},function(t,e,n){var r=n(9);r(r.G+r.W+r.F*!n(225).ABV,{DataView:n(226).DataView})},function(t,e,n){n(230)("Int8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){"use strict";if(n(7)){var r=n(29),i=n(5),o=n(8),a=n(9),u=n(225),s=n(226),c=n(21),f=n(207),l=n(18),h=n(11),p=n(215),d=n(39),v=n(38),y=n(227),g=n(40),m=n(17),_=n(6),b=n(75),w=n(14),x=n(58),E=n(164),k=n(46),P=n(59),S=n(50).f,M=n(166),O=n(20),A=n(26),C=n(174),T=n(37),R=n(209),j=n(195),I=n(130),F=n(167),L=n(194),N=n(190),B=n(187),D=n(12),U=n(51),z=D.f,q=U.f,Y=i.RangeError,H=i.TypeError,V=i.Uint8Array,G="ArrayBuffer",W="Shared"+G,X="BYTES_PER_ELEMENT",$="prototype",Q=Array[$],J=s.ArrayBuffer,K=s.DataView,Z=C(0),tt=C(2),et=C(3),nt=C(4),rt=C(5),it=C(6),ot=T(!0),at=T(!1),ut=j.values,st=j.keys,ct=j.entries,ft=Q.lastIndexOf,lt=Q.reduce,ht=Q.reduceRight,pt=Q.join,dt=Q.sort,vt=Q.slice,yt=Q.toString,gt=Q.toLocaleString,mt=A("iterator"),_t=A("toStringTag"),bt=O("typed_constructor"),wt=O("def_constructor"),xt=u.CONSTR,Et=u.TYPED,kt=u.VIEW,Pt="Wrong length!",St=C(1,function(t,e){return Tt(R(t,t[wt]),e)}),Mt=o(function(){return 1===new V(new Uint16Array([1]).buffer)[0]}),Ot=!!V&&!!V[$].set&&o(function(){new V(1).set({})}),At=function(t,e){var n=d(t);if(n<0||n%e)throw Y("Wrong offset!");return n},Ct=function(t){if(w(t)&&Et in t)return t;throw H(t+" is not a typed array!")},Tt=function(t,e){if(!(w(t)&&bt in t))throw H("It is not a typed array constructor!");return new t(e)},Rt=function(t,e){return jt(R(t,t[wt]),e)},jt=function(t,e){for(var n=0,r=e.length,i=Tt(t,r);r>n;)i[n]=e[n++];return i},It=function(t,e,n){z(t,e,{get:function(){return this._d[n]}})},Ft=function(t){var e,n,r,i,o,a,u=x(t),s=arguments.length,f=s>1?arguments[1]:void 0,l=void 0!==f,h=M(u);if(void 0!=h&&!E(h)){for(a=h.call(u),r=[],e=0;!(o=a.next()).done;e++)r.push(o.value);u=r}for(l&&s>2&&(f=c(f,arguments[2],2)),e=0,n=v(u.length),i=Tt(this,n);n>e;e++)i[e]=l?f(u[e],e):u[e];return i},Lt=function(){for(var t=0,e=arguments.length,n=Tt(this,e);e>t;)n[t]=arguments[t++];return n},Nt=!!V&&o(function(){gt.call(new V(1))}),Bt=function(){return gt.apply(Nt?vt.call(Ct(this)):Ct(this),arguments)},Dt={copyWithin:function(t,e){return B.call(Ct(this),t,e,arguments.length>2?arguments[2]:void 0)},every:function(t){return nt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},fill:function(t){return N.apply(Ct(this),arguments)},filter:function(t){return Rt(this,tt(Ct(this),t,arguments.length>1?arguments[1]:void 0))},find:function(t){return rt(Ct(this),t,arguments.length>1?arguments[1]:void 0)},findIndex:function(t){return it(Ct(this),t,arguments.length>1?arguments[1]:void 0)},forEach:function(t){Z(Ct(this),t,arguments.length>1?arguments[1]:void 0)},indexOf:function(t){return at(Ct(this),t,arguments.length>1?arguments[1]:void 0)},includes:function(t){return ot(Ct(this),t,arguments.length>1?arguments[1]:void 0)},join:function(t){return pt.apply(Ct(this),arguments)},lastIndexOf:function(t){return ft.apply(Ct(this),arguments)},map:function(t){return St(Ct(this),t,arguments.length>1?arguments[1]:void 0)},reduce:function(t){return lt.apply(Ct(this),arguments)},reduceRight:function(t){return ht.apply(Ct(this),arguments)},reverse:function(){for(var t,e=this,n=Ct(e).length,r=Math.floor(n/2),i=0;i<r;)t=e[i],e[i++]=e[--n],e[n]=t;return e},some:function(t){return et(Ct(this),t,arguments.length>1?arguments[1]:void 0)},sort:function(t){return dt.call(Ct(this),t)},subarray:function(t,e){var n=Ct(this),r=n.length,i=g(t,r);return new(R(n,n[wt]))(n.buffer,n.byteOffset+i*n.BYTES_PER_ELEMENT,v((void 0===e?r:g(e,r))-i))}},Ut=function(t,e){return Rt(this,vt.call(Ct(this),t,e))},zt=function(t){Ct(this);var e=At(arguments[1],1),n=this.length,r=x(t),i=v(r.length),o=0;if(i+e>n)throw Y(Pt);for(;o<i;)this[e+o]=r[o++]},qt={entries:function(){return ct.call(Ct(this))},keys:function(){return st.call(Ct(this))},values:function(){return ut.call(Ct(this))}},Yt=function(t,e){return w(t)&&t[Et]&&"symbol"!=typeof e&&e in t&&String(+e)==String(e)},Ht=function(t,e){return Yt(t,e=m(e,!0))?l(2,t[e]):q(t,e)},Vt=function(t,e,n){return!(Yt(t,e=m(e,!0))&&w(n)&&_(n,"value"))||_(n,"get")||_(n,"set")||n.configurable||_(n,"writable")&&!n.writable||_(n,"enumerable")&&!n.enumerable?z(t,e,n):(t[e]=n.value,t)};xt||(U.f=Ht,D.f=Vt),a(a.S+a.F*!xt,"Object",{getOwnPropertyDescriptor:Ht,defineProperty:Vt}),o(function(){yt.call({})})&&(yt=gt=function(){return pt.call(this)});var Gt=p({},Dt);p(Gt,qt),h(Gt,mt,qt.values),p(Gt,{slice:Ut,set:zt,constructor:function(){},toString:yt,toLocaleString:Bt}),It(Gt,"buffer","b"),It(Gt,"byteOffset","o"),It(Gt,"byteLength","l"),It(Gt,"length","e"),z(Gt,_t,{get:function(){return this[Et]}}),t.exports=function(t,e,n,s){s=!!s;var c=t+(s?"Clamped":"")+"Array",l="get"+t,p="set"+t,d=i[c],g=d||{},m=d&&P(d),_=!d||!u.ABV,x={},E=d&&d[$],M=function(t,n){var r=t._d;return r.v[l](n*e+r.o,Mt)},O=function(t,n,r){var i=t._d;s&&(r=(r=Math.round(r))<0?0:r>255?255:255&r),i.v[p](n*e+i.o,r,Mt);
},A=function(t,e){z(t,e,{get:function(){return M(this,e)},set:function(t){return O(this,e,t)},enumerable:!0})};_?(d=n(function(t,n,r,i){f(t,d,c,"_d");var o,a,u,s,l=0,p=0;if(w(n)){if(!(n instanceof J||(s=b(n))==G||s==W))return Et in n?jt(d,n):Ft.call(d,n);o=n,p=At(r,e);var g=n.byteLength;if(void 0===i){if(g%e)throw Y(Pt);if(a=g-p,a<0)throw Y(Pt)}else if(a=v(i)*e,a+p>g)throw Y(Pt);u=a/e}else u=y(n),a=u*e,o=new J(a);for(h(t,"_d",{b:o,o:p,l:a,e:u,v:new K(o)});l<u;)A(t,l++)}),E=d[$]=k(Gt),h(E,"constructor",d)):o(function(){d(1)})&&o(function(){new d(-1)})&&F(function(t){new d,new d(null),new d(1.5),new d(t)},!0)||(d=n(function(t,n,r,i){f(t,d,c);var o;return w(n)?n instanceof J||(o=b(n))==G||o==W?void 0!==i?new g(n,At(r,e),i):void 0!==r?new g(n,At(r,e)):new g(n):Et in n?jt(d,n):Ft.call(d,n):new g(y(n))}),Z(m!==Function.prototype?S(g).concat(S(m)):S(g),function(t){t in d||h(d,t,g[t])}),d[$]=E,r||(E.constructor=d));var C=E[mt],T=!!C&&("values"==C.name||void 0==C.name),R=qt.values;h(d,bt,!0),h(E,Et,c),h(E,kt,!0),h(E,wt,d),(s?new d(1)[_t]==c:_t in E)||z(E,_t,{get:function(){return c}}),x[c]=d,a(a.G+a.W+a.F*(d!=g),x),a(a.S,c,{BYTES_PER_ELEMENT:e}),a(a.S+a.F*o(function(){g.of.call(d,1)}),c,{from:Ft,of:Lt}),X in E||h(E,X,e),a(a.P,c,Dt),L(c),a(a.P+a.F*Ot,c,{set:zt}),a(a.P+a.F*!T,c,qt),r||E.toString==yt||(E.toString=yt),a(a.P+a.F*o(function(){new d(1).slice()}),c,{slice:Ut}),a(a.P+a.F*(o(function(){return[1,2].toLocaleString()!=new d([1,2]).toLocaleString()})||!o(function(){E.toLocaleString.call([1,2])})),c,{toLocaleString:Bt}),I[c]=T?C:R,r||T||h(E,mt,R)}}else t.exports=function(){}},function(t,e,n){n(230)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(230)("Uint8",1,function(t){return function(e,n,r){return t(this,e,n,r)}},!0)},function(t,e,n){n(230)("Int16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(230)("Uint16",2,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(230)("Int32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(230)("Uint32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(230)("Float32",4,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){n(230)("Float64",8,function(t){return function(e,n,r){return t(this,e,n,r)}})},function(t,e,n){var r=n(9),i=n(22),o=n(13),a=(n(5).Reflect||{}).apply,u=Function.apply;r(r.S+r.F*!n(8)(function(){a(function(){})}),"Reflect",{apply:function(t,e,n){var r=i(t),s=o(n);return a?a(r,e,s):u.call(r,e,s)}})},function(t,e,n){var r=n(9),i=n(46),o=n(22),a=n(13),u=n(14),s=n(8),c=n(77),f=(n(5).Reflect||{}).construct,l=s(function(){function t(){}return!(f(function(){},[],t)instanceof t)}),h=!s(function(){f(function(){})});r(r.S+r.F*(l||h),"Reflect",{construct:function(t,e){o(t),a(e);var n=arguments.length<3?t:o(arguments[2]);if(h&&!l)return f(t,e,n);if(t==n){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var r=[null];return r.push.apply(r,e),new(c.apply(t,r))}var s=n.prototype,p=i(u(s)?s:Object.prototype),d=Function.apply.call(t,p,e);return u(d)?d:p}})},function(t,e,n){var r=n(12),i=n(9),o=n(13),a=n(17);i(i.S+i.F*n(8)(function(){Reflect.defineProperty(r.f({},1,{value:1}),1,{value:2})}),"Reflect",{defineProperty:function(t,e,n){o(t),e=a(e,!0),o(n);try{return r.f(t,e,n),!0}catch(t){return!1}}})},function(t,e,n){var r=n(9),i=n(51).f,o=n(13);r(r.S,"Reflect",{deleteProperty:function(t,e){var n=i(o(t),e);return!(n&&!n.configurable)&&delete t[e]}})},function(t,e,n){"use strict";var r=n(9),i=n(13),o=function(t){this._t=i(t),this._i=0;var e,n=this._k=[];for(e in t)n.push(e)};n(131)(o,"Object",function(){var t,e=this,n=e._k;do if(e._i>=n.length)return{value:void 0,done:!0};while(!((t=n[e._i++])in e._t));return{value:t,done:!1}}),r(r.S,"Reflect",{enumerate:function(t){return new o(t)}})},function(t,e,n){function r(t,e){var n,u,f=arguments.length<3?t:arguments[2];return c(t)===f?t[e]:(n=i.f(t,e))?a(n,"value")?n.value:void 0!==n.get?n.get.call(f):void 0:s(u=o(t))?r(u,e,f):void 0}var i=n(51),o=n(59),a=n(6),u=n(9),s=n(14),c=n(13);u(u.S,"Reflect",{get:r})},function(t,e,n){var r=n(51),i=n(9),o=n(13);i(i.S,"Reflect",{getOwnPropertyDescriptor:function(t,e){return r.f(o(t),e)}})},function(t,e,n){var r=n(9),i=n(59),o=n(13);r(r.S,"Reflect",{getPrototypeOf:function(t){return i(o(t))}})},function(t,e,n){var r=n(9);r(r.S,"Reflect",{has:function(t,e){return e in t}})},function(t,e,n){var r=n(9),i=n(13),o=Object.isExtensible;r(r.S,"Reflect",{isExtensible:function(t){return i(t),!o||o(t)}})},function(t,e,n){var r=n(9);r(r.S,"Reflect",{ownKeys:n(250)})},function(t,e,n){var r=n(50),i=n(43),o=n(13),a=n(5).Reflect;t.exports=a&&a.ownKeys||function(t){var e=r.f(o(t)),n=i.f;return n?e.concat(n(t)):e}},function(t,e,n){var r=n(9),i=n(13),o=Object.preventExtensions;r(r.S,"Reflect",{preventExtensions:function(t){i(t);try{return o&&o(t),!0}catch(t){return!1}}})},function(t,e,n){function r(t,e,n){var s,h,p=arguments.length<4?t:arguments[3],d=o.f(f(t),e);if(!d){if(l(h=a(t)))return r(h,e,n,p);d=c(0)}return u(d,"value")?!(d.writable===!1||!l(p))&&(s=o.f(p,e)||c(0),s.value=n,i.f(p,e,s),!0):void 0!==d.set&&(d.set.call(p,n),!0)}var i=n(12),o=n(51),a=n(59),u=n(6),s=n(9),c=n(18),f=n(13),l=n(14);s(s.S,"Reflect",{set:r})},function(t,e,n){var r=n(9),i=n(73);i&&r(r.S,"Reflect",{setPrototypeOf:function(t,e){i.check(t,e);try{return i.set(t,e),!0}catch(t){return!1}}})},function(t,e,n){"use strict";var r=n(9),i=n(37)(!0);r(r.P,"Array",{includes:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),n(188)("includes")},function(t,e,n){"use strict";var r=n(9),i=n(256),o=n(58),a=n(38),u=n(22),s=n(175);r(r.P,"Array",{flatMap:function(t){var e,n,r=o(this);return u(t),e=a(r.length),n=s(r,0),i(n,r,r,e,0,1,t,arguments[1]),n}}),n(188)("flatMap")},function(t,e,n){"use strict";function r(t,e,n,c,f,l,h,p){for(var d,v,y=f,g=0,m=!!h&&u(h,p,3);g<c;){if(g in n){if(d=m?m(n[g],g,e):n[g],v=!1,o(d)&&(v=d[s],v=void 0!==v?!!v:i(d)),v&&l>0)y=r(t,e,d,a(d.length),y,l-1)-1;else{if(y>=9007199254740991)throw TypeError();t[y]=d}y++}g++}return y}var i=n(45),o=n(14),a=n(38),u=n(21),s=n(26)("isConcatSpreadable");t.exports=r},function(t,e,n){"use strict";var r=n(9),i=n(256),o=n(58),a=n(38),u=n(39),s=n(175);r(r.P,"Array",{flatten:function(){var t=arguments[0],e=o(this),n=a(e.length),r=s(e,0);return i(r,e,e,n,0,void 0===t?1:u(t)),r}}),n(188)("flatten")},function(t,e,n){"use strict";var r=n(9),i=n(128)(!0);r(r.P,"String",{at:function(t){return i(this,t)}})},function(t,e,n){"use strict";var r=n(9),i=n(260);r(r.P,"String",{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!0)}})},function(t,e,n){var r=n(38),i=n(91),o=n(36);t.exports=function(t,e,n,a){var u=String(o(t)),s=u.length,c=void 0===n?" ":String(n),f=r(e);if(f<=s||""==c)return u;var l=f-s,h=i.call(c,Math.ceil(l/c.length));return h.length>l&&(h=h.slice(0,l)),a?h+u:u+h}},function(t,e,n){"use strict";var r=n(9),i=n(260);r(r.P,"String",{padEnd:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0,!1)}})},function(t,e,n){"use strict";n(83)("trimLeft",function(t){return function(){return t(this,1)}},"trimStart")},function(t,e,n){"use strict";n(83)("trimRight",function(t){return function(){return t(this,2)}},"trimEnd")},function(t,e,n){"use strict";var r=n(9),i=n(36),o=n(38),a=n(135),u=n(198),s=RegExp.prototype,c=function(t,e){this._r=t,this._s=e};n(131)(c,"RegExp String",function(){var t=this._r.exec(this._s);return{value:t,done:null===t}}),r(r.P,"String",{matchAll:function(t){if(i(this),!a(t))throw TypeError(t+" is not a regexp!");var e=String(this),n="flags"in s?String(t.flags):u.call(t),r=new RegExp(t.source,~n.indexOf("g")?n:"g"+n);return r.lastIndex=o(t.lastIndex),new c(r,e)}})},function(t,e,n){n(28)("asyncIterator")},function(t,e,n){n(28)("observable")},function(t,e,n){var r=n(9),i=n(250),o=n(33),a=n(51),u=n(165);r(r.S,"Object",{getOwnPropertyDescriptors:function(t){for(var e,n,r=o(t),s=a.f,c=i(r),f={},l=0;c.length>l;)n=s(r,e=c[l++]),void 0!==n&&u(f,e,n);return f}})},function(t,e,n){var r=n(9),i=n(269)(!1);r(r.S,"Object",{values:function(t){return i(t)}})},function(t,e,n){var r=n(31),i=n(33),o=n(44).f;t.exports=function(t){return function(e){for(var n,a=i(e),u=r(a),s=u.length,c=0,f=[];s>c;)o.call(a,n=u[c++])&&f.push(t?[n,a[n]]:a[n]);return f}}},function(t,e,n){var r=n(9),i=n(269)(!0);r(r.S,"Object",{entries:function(t){return i(t)}})},function(t,e,n){"use strict";var r=n(9),i=n(58),o=n(22),a=n(12);n(7)&&r(r.P+n(272),"Object",{__defineGetter__:function(t,e){a.f(i(this),t,{get:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";t.exports=n(29)||!n(8)(function(){var t=Math.random();__defineSetter__.call(null,t,function(){}),delete n(5)[t]})},function(t,e,n){"use strict";var r=n(9),i=n(58),o=n(22),a=n(12);n(7)&&r(r.P+n(272),"Object",{__defineSetter__:function(t,e){a.f(i(this),t,{set:o(e),enumerable:!0,configurable:!0})}})},function(t,e,n){"use strict";var r=n(9),i=n(58),o=n(17),a=n(59),u=n(51).f;n(7)&&r(r.P+n(272),"Object",{__lookupGetter__:function(t){var e,n=i(this),r=o(t,!0);do if(e=u(n,r))return e.get;while(n=a(n))}})},function(t,e,n){"use strict";var r=n(9),i=n(58),o=n(17),a=n(59),u=n(51).f;n(7)&&r(r.P+n(272),"Object",{__lookupSetter__:function(t){var e,n=i(this),r=o(t,!0);do if(e=u(n,r))return e.set;while(n=a(n))}})},function(t,e,n){var r=n(9);r(r.P+r.R,"Map",{toJSON:n(277)("Map")})},function(t,e,n){var r=n(75),i=n(278);t.exports=function(t){return function(){if(r(this)!=t)throw TypeError(t+"#toJSON isn't generic");return i(this)}}},function(t,e,n){var r=n(208);t.exports=function(t,e){var n=[];return r(t,!1,n.push,n,e),n}},function(t,e,n){var r=n(9);r(r.P+r.R,"Set",{toJSON:n(277)("Set")})},function(t,e,n){n(281)("Map")},function(t,e,n){"use strict";var r=n(9);t.exports=function(t){r(r.S,t,{of:function(){for(var t=arguments.length,e=Array(t);t--;)e[t]=arguments[t];return new this(e)}})}},function(t,e,n){n(281)("Set")},function(t,e,n){n(281)("WeakMap")},function(t,e,n){n(281)("WeakSet")},function(t,e,n){n(286)("Map")},function(t,e,n){"use strict";var r=n(9),i=n(22),o=n(21),a=n(208);t.exports=function(t){r(r.S,t,{from:function(t){var e,n,r,u,s=arguments[1];return i(this),e=void 0!==s,e&&i(s),void 0==t?new this:(n=[],e?(r=0,u=o(s,arguments[2],2),a(t,!1,function(t){n.push(u(t,r++))})):a(t,!1,n.push,n),new this(n))}})}},function(t,e,n){n(286)("Set")},function(t,e,n){n(286)("WeakMap")},function(t,e,n){n(286)("WeakSet")},function(t,e,n){var r=n(9);r(r.G,{global:n(5)})},function(t,e,n){var r=n(9);r(r.S,"System",{global:n(5)})},function(t,e,n){var r=n(9),i=n(35);r(r.S,"Error",{isError:function(t){return"Error"===i(t)}})},function(t,e,n){var r=n(9);r(r.S,"Math",{clamp:function(t,e,n){return Math.min(n,Math.max(e,t))}})},function(t,e,n){var r=n(9);r(r.S,"Math",{DEG_PER_RAD:Math.PI/180})},function(t,e,n){var r=n(9),i=180/Math.PI;r(r.S,"Math",{degrees:function(t){return t*i}})},function(t,e,n){var r=n(9),i=n(297),o=n(114);r(r.S,"Math",{fscale:function(t,e,n,r,a){return o(i(t,e,n,r,a))}})},function(t,e){t.exports=Math.scale||function(t,e,n,r,i){return 0===arguments.length||t!=t||e!=e||n!=n||r!=r||i!=i?NaN:t===1/0||t===-(1/0)?t:(t-e)*(i-r)/(n-e)+r}},function(t,e,n){var r=n(9);r(r.S,"Math",{iaddh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o+(r>>>0)+((i&a|(i|a)&~(i+a>>>0))>>>31)|0}})},function(t,e,n){var r=n(9);r(r.S,"Math",{isubh:function(t,e,n,r){var i=t>>>0,o=e>>>0,a=n>>>0;return o-(r>>>0)-((~i&a|~(i^a)&i-a>>>0)>>>31)|0}})},function(t,e,n){var r=n(9);r(r.S,"Math",{imulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,u=r>>16,s=i>>16,c=(u*a>>>0)+(o*a>>>16);return u*s+(c>>16)+((o*s>>>0)+(c&n)>>16)}})},function(t,e,n){var r=n(9);r(r.S,"Math",{RAD_PER_DEG:180/Math.PI})},function(t,e,n){var r=n(9),i=Math.PI/180;r(r.S,"Math",{radians:function(t){return t*i}})},function(t,e,n){var r=n(9);r(r.S,"Math",{scale:n(297)})},function(t,e,n){var r=n(9);r(r.S,"Math",{umulh:function(t,e){var n=65535,r=+t,i=+e,o=r&n,a=i&n,u=r>>>16,s=i>>>16,c=(u*a>>>0)+(o*a>>>16);return u*s+(c>>>16)+((o*s>>>0)+(c&n)>>>16)}})},function(t,e,n){var r=n(9);r(r.S,"Math",{signbit:function(t){return(t=+t)!=t?t:0==t?1/t==1/0:t>0}})},function(t,e,n){"use strict";var r=n(9),i=n(10),o=n(5),a=n(209),u=n(214);r(r.P+r.R,"Promise",{finally:function(t){var e=a(this,i.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return u(e,t()).then(function(){return n})}:t,n?function(n){return u(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var r=n(9),i=n(212),o=n(213);r(r.S,"Promise",{try:function(t){var e=i.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){var r=n(309),i=n(13),o=r.key,a=r.set;r.exp({defineMetadata:function(t,e,n,r){a(t,e,i(n),o(r))}})},function(t,e,n){var r=n(216),i=n(9),o=n(24)("metadata"),a=o.store||(o.store=new(n(221))),u=function(t,e,n){var i=a.get(t);if(!i){if(!n)return;a.set(t,i=new r)}var o=i.get(e);if(!o){if(!n)return;i.set(e,o=new r)}return o},s=function(t,e,n){var r=u(e,n,!1);return void 0!==r&&r.has(t)},c=function(t,e,n){var r=u(e,n,!1);return void 0===r?void 0:r.get(t)},f=function(t,e,n,r){u(n,r,!0).set(t,e)},l=function(t,e){var n=u(t,e,!1),r=[];return n&&n.forEach(function(t,e){r.push(e)}),r},h=function(t){return void 0===t||"symbol"==typeof t?t:String(t)},p=function(t){i(i.S,"Reflect",t)};t.exports={store:a,map:u,has:s,get:c,set:f,keys:l,key:h,exp:p}},function(t,e,n){var r=n(309),i=n(13),o=r.key,a=r.map,u=r.store;r.exp({deleteMetadata:function(t,e){var n=arguments.length<3?void 0:o(arguments[2]),r=a(i(e),n,!1);if(void 0===r||!r.delete(t))return!1;if(r.size)return!0;var s=u.get(e);return s.delete(n),!!s.size||u.delete(e)}})},function(t,e,n){var r=n(309),i=n(13),o=n(59),a=r.has,u=r.get,s=r.key,c=function(t,e,n){var r=a(t,e,n);if(r)return u(t,e,n);var i=o(e);return null!==i?c(t,i,n):void 0};r.exp({getMetadata:function(t,e){return c(t,i(e),arguments.length<3?void 0:s(arguments[2]))}})},function(t,e,n){var r=n(220),i=n(278),o=n(309),a=n(13),u=n(59),s=o.keys,c=o.key,f=function(t,e){var n=s(t,e),o=u(t);if(null===o)return n;var a=f(o,e);return a.length?n.length?i(new r(n.concat(a))):a:n};o.exp({getMetadataKeys:function(t){return f(a(t),arguments.length<2?void 0:c(arguments[1]))}})},function(t,e,n){var r=n(309),i=n(13),o=r.get,a=r.key;r.exp({getOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(309),i=n(13),o=r.keys,a=r.key;r.exp({getOwnMetadataKeys:function(t){return o(i(t),arguments.length<2?void 0:a(arguments[1]))}})},function(t,e,n){var r=n(309),i=n(13),o=n(59),a=r.has,u=r.key,s=function(t,e,n){var r=a(t,e,n);if(r)return!0;var i=o(e);return null!==i&&s(t,i,n)};r.exp({hasMetadata:function(t,e){return s(t,i(e),arguments.length<3?void 0:u(arguments[2]))}})},function(t,e,n){var r=n(309),i=n(13),o=r.has,a=r.key;r.exp({hasOwnMetadata:function(t,e){return o(t,i(e),arguments.length<3?void 0:a(arguments[2]))}})},function(t,e,n){var r=n(309),i=n(13),o=n(22),a=r.key,u=r.set;r.exp({metadata:function(t,e){return function(n,r){u(t,e,(void 0!==r?i:o)(n),a(r))}}})},function(t,e,n){var r=n(9),i=n(211)(),o=n(5).process,a="process"==n(35)(o);r(r.G,{asap:function(t){var e=a&&o.domain;i(e?e.bind(t):t)}})},function(t,e,n){"use strict";var r=n(9),i=n(5),o=n(10),a=n(211)(),u=n(26)("observable"),s=n(22),c=n(13),f=n(207),l=n(215),h=n(11),p=n(208),d=p.RETURN,v=function(t){return null==t?void 0:s(t)},y=function(t){var e=t._c;e&&(t._c=void 0,e())},g=function(t){return void 0===t._o},m=function(t){g(t)||(t._o=void 0,y(t))},_=function(t,e){c(t),this._c=void 0,this._o=t,t=new b(this);try{var n=e(t),r=n;null!=n&&("function"==typeof n.unsubscribe?n=function(){r.unsubscribe()}:s(n),this._c=n)}catch(e){return void t.error(e)}g(this)&&y(this)};_.prototype=l({},{unsubscribe:function(){m(this)}});var b=function(t){this._s=t};b.prototype=l({},{next:function(t){var e=this._s;if(!g(e)){var n=e._o;try{var r=v(n.next);if(r)return r.call(n,t)}catch(t){try{m(e)}finally{throw t}}}},error:function(t){var e=this._s;if(g(e))throw t;var n=e._o;e._o=void 0;try{var r=v(n.error);if(!r)throw t;t=r.call(n,t)}catch(t){try{y(e)}finally{throw t}}return y(e),t},complete:function(t){var e=this._s;if(!g(e)){var n=e._o;e._o=void 0;try{var r=v(n.complete);t=r?r.call(n,t):void 0}catch(t){try{y(e)}finally{throw t}}return y(e),t}}});var w=function(t){f(this,w,"Observable","_f")._f=s(t)};l(w.prototype,{subscribe:function(t){return new _(t,this._f)},forEach:function(t){var e=this;return new(o.Promise||i.Promise)(function(n,r){s(t);var i=e.subscribe({next:function(e){try{return t(e)}catch(t){r(t),i.unsubscribe()}},error:r,complete:n})})}}),l(w,{from:function(t){var e="function"==typeof this?this:w,n=v(c(t)[u]);if(n){var r=c(n.call(t));return r.constructor===e?r:new e(function(t){return r.subscribe(t)})}return new e(function(e){var n=!1;return a(function(){if(!n){try{if(p(t,!1,function(t){if(e.next(t),n)return d})===d)return}catch(t){if(n)throw t;return void e.error(t)}e.complete()}}),function(){n=!0}})},of:function(){for(var t=0,e=arguments.length,n=Array(e);t<e;)n[t]=arguments[t++];return new("function"==typeof this?this:w)(function(t){var e=!1;return a(function(){if(!e){for(var r=0;r<n.length;++r)if(t.next(n[r]),e)return;t.complete()}}),function(){e=!0}})}}),h(w.prototype,u,function(){return this}),r(r.G,{Observable:w}),n(194)("Observable")},function(t,e,n){var r=n(5),i=n(9),o=r.navigator,a=[].slice,u=!!o&&/MSIE .\./.test(o.userAgent),s=function(t){return function(e,n){var r=arguments.length>2,i=!!r&&a.call(arguments,2);return t(r?function(){("function"==typeof e?e:Function(e)).apply(this,i)}:e,n)}};i(i.G+i.B+i.F*u,{setTimeout:s(r.setTimeout),setInterval:s(r.setInterval)})},function(t,e,n){var r=n(9),i=n(210);r(r.G+r.B,{setImmediate:i.set,clearImmediate:i.clear})},function(t,e,n){for(var r=n(195),i=n(31),o=n(19),a=n(5),u=n(11),s=n(130),c=n(26),f=c("iterator"),l=c("toStringTag"),h=s.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},d=i(p),v=0;v<d.length;v++){var y,g=d[v],m=p[g],_=a[g],b=_&&_.prototype;if(b&&(b[f]||u(b,f,h),b[l]||u(b,l,g),s[g]=h,m))for(y in r)b[y]||o(b,y,r[y],!0)}},function(t,e){(function(e){!function(e){"use strict";function n(t,e,n,r){var o=e&&e.prototype instanceof i?e:i,a=Object.create(o.prototype),u=new p(r||[]);return a._invoke=c(t,n,u),a}function r(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}function i(){}function o(){}function a(){}function u(t){["next","throw","return"].forEach(function(e){t[e]=function(t){return this._invoke(e,t)}})}function s(t){function n(e,i,o,a){var u=r(t[e],t,i);if("throw"!==u.type){var s=u.arg,c=s.value;return c&&"object"==typeof c&&m.call(c,"__await")?Promise.resolve(c.__await).then(function(t){n("next",t,o,a)},function(t){n("throw",t,o,a)}):Promise.resolve(c).then(function(t){s.value=t,o(s)},a)}a(u.arg)}function i(t,e){function r(){return new Promise(function(r,i){n(t,e,r,i)})}return o=o?o.then(r,r):r()}"object"==typeof e.process&&e.process.domain&&(n=e.process.domain.bind(n));var o;this._invoke=i}function c(t,e,n){var i=P;return function(o,a){if(i===M)throw new Error("Generator is already running");if(i===O){if("throw"===o)throw a;return v()}for(n.method=o,n.arg=a;;){var u=n.delegate;if(u){var s=f(u,n);if(s){if(s===A)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===P)throw i=O,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=M;var c=r(t,e,n);if("normal"===c.type){if(i=n.done?O:S,c.arg===A)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=O,n.method="throw",n.arg=c.arg)}}}function f(t,e){var n=t.iterator[e.method];if(n===y){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=y,f(t,e),"throw"===e.method))return A;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return A}var i=r(n,t.iterator,e.arg);if("throw"===i.type)return e.method="throw",e.arg=i.arg,e.delegate=null,A;var o=i.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=y),e.delegate=null,A):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,A)}function l(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function h(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function p(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(l,this),this.reset(!0)}function d(t){if(t){var e=t[b];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,r=function e(){for(;++n<t.length;)if(m.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=y,e.done=!0,e};return r.next=r}}return{next:v}}function v(){return{value:y,done:!0}}var y,g=Object.prototype,m=g.hasOwnProperty,_="function"==typeof Symbol?Symbol:{},b=_.iterator||"@@iterator",w=_.asyncIterator||"@@asyncIterator",x=_.toStringTag||"@@toStringTag",E="object"==typeof t,k=e.regeneratorRuntime;if(k)return void(E&&(t.exports=k));k=e.regeneratorRuntime=E?t.exports:{},k.wrap=n;var P="suspendedStart",S="suspendedYield",M="executing",O="completed",A={},C={};C[b]=function(){return this};var T=Object.getPrototypeOf,R=T&&T(T(d([])));R&&R!==g&&m.call(R,b)&&(C=R);var j=a.prototype=i.prototype=Object.create(C);o.prototype=j.constructor=a,a.constructor=o,a[x]=o.displayName="GeneratorFunction",k.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===o||"GeneratorFunction"===(e.displayName||e.name))},k.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,a):(t.__proto__=a,x in t||(t[x]="GeneratorFunction")),t.prototype=Object.create(j),t},k.awrap=function(t){return{__await:t}},u(s.prototype),s.prototype[w]=function(){return this},k.AsyncIterator=s,k.async=function(t,e,r,i){var o=new s(n(t,e,r,i));return k.isGeneratorFunction(e)?o:o.next().then(function(t){return t.done?t.value:o.next()})},u(j),j[x]="Generator",j[b]=function(){return this},j.toString=function(){return"[object Generator]"},k.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},k.values=d,p.prototype={constructor:p,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=y,this.done=!1,this.delegate=null,this.method="next",this.arg=y,this.tryEntries.forEach(h),!t)for(var e in this)"t"===e.charAt(0)&&m.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=y)},stop:function(){this.done=!0;var t=this.tryEntries[0],e=t.completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){function e(e,r){return o.type="throw",o.arg=t,n.next=e,r&&(n.method="next",n.arg=y),!!r}if(this.done)throw t;for(var n=this,r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r],o=i.completion;if("root"===i.tryLoc)return e("end");if(i.tryLoc<=this.prev){var a=m.call(i,"catchLoc"),u=m.call(i,"finallyLoc");if(a&&u){if(this.prev<i.catchLoc)return e(i.catchLoc,!0);if(this.prev<i.finallyLoc)return e(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return e(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return e(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&m.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=t,o.arg=e,i?(this.method="next",this.next=i.finallyLoc,A):this.complete(o)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),A},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),h(n),A}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var i=r.arg;h(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:d(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=y),A}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(e,function(){return this}())},function(t,e,n){n(325),t.exports=n(10).RegExp.escape},function(t,e,n){var r=n(9),i=n(326)(/[\\^$*+?.()|[\]{}]/g,"\\$&");r(r.S,"RegExp",{escape:function(t){return i(t)}})},function(t,e){t.exports=function(t,e){var n=e===Object(e)?function(t){return e[t]}:e;return function(e){return String(e).replace(t,n)}}},function(t,e,n){(function(e){t.exports=e.Plasio=n(328)}).call(e,function(){return this}())},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}var i=n(329),o=n(388),a=n(413),u=n(390),s=n(393),c=n(395),f=n(394),l=n(397),h=n(400),p=n(392),d=n(382),v=n(370),y=r(v);t.exports={PointCloudViewer:o.PointCloudViewer,FrustumLODNodePolicy:i.FrustumLODNodePolicy,ProfileLoaderPolicy:a.ProfileLoaderPolicy,MultiPolicyContainer:i.MultiPolicyContainer,Device:d.Device,Loaders:{GreyhoundPipelineLoader:u.GreyhoundPipelineLoader,TransformLoader:s.TransformLoader},Cameras:{OrbitalCamera:c.OrbitalCamera},ModeManager:f.ModeManager,GeoTransform:p.GeoTransform,Modes:{PointPicker:l.PointPicker},Features:{Profiler:h.Profiler},Util:y}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t){return function(){var e=t.apply(this,arguments);return new l.default(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):l.default.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.MultiPolicyContainer=e.FrustumLODNodePolicy=void 0;var s=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=n(330),l=r(f),h=n(369),p=n(382),d=n(387).EventEmitter,v=n(371).vec3,y=n(371).vec4,g=n(371).mat4,m=n(372),_=n(370),b=_.TriggeredDispatch,w=function(){function t(e,n,r){u(this,t),this.loader=e,this.geoTransform=n,this.baseDepth=r,this.nodesCache={};var i=n.coordinateSpaceCenter("geo"),o=s(i,1),a=o[0];this.rangeX=a}return c(t,[{key:"_store",value:function(t,e){this.nodesCache[t]=e}},{key:"_isPrefetchLevel",value:function(t){var e=P.TREE_PREFETCH_STEP;return t.depthEnd===this.baseDepth||(t.depthEnd-this.baseDepth)%e===0}},{key:"_loadInfo",value:function(e,n){var r=this,i=e.subdivide(),o={sed:0,swd:1,seu:2,swu:3,ned:4,nwd:5,neu:6,nwu:7};if(1===i.length){var a=m.reduce(n,function(t,e){return t+(null==e.n?0:e.n)},0),u=t._key(i[0]);this._store(u,a)}else m.forEach(n,function(e,n){if("n"!==n){var a=o[n],u=i[a],s=t._key(u);r._store(s,e.n),m.size(e)>1&&r._loadInfo(u,e)}})}},{key:"_makeURL",value:function(t){var e=t.bounds(),n=this.geoTransform.transform(e,"render","geo");return _.joinPath(this.loader.server,"resource",this.loader.resource,"hierarchy")+"?bounds="+encodeURIComponent(JSON.stringify(n))+"&depthBegin="+t.depthEnd+"&depthEnd="+(t.depthEnd+1)}},{key:"_makeViewURL",value:function(t){var e=t.bounds(),n=this.geoTransform.transform(e,"render","geo");return _.joinPath(this.loader.server,"http",this.loader.resource,"hierarchy")+"?bounds="+encodeURIComponent(JSON.stringify(n))+"&depthBegin="+t.depthEnd+"&depthEnd="+(t.depthEnd+1)}},{key:"nodeInfo",value:function(){function e(t){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function e(n){var r,i,o,a,u,s;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t._key(n),i=this.nodesCache[r],o=P.TREE_PREFETCH_STEP,null!=i){e.next=18;break}if(!(this._isPrefetchLevel(n)&&n.depthEnd<=n.stopSplitDepth)){e.next=15;break}return a=n.bounds(),e.next=8,this.loader.loadHierarchyInfo(a,this.geoTransform,n.depthEnd,n.depthEnd+o);case 8:return u=e.sent,s=u||{n:0},this._store(r,s.n),this._loadInfo(n,s),e.abrupt("return",s.n);case 15:return e.abrupt("return",0);case 16:e.next=19;break;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"_key",value:function(t){var e=t.bounds(),n=e.map(function(t){return t.toFixed(3)}).join(":")+t.depthBegin+":"+t.depthEnd;return n}}]),t}(),x=function(){function t(){u(this,t),this.frustumMat=g.create(),this.planes=[y.create(),y.create(),y.create(),y.create(),y.create(),y.create()]}return c(t,[{key:"update",value:function(t,e){g.multiply(this.frustumMat,t,e);var n=this.frustumMat,r=n[0],i=n[1],o=n[2],a=n[3],u=n[4],s=n[5],c=n[6],f=n[7],l=n[8],h=n[9],p=n[10],d=n[11],m=n[12],_=n[13],b=n[14],w=n[15];y.set(this.planes[0],a-r,f-u,d-l,w-m),y.set(this.planes[1],a+r,f+u,d+l,w+m),y.set(this.planes[2],a+i,f+s,d+h,w+_),y.set(this.planes[3],a-i,f-s,d-h,w-_),y.set(this.planes[4],a-o,f-c,d-p,w-b),y.set(this.planes[5],a+o,f+c,d+p,w+b);var x=function(t){var e=v.length(t);e>.001&&(t[0]/=e,t[1]/=e,t[2]/=e,t[3]/=e)};return this.planes.forEach(x),this}}]),t}(),E=function(){function t(e,n,r,i,o,a,s,c,f,l,h,p){u(this,t),this.x=e,this.y=n,this.w=i,this.h=o,this.z=r,this.d=a,this.id=s||"R",this.depthBegin=c,this.depthEnd=f,this.parent=l,this.stopSplitDepth=h,this.hardStopDepth=p,this.radius=Math.sqrt(i*i+a*a+o*o)/2,this.position=[e+i/2,n+o/2,r+a/2]}return c(t,null,[{key:"fromBounds",value:function(e,n,r,i,o,a,u){return new t(e[0],e[1],e[2],e[3]-e[0],e[4]-e[1],e[5]-e[2],n,r,i,o,a,u)}}]),c(t,[{key:"_split",value:function(){for(var e=this.x,n=this.y,r=this.z,i=this.w,o=this.h,a=this.d,u=[],s=0===this.depthBegin?this.depthEnd:this.depthBegin+1,c=s+1,f=0;f<8;f++){var l=1&f,h=f>>1&1,p=f>>2&1;u.push(new t(e+(l?i/2:0),n+(h?o/2:0),r+(p?a/2:0),i/2,o/2,a/2,this.id+""+f,s,c,this,this.stopSplitDepth,this.hardStopDepth))}return u}},{key:"bounds",value:function(t){var e=this,n=t?t:[0,0,0],r=e.x+n[0],i=e.y+n[1],o=e.z+n[2];return[r,i,o,r+e.w,i+e.h,o+e.d]}},{key:"subdivide",value:function(){var e=this.x,n=this.y,r=this.z,i=this.w,o=this.h,a=this.d,u=this.depthBegin+1,s=[];
return u<this.stopSplitDepth?s=this._split():u===this.stopSplitDepth&&(s=[new t(e,n,r,i,o,a,this.id+"0",this.depthBegin+1,this.hardStopDepth,this,this.stopSplitDepth,this.hardStopDepth)]),s}},{key:"intersects",value:function(t,e){e=e||[0,0,0];var n=this.x-e[0],r=this.y-e[1],i=this.z-e[2],o=this.p1||v.create(),a=this.p2||v.create();this.p1=o,this.p2=a;for(var u=[n,r,i,1],s=[n+this.w,r+this.h,i+this.d,1],c=t.planes,f=0,l=c.length;f<l;f++){var h=c[f],p=h[0],d=h[1],y=h[2];o[0]=p>0?u[0]:s[0],a[0]=p>0?s[0]:u[0],o[1]=d>0?u[1]:s[1],a[1]=d>0?s[1]:u[1],o[2]=y>0?u[2]:s[2],a[2]=y>0?s[2]:u[2];var g=v.dot(h,o)+h[3],m=v.dot(h,a)+h[3];if(g<0&&m<0)return!1}return!0}}]),t}(),k=function(){function t(e,n){u(this,t),this.nodesInScene={},this.treeInfoCache=e,this.renderSpaceTreeOffset=n,this.activeParams=null,this.revision=0,this._nodePosition=v.create()}return c(t,[{key:"_rejectNode",value:function(t,e){}},{key:"_acceptNode",value:function(t,e,n,r){if(this.nodesInScene[t.id]){var i=this.nodesInScene[t.id].revision;i<n&&(this.nodesInScene[t.id].revision=n)}else r(t,e),this.nodesInScene[t.id]={node:t,revision:n}}},{key:"_doCleanup",value:function(t,e){for(var n=Object.keys(this.nodesInScene),r=0,i=n.length;r<i;r++){var o=n[r],a=this.nodesInScene[o];a.revision<t&&(delete this.nodesInScene[o],e(a.node))}}},{key:"_nodeWeight",value:function(t,e){var n=v.distance(e,v.add(this._nodePosition,t.position,this.renderSpaceTreeOffset));return t.id.length/n}},{key:"_doWalk",value:function(){function t(t,n){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,u,s,c,f,h,p,d,y,g,m=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,l.default.delay(0);case 2:if(this.activeParams&&this.activeParams.revision===n){t.next=5;break}return console.warn("early abort"),t.abrupt("return",n);case 5:if(r=this.activeParams,i=r.frustum,o=r.eye,a=r.fov,u=r.clientHeight,s=r.rejectAtScreenSize,c=r.fRemove,f=r.fAdd,h=e.intersects(i,this.renderSpaceTreeOffset)){t.next=9;break}return t.abrupt("return",this._rejectNode(e,c));case 9:if(p=v.distance(o,v.subtract(this._nodePosition,e.position,this.renderSpaceTreeOffset)),d=P._screenSizeForBox(e,a,p,u),!(d<s)){t.next=13;break}return t.abrupt("return",this._rejectNode(e,c));case 13:return t.next=15,this.treeInfoCache.nodeInfo(e);case 15:if(y=t.sent,0!=y){t.next=18;break}return t.abrupt("return",this._rejectNode(e,c));case 18:if(this._acceptNode(e,this._nodeWeight(e,o),n,f),g=e.subdivide(),1!=g.length){t.next=24;break}this._acceptNode(g[0],this._nodeWeight(g[0],o),n,f),t.next=27;break;case 24:if(!(g.length>0)){t.next=27;break}return t.next=27,l.default.all(g.map(function(t){return m._doWalk(t,n)}));case 27:return t.abrupt("return",n);case 28:case"end":return t.stop()}},t,this)}));return t}()},{key:"walk",value:function(){function t(t,n,r,i,o,a,u,s,c){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(e,n,r,i,o,a,u,s,c){var f,l;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.activeParams&&console.warn("performing","Walk in progress"),f=this.revision,this.revision++,this.activeParams={revision:f,frustum:n,eye:r,target:i,clientHeight:a,rejectAtScreenSize:u,fov:o,fAdd:s,fRemove:c},t.next=6,this._doWalk(e,f);case 6:l=t.sent,l===this.revision-1&&(this._doCleanup(f,c),f===this.activeParams.revision&&(this.activeParams=null));case 8:case"end":return t.stop()}},t,this)}));return t}()},{key:"clearAllNodes",value:function(t){var e=this.nodesInScene;this.nodesInScene=[],Object.values(e).forEach(function(e){t(e.node)})}}]),t}(),P=e.FrustumLODNodePolicy=function(t){function e(t,n,r,o){u(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(a.namespace=t,a.renderer=r,a.loaders=n,a.geoTransform=_.checkParam(o,"geoTransform"),a.geoOrigin=a.geoTransform.coordinateSpaceCenter("geo"),a.renderBounds=a.geoTransform.coordinateSpaceBounds("render"),a.stopSplitDepth=_.checkParam(o,"stopSplitDepth"),a.hardStopDepth=_.checkParam(o,"hardStopDepth"),a.baseDepth=o.baseDepth||8,a.renderTreeOffset=o.offset||[0,0,0],a.pointLoader=n.find(function(t){return"point-buffer"===t.constructor.provides}),!a.pointLoader)throw new Error("No point loader specified.  A point loader needs to be available in the list of loaders");return a.treeInfoCache=new w(a.pointLoader,a.geoTransform,a.baseDepth,a.geoOrigin),a.treeWalker=new k(a.treeInfoCache,a.renderTreeOffset),a.frustum=new x,a.loaders.forEach(function(t){var e={provides:t.constructor.provides,key:a.namespace+"/"+t.constructor.key,load:t.constructor.load};console.log("policy:",a.namespace,"adding loader:",e),a.renderer.addLoader(e)}),console.log("FrustumLODNodePolicy initialized with render bounds:",a.renderBounds,"normalize?","always"),a}return o(e,t),c(e,[{key:"stop",value:function(){this.renderer.removePropertyListener(this.propListener),this.renderer.removePropertyListener(this.cameraPropsListener)}},{key:"hookedReload",value:function(t){this.abortLoad&&this.abortLoad(),this.clearAll&&this.clearAll(),h.PointBufferCache.getInstance().flush(),this.nodes=[],t&&t.call(null),this.simulateVal&&this.simulateVal()}},{key:"_makeId",value:function(t){var e=this,n=t.bounds(),r={renderSpaceBounds:n,geoTransform:this.geoTransform,depthBegin:t.depthBegin,depthEnd:t.depthEnd,treePath:t.id},i={};return this.loaders.forEach(function(t){i[e.namespace+"/"+t.constructor.key]=t.queryFor(r)}),i}},{key:"_nodeGeoAndWorldBounds",value:function(t){return t.geoAndWorldBounds(this.geoTreeOrigin)}},{key:"_loadNode",value:function(){function t(t){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(e){var n,r,i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.bounds(),r={renderSpaceBounds:n,geoTransform:this.geoTransform,depthBegin:e.depthBegin,depthEnd:e.depthEnd,treePath:e.id},i=this.pointLoader.queryFor(r),t.next=5,this.pointLoader.constructor.load(i,{weight:1});case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"_loadRootNode",value:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,u,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e=s(this.renderBounds,6),n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],c=new E(n,r,i,o-n,a-r,u-i,"R",0,this.baseDepth,null,this.stopSplitDepth,this.hardStopDepth),t.next=4,this._loadNode(c);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}},t,this)}));return t}()},{key:"start",value:function(){function t(){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(){var n,r,i,o=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.geoBounds,setTimeout(function(){return o.emit("bbox",n)}),r=this.baseDepth,this.nodes=[],t.next=6,this._loadRootNode();case 6:i=t.sent,this.updateTrigger=new b(200,function(t){e.pauseView||o._updateView(t)}),this.simulateVal=function(){o.updateTrigger.simulateVal()},this.clearAll=function(){o.treeWalker.clearAllNodes(function(t){return o.renderer.removePointBuffer(o._makeId(t))})},this.abortLoad=function(){},this.propListener=this.renderer.addPropertyListener(["view"],function(t){return o.updateTrigger.val(t,i)});case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"_updateView",value:function(){function t(t,e){return n.apply(this,arguments)}var n=a(regeneratorRuntime.mark(function t(n,r){var i,o,a,u,c,f,l,d,v,y,_,b,w,x,k,P=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n){t.next=2;break}return t.abrupt("return");case 2:if(i=n.eye,o=n.target,a=n.cameras,null!==i&&null!==o&&null!=a){t.next=7;break}return t.abrupt("return");case 7:if(u=m.find(a,"active")){t.next=10;break}return t.abrupt("return");case 10:if("perspective"===u.type){t.next=13;break}return console.log("FrustumLODNodePolicy only supports perspective cameras, active camera is not perspective."),t.abrupt("return");case 13:c=u.near||1,f=u.far||1e4,l=u.fov||70,d=e._figureAspect(),v=s(d,3),y=v[0],_=v[1],b=v[2],w=E.fromBounds(this.renderBounds,"R",0,this.baseDepth,null,this.stopSplitDepth,this.hardStopDepth),x=g.perspective(g.create(),l*Math.PI/180,b,c,f),k=g.lookAt(g.create(),i,o,[0,1,0]),this.frustum.update(x,k),this.treeWalker.walk(w,this.frustum,i,o,l,_,_*p.Device.caps().nodeRejectionRatio,function(t,e){return P.renderer.addPointBuffer(P._makeId(t),{weight:e})},function(t){P.renderer.removePointBuffer(P._makeId(t)),h.PointBufferCache.getInstance().remove(t.treePath)}),this.emit("view-changed",{eye:i,target:o});case 23:case"end":return t.stop()}},t,this)}));return t}()}],[{key:"_screenSizeForBox",value:function(t,e,n,r){if(t.radius>n)return r;var i=e/2*Math.PI/180,o=1/Math.tan(i)*t.radius/Math.sqrt(n*n-t.radius*t.radius);return r*o}},{key:"_figureAspect",value:function(){var t=window.innerWidth,e=window.innerHeight,n=t>e?t/e:e/t;return[t,e,n]}}]),e}(d);P.TREE_PREFETCH_STEP=6;e.MultiPolicyContainer=function(t){function e(t){u(this,e);var n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.policies=t,n}return o(e,t),c(e,[{key:"start",value:function(){function t(){return e.apply(this,arguments)}var e=a(regeneratorRuntime.mark(function t(){var e,n,r,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={"view-changed":[],bbox:[]},n=this.policies.length,r=function(t){var r=t.namespace;if(!r)throw new Error("Cannot handle policy events, if no namepsace is set");t.on("view-changed",function(t){i.emit("view-changed/"+r,t),i.emit("view-changed/any",t);var o=e["view-changed"];o.push([r,t]),o.length===n&&(i.emit("view-changed/all",o),o.length=0)}),t.on("bbox",function(t){i.emit("bbox/"+r,t),i.emit("bbox/any",t);var o=e.bbox;o.push([r,t]),o.length===n&&(i.emit("bbox/all",o),o.length=0)})},t.abrupt("return",l.default.all(this.policies.map(function(t){return r(t),t.start()})));case 4:case"end":return t.stop()}},t,this)}));return t}()}]),e}(d)},function(t,e,n){"use strict";function r(){try{Promise===o&&(Promise=i)}catch(t){}return o}var i;"undefined"!=typeof Promise&&(i=Promise);var o=n(331)();o.noConflict=r,t.exports=o},function(t,e,n){(function(e){"use strict";t.exports=function(){function r(){}function i(t,e){if(null==t||t.constructor!==o)throw new _("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof e)throw new _("expecting a function but got "+d.classString(e))}function o(t){t!==w&&i(this,t),this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._resolveFromExecutor(t),this._promiseCreated(),this._fireEvent("promiseCreated",this)}function a(t){this.promise._resolveCallback(t)}function u(t){this.promise._rejectCallback(t,!1)}function s(t){var e=new o(w);e._fulfillmentHandler0=t,e._rejectionHandler0=t,e._promise0=t,e._receiver0=t}var c,f=function(){return new _("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},l=function(){return new o.PromiseInspection(this._target())},h=function(t){return o.reject(new _(t))},p={},d=n(333);c=d.isNode?function(){var t=e.domain;return void 0===t&&(t=null),t}:function(){return null},d.notEnumerableProp(o,"_getDomain",c);var v=n(334),y=n(335),g=new y;v.defineProperty(o,"_async",{value:g});var m=n(340),_=o.TypeError=m.TypeError;o.RangeError=m.RangeError;var b=o.CancellationError=m.CancellationError;o.TimeoutError=m.TimeoutError,o.OperationalError=m.OperationalError,o.RejectionError=m.OperationalError,o.AggregateError=m.AggregateError;var w=function(){},x={},E={},k=n(341)(o,w),P=n(342)(o,w,k,h,r),S=n(343)(o),M=S.create,O=n(344)(o,S),A=(O.CapturedTrace,n(345)(o,k,E)),C=n(346)(E),T=n(347),R=d.errorObj,j=d.tryCatch;return o.prototype.toString=function(){return"[object Promise]"},o.prototype.caught=o.prototype.catch=function(t){var e=arguments.length;if(e>1){var n,r=new Array(e-1),i=0;for(n=0;n<e-1;++n){var o=arguments[n];if(!d.isObject(o))return h("Catch statement predicate: expecting an object but got "+d.classString(o));r[i++]=o}return r.length=i,t=arguments[n],this.then(void 0,C(r,t,this))}return this.then(void 0,t)},o.prototype.reflect=function(){return this._then(l,l,void 0,this,void 0)},o.prototype.then=function(t,e){if(O.warnings()&&arguments.length>0&&"function"!=typeof t&&"function"!=typeof e){var n=".then() only accepts functions but was passed: "+d.classString(t);arguments.length>1&&(n+=", "+d.classString(e)),this._warn(n)}return this._then(t,e,void 0,void 0,void 0)},o.prototype.done=function(t,e){var n=this._then(t,e,void 0,void 0,void 0);n._setIsFinal()},o.prototype.spread=function(t){return"function"!=typeof t?h("expecting a function but got "+d.classString(t)):this.all()._then(t,void 0,void 0,x,void 0)},o.prototype.toJSON=function(){var t={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(t.fulfillmentValue=this.value(),t.isFulfilled=!0):this.isRejected()&&(t.rejectionReason=this.reason(),t.isRejected=!0),t},o.prototype.all=function(){return arguments.length>0&&this._warn(".all() was passed arguments but it does not take any"),new P(this).promise()},o.prototype.error=function(t){return this.caught(d.originatesFromRejection,t)},o.getNewLibraryCopy=t.exports,o.is=function(t){return t instanceof o},o.fromNode=o.fromCallback=function(t){var e=new o(w);e._captureStackTrace();var n=arguments.length>1&&!!Object(arguments[1]).multiArgs,r=j(t)(T(e,n));return r===R&&e._rejectCallback(r.e,!0),e._isFateSealed()||e._setAsyncGuaranteed(),e},o.all=function(t){return new P(t).promise()},o.cast=function(t){var e=k(t);return e instanceof o||(e=new o(w),e._captureStackTrace(),e._setFulfilled(),e._rejectionHandler0=t),e},o.resolve=o.fulfilled=o.cast,o.reject=o.rejected=function(t){var e=new o(w);return e._captureStackTrace(),e._rejectCallback(t,!0),e},o.setScheduler=function(t){if("function"!=typeof t)throw new _("expecting a function but got "+d.classString(t));return g.setScheduler(t)},o.prototype._then=function(t,e,n,r,i){var a=void 0!==i,u=a?i:new o(w),s=this._target(),f=s._bitField;a||(u._propagateFrom(this,3),u._captureStackTrace(),void 0===r&&0!==(2097152&this._bitField)&&(r=0!==(50397184&f)?this._boundValue():s===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,u));var l=c();if(0!==(50397184&f)){var h,p,v=s._settlePromiseCtx;0!==(33554432&f)?(p=s._rejectionHandler0,h=t):0!==(16777216&f)?(p=s._fulfillmentHandler0,h=e,s._unsetRejectionIsUnhandled()):(v=s._settlePromiseLateCancellationObserver,p=new b("late cancellation observer"),s._attachExtraTrace(p),h=e),g.invoke(v,s,{handler:null===l?h:"function"==typeof h&&d.domainBind(l,h),promise:u,receiver:r,value:p})}else s._addCallbacks(t,e,u,r,l);return u},o.prototype._length=function(){return 65535&this._bitField},o.prototype._isFateSealed=function(){return 0!==(117506048&this._bitField)},o.prototype._isFollowing=function(){return 67108864===(67108864&this._bitField)},o.prototype._setLength=function(t){this._bitField=this._bitField&-65536|65535&t},o.prototype._setFulfilled=function(){this._bitField=33554432|this._bitField,this._fireEvent("promiseFulfilled",this)},o.prototype._setRejected=function(){this._bitField=16777216|this._bitField,this._fireEvent("promiseRejected",this)},o.prototype._setFollowing=function(){this._bitField=67108864|this._bitField,this._fireEvent("promiseResolved",this)},o.prototype._setIsFinal=function(){this._bitField=4194304|this._bitField},o.prototype._isFinal=function(){return(4194304&this._bitField)>0},o.prototype._unsetCancelled=function(){this._bitField=this._bitField&-65537},o.prototype._setCancelled=function(){this._bitField=65536|this._bitField,this._fireEvent("promiseCancelled",this)},o.prototype._setWillBeCancelled=function(){this._bitField=8388608|this._bitField},o.prototype._setAsyncGuaranteed=function(){g.hasCustomScheduler()||(this._bitField=134217728|this._bitField)},o.prototype._receiverAt=function(t){var e=0===t?this._receiver0:this[4*t-4+3];if(e!==p)return void 0===e&&this._isBound()?this._boundValue():e},o.prototype._promiseAt=function(t){return this[4*t-4+2]},o.prototype._fulfillmentHandlerAt=function(t){return this[4*t-4+0]},o.prototype._rejectionHandlerAt=function(t){return this[4*t-4+1]},o.prototype._boundValue=function(){},o.prototype._migrateCallback0=function(t){var e=(t._bitField,t._fulfillmentHandler0),n=t._rejectionHandler0,r=t._promise0,i=t._receiverAt(0);void 0===i&&(i=p),this._addCallbacks(e,n,r,i,null)},o.prototype._migrateCallbackAt=function(t,e){var n=t._fulfillmentHandlerAt(e),r=t._rejectionHandlerAt(e),i=t._promiseAt(e),o=t._receiverAt(e);void 0===o&&(o=p),this._addCallbacks(n,r,i,o,null)},o.prototype._addCallbacks=function(t,e,n,r,i){var o=this._length();if(o>=65531&&(o=0,this._setLength(0)),0===o)this._promise0=n,this._receiver0=r,"function"==typeof t&&(this._fulfillmentHandler0=null===i?t:d.domainBind(i,t)),"function"==typeof e&&(this._rejectionHandler0=null===i?e:d.domainBind(i,e));else{var a=4*o-4;this[a+2]=n,this[a+3]=r,"function"==typeof t&&(this[a+0]=null===i?t:d.domainBind(i,t)),"function"==typeof e&&(this[a+1]=null===i?e:d.domainBind(i,e))}return this._setLength(o+1),o},o.prototype._proxy=function(t,e){this._addCallbacks(void 0,void 0,e,t,null)},o.prototype._resolveCallback=function(t,e){if(0===(117506048&this._bitField)){if(t===this)return this._rejectCallback(f(),!1);var n=k(t,this);if(!(n instanceof o))return this._fulfill(t);e&&this._propagateFrom(n,2);var r=n._target();if(r===this)return void this._reject(f());var i=r._bitField;if(0===(50397184&i)){var a=this._length();a>0&&r._migrateCallback0(this);for(var u=1;u<a;++u)r._migrateCallbackAt(this,u);this._setFollowing(),this._setLength(0),this._setFollowee(r)}else if(0!==(33554432&i))this._fulfill(r._value());else if(0!==(16777216&i))this._reject(r._reason());else{var s=new b("late cancellation observer");r._attachExtraTrace(s),this._reject(s)}}},o.prototype._rejectCallback=function(t,e,n){var r=d.ensureErrorObject(t),i=r===t;if(!i&&!n&&O.warnings()){var o="a promise was rejected with a non-error: "+d.classString(t);this._warn(o,!0)}this._attachExtraTrace(r,!!e&&i),this._reject(t)},o.prototype._resolveFromExecutor=function(t){if(t!==w){var e=this;this._captureStackTrace(),this._pushContext();var n=!0,r=this._execute(t,function(t){e._resolveCallback(t)},function(t){e._rejectCallback(t,n)});n=!1,this._popContext(),void 0!==r&&e._rejectCallback(r,!0)}},o.prototype._settlePromiseFromHandler=function(t,e,n,r){var i=r._bitField;if(0===(65536&i)){r._pushContext();var o;e===x?n&&"number"==typeof n.length?o=j(t).apply(this._boundValue(),n):(o=R,o.e=new _("cannot .spread() a non-array: "+d.classString(n))):o=j(t).call(e,n);var a=r._popContext();i=r._bitField,0===(65536&i)&&(o===E?r._reject(n):o===R?r._rejectCallback(o.e,!1):(O.checkForgottenReturns(o,a,"",r,this),r._resolveCallback(o)))}},o.prototype._target=function(){for(var t=this;t._isFollowing();)t=t._followee();return t},o.prototype._followee=function(){return this._rejectionHandler0},o.prototype._setFollowee=function(t){this._rejectionHandler0=t},o.prototype._settlePromise=function(t,e,n,i){var a=t instanceof o,u=this._bitField,s=0!==(134217728&u);0!==(65536&u)?(a&&t._invokeInternalOnCancel(),n instanceof A&&n.isFinallyHandler()?(n.cancelPromise=t,j(e).call(n,i)===R&&t._reject(R.e)):e===l?t._fulfill(l.call(n)):n instanceof r?n._promiseCancelled(t):a||t instanceof P?t._cancel():n.cancel()):"function"==typeof e?a?(s&&t._setAsyncGuaranteed(),this._settlePromiseFromHandler(e,n,i,t)):e.call(n,i,t):n instanceof r?n._isResolved()||(0!==(33554432&u)?n._promiseFulfilled(i,t):n._promiseRejected(i,t)):a&&(s&&t._setAsyncGuaranteed(),0!==(33554432&u)?t._fulfill(i):t._reject(i))},o.prototype._settlePromiseLateCancellationObserver=function(t){var e=t.handler,n=t.promise,r=t.receiver,i=t.value;"function"==typeof e?n instanceof o?this._settlePromiseFromHandler(e,r,i,n):e.call(r,i,n):n instanceof o&&n._reject(i)},o.prototype._settlePromiseCtx=function(t){this._settlePromise(t.promise,t.handler,t.receiver,t.value)},o.prototype._settlePromise0=function(t,e,n){var r=this._promise0,i=this._receiverAt(0);this._promise0=void 0,this._receiver0=void 0,this._settlePromise(r,t,i,e)},o.prototype._clearCallbackDataAtIndex=function(t){var e=4*t-4;this[e+2]=this[e+3]=this[e+0]=this[e+1]=void 0},o.prototype._fulfill=function(t){var e=this._bitField;if(!((117506048&e)>>>16)){if(t===this){var n=f();return this._attachExtraTrace(n),this._reject(n)}this._setFulfilled(),this._rejectionHandler0=t,(65535&e)>0&&(0!==(134217728&e)?this._settlePromises():g.settlePromises(this))}},o.prototype._reject=function(t){var e=this._bitField;if(!((117506048&e)>>>16))return this._setRejected(),this._fulfillmentHandler0=t,this._isFinal()?g.fatalError(t,d.isNode):void((65535&e)>0?g.settlePromises(this):this._ensurePossibleRejectionHandled())},o.prototype._fulfillPromises=function(t,e){for(var n=1;n<t;n++){var r=this._fulfillmentHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._rejectPromises=function(t,e){for(var n=1;n<t;n++){var r=this._rejectionHandlerAt(n),i=this._promiseAt(n),o=this._receiverAt(n);this._clearCallbackDataAtIndex(n),this._settlePromise(i,r,o,e)}},o.prototype._settlePromises=function(){var t=this._bitField,e=65535&t;if(e>0){if(0!==(16842752&t)){var n=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,n,t),this._rejectPromises(e,n)}else{var r=this._rejectionHandler0;this._settlePromise0(this._fulfillmentHandler0,r,t),this._fulfillPromises(e,r)}this._setLength(0)}this._clearCancellationData()},o.prototype._settledValue=function(){var t=this._bitField;return 0!==(33554432&t)?this._rejectionHandler0:0!==(16777216&t)?this._fulfillmentHandler0:void 0},o.defer=o.pending=function(){O.deprecated("Promise.defer","new Promise");var t=new o(w);return{promise:t,resolve:a,reject:u}},d.notEnumerableProp(o,"_makeSelfResolutionError",f),n(348)(o,w,k,h,O),n(349)(o,w,k,O),n(350)(o,P,h,O),n(351)(o),n(352)(o),n(353)(o,P,k,w,g,c),o.Promise=o,o.version="3.5.1",n(354)(o,P,h,k,w,O),n(355)(o),n(356)(o,h,k,M,w,O),n(357)(o,w,O),n(358)(o,h,w,k,r,O),n(359)(o),n(360)(o,w),n(361)(o,P,k,h),n(362)(o,w,k,h),n(363)(o,P,h,k,w,O),n(364)(o,P,O),n(365)(o,P,h),n(366)(o,w),n(367)(o,w),n(368)(o),d.toFastProperties(o),d.toFastProperties(o.prototype),s({a:1}),s({b:2}),s({c:3}),s(1),s(function(){}),s(void 0),s(!1),s(new o(w)),O.setBounds(y.firstLineError,d.lastLineError),o}}).call(e,n(332))},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(t){if(f===setTimeout)return setTimeout(t,0);if((f===n||!f)&&setTimeout)return f=setTimeout,setTimeout(t,0);try{return f(t,0)}catch(e){try{return f.call(null,t,0)}catch(e){return f.call(this,t,0)}}}function o(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function a(){v&&p&&(v=!1,p.length?d=p.concat(d):y=-1,d.length&&u())}function u(){if(!v){var t=i(a);v=!0;for(var e=d.length;e;){for(p=d,d=[];++y<e;)p&&p[y].run();y=-1,e=d.length}p=null,v=!1,o(t)}}function s(t,e){this.fun=t,this.array=e}function c(){}var f,l,h=t.exports={};!function(){try{f="function"==typeof setTimeout?setTimeout:n}catch(t){f=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}();var p,d=[],v=!1,y=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new s(t,e)),1!==d.length||v||i(u)},s.prototype.run=function(){this.fun.apply(null,this.array)},h.title="browser",h.browser=!0,h.env={},h.argv=[],h.version="",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error("process.binding is not supported")},h.cwd=function(){return"/"},h.chdir=function(t){throw new Error("process.chdir is not supported")},h.umask=function(){return 0}},function(t,e,n){(function(e,r){"use strict";function i(){try{var t=C;return C=null,t.apply(this,arguments)}catch(t){return A.e=t,A}}function o(t){return C=t,i}function a(t){return null==t||t===!0||t===!1||"string"==typeof t||"number"==typeof t}function u(t){return"function"==typeof t||"object"==typeof t&&null!==t}function s(t){return a(t)?new Error(g(t)):t}function c(t,e){var n,r=t.length,i=new Array(r+1);for(n=0;n<r;++n)i[n]=t[n];return i[n]=e,i}function f(t,e,n){if(!M.isES5)return{}.hasOwnProperty.call(t,e)?t[e]:void 0;var r=Object.getOwnPropertyDescriptor(t,e);return null!=r?null==r.get&&null==r.set?r.value:n:void 0}function l(t,e,n){if(a(t))return t;var r={value:n,configurable:!0,enumerable:!1,writable:!0};return M.defineProperty(t,e,r),t}function h(t){throw t}function p(t){try{if("function"==typeof t){var e=M.names(t.prototype),n=M.isES5&&e.length>1,r=e.length>0&&!(1===e.length&&"constructor"===e[0]),i=I.test(t+"")&&M.names(t).length>0;if(n||r||i)return!0}return!1}catch(t){return!1}}function d(t){function e(){}e.prototype=t;for(var n=8;n--;)new e;return t}function v(t){return F.test(t)}function y(t,e,n){for(var r=new Array(t),i=0;i<t;++i)r[i]=e+i+n;return r}function g(t){try{return t+""}catch(t){return"[no string representation]"}}function m(t){return t instanceof Error||null!==t&&"object"==typeof t&&"string"==typeof t.message&&"string"==typeof t.name}function _(t){try{l(t,"isOperational",!0)}catch(t){}}function b(t){return null!=t&&(t instanceof Error.__BluebirdErrorTypes__.OperationalError||t.isOperational===!0)}function w(t){return m(t)&&M.propertyIsWritable(t,"stack")}function x(t){return{}.toString.call(t)}function E(t,e,n){for(var r=M.names(t),i=0;i<r.length;++i){var o=r[i];if(n(o))try{M.defineProperty(e,o,M.getDescriptor(t,o))}catch(t){}}}function k(t){return U?r.env[t]:void 0}function P(){if("function"==typeof Promise)try{var t=new Promise(function(){});if("[object Promise]"==={}.toString.call(t))return Promise}catch(t){}}function S(t,e){return t.bind(e)}var M=n(334),O="undefined"==typeof navigator,A={e:{}},C,T="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof e?e:void 0!==this?this:null,R=function(t,e){function n(){this.constructor=t,this.constructor$=e;for(var n in e.prototype)r.call(e.prototype,n)&&"$"!==n.charAt(n.length-1)&&(this[n+"$"]=e.prototype[n])}var r={}.hasOwnProperty;return n.prototype=e.prototype,t.prototype=new n,t.prototype},j=function(){var t=[Array.prototype,Object.prototype,Function.prototype],e=function(e){for(var n=0;n<t.length;++n)if(t[n]===e)return!0;return!1};if(M.isES5){var n=Object.getOwnPropertyNames;return function(t){for(var r=[],i=Object.create(null);null!=t&&!e(t);){var o;try{o=n(t)}catch(t){return r}for(var a=0;a<o.length;++a){var u=o[a];if(!i[u]){i[u]=!0;var s=Object.getOwnPropertyDescriptor(t,u);null!=s&&null==s.get&&null==s.set&&r.push(u)}}t=M.getPrototypeOf(t)}return r}}var r={}.hasOwnProperty;return function(n){if(e(n))return[];var i=[];t:for(var o in n)if(r.call(n,o))i.push(o);else{for(var a=0;a<t.length;++a)if(r.call(t[a],o))continue t;i.push(o)}return i}}(),I=/this\s*\.\s*\S+\s*=/,F=/^[a-z$_][a-z$_0-9]*$/i,L=function(){return"stack"in new Error?function(t){return w(t)?t:new Error(g(t))}:function(t){if(w(t))return t;try{throw new Error(g(t))}catch(t){return t}}}(),N=function(t){return M.isArray(t)?t:null};if("undefined"!=typeof Symbol&&Symbol.iterator){var B="function"==typeof Array.from?function(t){return Array.from(t)}:function(t){for(var e,n=[],r=t[Symbol.iterator]();!(e=r.next()).done;)n.push(e.value);return n};N=function(t){return M.isArray(t)?t:null!=t&&"function"==typeof t[Symbol.iterator]?B(t):null}}var D="undefined"!=typeof r&&"[object process]"===x(r).toLowerCase(),U="undefined"!=typeof r&&"undefined"!=typeof r.env,z={isClass:p,isIdentifier:v,inheritedDataKeys:j,getDataPropertyOrDefault:f,thrower:h,isArray:M.isArray,asArray:N,notEnumerableProp:l,isPrimitive:a,isObject:u,isError:m,canEvaluate:O,errorObj:A,tryCatch:o,inherits:R,withAppended:c,maybeWrapAsError:s,toFastProperties:d,filledRange:y,toString:g,canAttachTrace:w,ensureErrorObject:L,originatesFromRejection:b,markAsOriginatingFromRejection:_,classString:x,copyDescriptors:E,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:D,hasEnvVariables:U,env:k,global:T,getNativePromise:P,domainBind:S};z.isRecentNode=z.isNode&&function(){var t=r.versions.node.split(".").map(Number);return 0===t[0]&&t[1]>10||t[0]>0}(),z.isNode&&z.toFastProperties(r);try{throw new Error}catch(t){z.lastLineError=t}t.exports=z}).call(e,function(){return this}(),n(332))},function(t,e){var n=function(){"use strict";return void 0===this}();if(n)t.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:n,propertyIsWritable:function(t,e){var n=Object.getOwnPropertyDescriptor(t,e);return!(n&&!n.writable&&!n.set)}};else{var r={}.hasOwnProperty,i={}.toString,o={}.constructor.prototype,a=function(t){var e=[];for(var n in t)r.call(t,n)&&e.push(n);return e},u=function(t,e){return{value:t[e]}},s=function(t,e,n){return t[e]=n.value,t},c=function(t){return t},f=function(t){try{return Object(t).constructor.prototype}catch(t){return o}},l=function(t){try{return"[object Array]"===i.call(t)}catch(t){return!1}};t.exports={isArray:l,keys:a,names:a,defineProperty:s,getDescriptor:u,freeze:c,getPrototypeOf:f,isES5:n,propertyIsWritable:function(){return!0}}}},function(t,e,n){(function(e){"use strict";function r(){this._customScheduler=!1,this._isTickUsed=!1,this._lateQueue=new c(16),this._normalQueue=new c(16),this._haveDrainedQueues=!1,this._trampolineEnabled=!0;var t=this;this.drainQueues=function(){t._drainQueues()},this._schedule=s}function i(t,e,n){this._lateQueue.push(t,e,n),this._queueTick()}function o(t,e,n){this._normalQueue.push(t,e,n),this._queueTick()}function a(t){this._normalQueue._pushOne(t),this._queueTick()}var u;try{throw new Error}catch(t){u=t}var s=n(336),c=n(339),f=n(333);r.prototype.setScheduler=function(t){var e=this._schedule;return this._schedule=t,this._customScheduler=!0,e},r.prototype.hasCustomScheduler=function(){return this._customScheduler},r.prototype.enableTrampoline=function(){this._trampolineEnabled=!0},r.prototype.disableTrampolineIfNecessary=function(){f.hasDevTools&&(this._trampolineEnabled=!1)},r.prototype.haveItemsQueued=function(){return this._isTickUsed||this._haveDrainedQueues},r.prototype.fatalError=function(t,n){n?(e.stderr.write("Fatal "+(t instanceof Error?t.stack:t)+"\n"),e.exit(2)):this.throwLater(t)},r.prototype.throwLater=function(t,e){if(1===arguments.length&&(e=t,t=function(){throw e}),"undefined"!=typeof setTimeout)setTimeout(function(){t(e)},0);else try{this._schedule(function(){t(e)})}catch(t){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")}},f.hasDevTools?(r.prototype.invokeLater=function(t,e,n){this._trampolineEnabled?i.call(this,t,e,n):this._schedule(function(){setTimeout(function(){t.call(e,n)},100)})},r.prototype.invoke=function(t,e,n){this._trampolineEnabled?o.call(this,t,e,n):this._schedule(function(){t.call(e,n)})},r.prototype.settlePromises=function(t){this._trampolineEnabled?a.call(this,t):this._schedule(function(){t._settlePromises()})}):(r.prototype.invokeLater=i,r.prototype.invoke=o,r.prototype.settlePromises=a),r.prototype._drainQueue=function(t){for(;t.length()>0;){var e=t.shift();if("function"==typeof e){var n=t.shift(),r=t.shift();e.call(n,r)}else e._settlePromises()}},r.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),
this._reset(),this._haveDrainedQueues=!0,this._drainQueue(this._lateQueue)},r.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},r.prototype._reset=function(){this._isTickUsed=!1},t.exports=r,t.exports.firstLineError=u}).call(e,n(332))},function(t,e,n){(function(e,r,i){"use strict";var o,a=n(333),u=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n")},s=a.getNativePromise();if(a.isNode&&"undefined"==typeof MutationObserver){var c=e.setImmediate,f=r.nextTick;o=a.isRecentNode?function(t){c.call(e,t)}:function(t){f.call(r,t)}}else if("function"==typeof s&&"function"==typeof s.resolve){var l=s.resolve();o=function(t){l.then(t)}}else o="undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&(window.navigator.standalone||window.cordova)?"undefined"!=typeof i?function(t){i(t)}:"undefined"!=typeof setTimeout?function(t){setTimeout(t,0)}:u:function(){var t=document.createElement("div"),e={attributes:!0},n=!1,r=document.createElement("div"),i=new MutationObserver(function(){t.classList.toggle("foo"),n=!1});i.observe(r,e);var o=function(){n||(n=!0,r.classList.toggle("foo"))};return function(n){var r=new MutationObserver(function(){r.disconnect(),n()});r.observe(t,e),o()}}();t.exports=o}).call(e,function(){return this}(),n(332),n(337).setImmediate)},function(t,e,n){function r(t,e){this._id=t,this._clearFn=e}var i=Function.prototype.apply;e.setTimeout=function(){return new r(i.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(i.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(338),e.setImmediate=setImmediate,e.clearImmediate=clearImmediate},function(t,e,n){(function(t,e){!function(t,n){"use strict";function r(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var r={callback:t,args:e};return v[d]=r,p(d),d++}function i(t){delete v[t]}function o(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}function a(t){if(y)setTimeout(a,0,t);else{var e=v[t];if(e){y=!0;try{o(e)}finally{i(t),y=!1}}}}function u(){p=function(t){e.nextTick(function(){a(t)})}}function s(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}function c(){var e="setImmediate$"+Math.random()+"$",n=function(n){n.source===t&&"string"==typeof n.data&&0===n.data.indexOf(e)&&a(+n.data.slice(e.length))};t.addEventListener?t.addEventListener("message",n,!1):t.attachEvent("onmessage",n),p=function(n){t.postMessage(e+n,"*")}}function f(){var t=new MessageChannel;t.port1.onmessage=function(t){var e=t.data;a(e)},p=function(e){t.port2.postMessage(e)}}function l(){var t=g.documentElement;p=function(e){var n=g.createElement("script");n.onreadystatechange=function(){a(e),n.onreadystatechange=null,t.removeChild(n),n=null},t.appendChild(n)}}function h(){p=function(t){setTimeout(a,0,t)}}if(!t.setImmediate){var p,d=1,v={},y=!1,g=t.document,m=Object.getPrototypeOf&&Object.getPrototypeOf(t);m=m&&m.setTimeout?m:t,"[object process]"==={}.toString.call(t.process)?u():s()?c():t.MessageChannel?f():g&&"onreadystatechange"in g.createElement("script")?l():h(),m.setImmediate=r,m.clearImmediate=i}}("undefined"==typeof self?"undefined"==typeof t?this:t:self)}).call(e,function(){return this}(),n(332))},function(t,e){"use strict";function n(t,e,n,r,i){for(var o=0;o<i;++o)n[o+r]=t[o+e],t[o+e]=void 0}function r(t){this._capacity=t,this._length=0,this._front=0}r.prototype._willBeOverCapacity=function(t){return this._capacity<t},r.prototype._pushOne=function(t){var e=this.length();this._checkCapacity(e+1);var n=this._front+e&this._capacity-1;this[n]=t,this._length=e+1},r.prototype.push=function(t,e,n){var r=this.length()+3;if(this._willBeOverCapacity(r))return this._pushOne(t),this._pushOne(e),void this._pushOne(n);var i=this._front+r-3;this._checkCapacity(r);var o=this._capacity-1;this[i+0&o]=t,this[i+1&o]=e,this[i+2&o]=n,this._length=r},r.prototype.shift=function(){var t=this._front,e=this[t];return this[t]=void 0,this._front=t+1&this._capacity-1,this._length--,e},r.prototype.length=function(){return this._length},r.prototype._checkCapacity=function(t){this._capacity<t&&this._resizeTo(this._capacity<<1)},r.prototype._resizeTo=function(t){var e=this._capacity;this._capacity=t;var r=this._front,i=this._length,o=r+i&e-1;n(this,0,this,e,o)},t.exports=r},function(t,e,n){"use strict";function r(t,e){function n(r){return this instanceof n?(l(this,"message","string"==typeof r?r:e),l(this,"name",t),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new n(r)}return f(n,Error),n}function i(t){return this instanceof i?(l(this,"name","OperationalError"),l(this,"message",t),this.cause=t,this.isOperational=!0,void(t instanceof Error?(l(this,"message",t.message),l(this,"stack",t.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new i(t)}var o,a,u=n(334),s=u.freeze,c=n(333),f=c.inherits,l=c.notEnumerableProp,h=r("Warning","warning"),p=r("CancellationError","cancellation error"),d=r("TimeoutError","timeout error"),v=r("AggregateError","aggregate error");try{o=TypeError,a=RangeError}catch(t){o=r("TypeError","type error"),a=r("RangeError","range error")}for(var y="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),g=0;g<y.length;++g)"function"==typeof Array.prototype[y[g]]&&(v.prototype[y[g]]=Array.prototype[y[g]]);u.defineProperty(v.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),v.prototype.isOperational=!0;var m=0;v.prototype.toString=function(){var t=Array(4*m+1).join(" "),e="\n"+t+"AggregateError of:\n";m++,t=Array(4*m+1).join(" ");for(var n=0;n<this.length;++n){for(var r=this[n]===this?"[Circular AggregateError]":this[n]+"",i=r.split("\n"),o=0;o<i.length;++o)i[o]=t+i[o];r=i.join("\n"),e+=r+"\n"}return m--,e},f(i,Error);var _=Error.__BluebirdErrorTypes__;_||(_=s({CancellationError:p,TimeoutError:d,OperationalError:i,RejectionError:i,AggregateError:v}),u.defineProperty(Error,"__BluebirdErrorTypes__",{value:_,writable:!1,enumerable:!1,configurable:!1})),t.exports={Error:Error,TypeError:o,RangeError:a,CancellationError:_.CancellationError,OperationalError:_.OperationalError,TimeoutError:_.TimeoutError,AggregateError:_.AggregateError,Warning:h}},function(t,e,n){"use strict";t.exports=function(t,e){function r(n,r){if(f(n)){if(n instanceof t)return n;var i=o(n);if(i===c){r&&r._pushContext();var s=t.reject(i.e);return r&&r._popContext(),s}if("function"==typeof i){if(a(n)){var s=new t(e);return n._then(s._fulfill,s._reject,void 0,s,null),s}return u(n,i,r)}}return n}function i(t){return t.then}function o(t){try{return i(t)}catch(t){return c.e=t,c}}function a(t){try{return l.call(t,"_promise0")}catch(t){return!1}}function u(n,r,i){function o(t){u&&(u._resolveCallback(t),u=null)}function a(t){u&&(u._rejectCallback(t,l,!0),u=null)}var u=new t(e),f=u;i&&i._pushContext(),u._captureStackTrace(),i&&i._popContext();var l=!0,h=s.tryCatch(r).call(n,o,a);return l=!1,u&&h===c&&(u._rejectCallback(h.e,!0,!0),u=null),f}var s=n(333),c=s.errorObj,f=s.isObject,l={}.hasOwnProperty;return r}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o){function a(t){switch(t){case-2:return[];case-3:return{};case-6:return new Map}}function u(n){var r=this._promise=new t(e);n instanceof t&&r._propagateFrom(n,3),r._setOnCancel(this),this._values=n,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var s=n(333);s.isArray;return s.inherits(u,o),u.prototype.length=function(){return this._length},u.prototype.promise=function(){return this._promise},u.prototype._init=function e(n,o){var u=r(this._values,this._promise);if(u instanceof t){u=u._target();var c=u._bitField;if(this._values=u,0===(50397184&c))return this._promise._setAsyncGuaranteed(),u._then(e,this._reject,void 0,this,o);if(0===(33554432&c))return 0!==(16777216&c)?this._reject(u._reason()):this._cancel();u=u._value()}if(u=s.asArray(u),null===u){var f=i("expecting an array or an iterable object but got "+s.classString(u)).reason();return void this._promise._rejectCallback(f,!1)}return 0===u.length?void(o===-5?this._resolveEmptyArray():this._resolve(a(o))):void this._iterate(u)},u.prototype._iterate=function(e){var n=this.getActualLength(e.length);this._length=n,this._values=this.shouldCopyValues()?new Array(n):this._values;for(var i=this._promise,o=!1,a=null,u=0;u<n;++u){var s=r(e[u],i);s instanceof t?(s=s._target(),a=s._bitField):a=null,o?null!==a&&s.suppressUnhandledRejections():null!==a?0===(50397184&a)?(s._proxy(this,u),this._values[u]=s):o=0!==(33554432&a)?this._promiseFulfilled(s._value(),u):0!==(16777216&a)?this._promiseRejected(s._reason(),u):this._promiseCancelled(u):o=this._promiseFulfilled(s,u)}o||i._setAsyncGuaranteed()},u.prototype._isResolved=function(){return null===this._values},u.prototype._resolve=function(t){this._values=null,this._promise._fulfill(t)},u.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},u.prototype._reject=function(t){this._values=null,this._promise._rejectCallback(t,!1)},u.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},u.prototype._promiseCancelled=function(){return this._cancel(),!0},u.prototype._promiseRejected=function(t){return this._totalResolved++,this._reject(t),!0},u.prototype._resultCancelled=function(){if(!this._isResolved()){var e=this._values;if(this._cancel(),e instanceof t)e.cancel();else for(var n=0;n<e.length;++n)e[n]instanceof t&&e[n].cancel()}},u.prototype.shouldCopyValues=function(){return!0},u.prototype.getActualLength=function(t){return t},u}},function(t,e){"use strict";t.exports=function(t){function e(){this._trace=new e.CapturedTrace(r())}function n(){if(i)return new e}function r(){var t=o.length-1;if(t>=0)return o[t]}var i=!1,o=[];return t.prototype._promiseCreated=function(){},t.prototype._pushContext=function(){},t.prototype._popContext=function(){return null},t._peekContext=t.prototype._peekContext=function(){},e.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,o.push(this._trace))},e.prototype._popContext=function(){if(void 0!==this._trace){var t=o.pop(),e=t._promiseCreated;return t._promiseCreated=null,e}return null},e.CapturedTrace=null,e.create=n,e.deactivateLongStackTraces=function(){},e.activateLongStackTraces=function(){var n=t.prototype._pushContext,o=t.prototype._popContext,a=t._peekContext,u=t.prototype._peekContext,s=t.prototype._promiseCreated;e.deactivateLongStackTraces=function(){t.prototype._pushContext=n,t.prototype._popContext=o,t._peekContext=a,t.prototype._peekContext=u,t.prototype._promiseCreated=s,i=!1},i=!0,t.prototype._pushContext=e.prototype._pushContext,t.prototype._popContext=e.prototype._popContext,t._peekContext=t.prototype._peekContext=r,t.prototype._promiseCreated=function(){var t=this._peekContext();t&&null==t._promiseCreated&&(t._promiseCreated=this)}},e}},function(t,e,n){(function(e){"use strict";t.exports=function(t,r){function i(t,e){return{promise:e}}function o(){return!1}function a(t,e,n){var r=this;try{t(e,n,function(t){if("function"!=typeof t)throw new TypeError("onCancel must be a function, got: "+D.toString(t));r._attachCancellationCallback(t)})}catch(t){return t}}function u(t){if(!this._isCancellable())return this;var e=this._onCancel();void 0!==e?D.isArray(e)?e.push(t):this._setOnCancel([e,t]):this._setOnCancel(t)}function s(){return this._onCancelField}function c(t){this._onCancelField=t}function f(){this._cancellationParent=void 0,this._onCancelField=void 0}function l(t,e){if(0!==(1&e)){this._cancellationParent=t;var n=t._branchesRemainingToCancel;void 0===n&&(n=0),t._branchesRemainingToCancel=n+1}0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function h(t,e){0!==(2&e)&&t._isBound()&&this._setBoundTo(t._boundTo)}function p(){var e=this._boundTo;return void 0!==e&&e instanceof t?e.isFulfilled()?e.value():void 0:e}function d(){this._trace=new R(this._peekContext())}function v(t,e){if(U(t)){var n=this._trace;if(void 0!==n&&e&&(n=n._parent),void 0!==n)n.attachExtraTrace(t);else if(!t.__stackCleaned__){var r=k(t);D.notEnumerableProp(t,"stack",r.message+"\n"+r.stack.join("\n")),D.notEnumerableProp(t,"__stackCleaned__",!0)}}}function y(t,e,n,r,i){if(void 0===t&&null!==e&&Q){if(void 0!==i&&i._returnedNonUndefined())return;if(0===(65535&r._bitField))return;n&&(n+=" ");var o="",a="";if(e._trace){for(var u=e._trace.stack.split("\n"),s=x(u),c=s.length-1;c>=0;--c){var f=s[c];if(!q.test(f)){var l=f.match(Y);l&&(o="at "+l[1]+":"+l[2]+":"+l[3]+" ");break}}if(s.length>0)for(var h=s[0],c=0;c<u.length;++c)if(u[c]===h){c>0&&(a="\n"+u[c-1]);break}}var p="a promise was created in a "+n+"handler "+o+"but was not returned from it, see http://goo.gl/rRqMUw"+a;r._warn(p,!0,e)}}function g(t,e){var n=t+" is deprecated and will be removed in a future version.";return e&&(n+=" Use "+e+" instead."),m(n)}function m(e,n,r){if(at.warnings){var i,o=new B(e);if(n)r._attachExtraTrace(o);else if(at.longStackTraces&&(i=t._peekContext()))i.attachExtraTrace(o);else{var a=k(o);o.stack=a.message+"\n"+a.stack.join("\n")}et("warning",o)||P(o,"",!0)}}function _(t,e){for(var n=0;n<e.length-1;++n)e[n].push("From previous event:"),e[n]=e[n].join("\n");return n<e.length&&(e[n]=e[n].join("\n")),t+"\n"+e.join("\n")}function b(t){for(var e=0;e<t.length;++e)(0===t[e].length||e+1<t.length&&t[e][0]===t[e+1][0])&&(t.splice(e,1),e--)}function w(t){for(var e=t[0],n=1;n<t.length;++n){for(var r=t[n],i=e.length-1,o=e[i],a=-1,u=r.length-1;u>=0;--u)if(r[u]===o){a=u;break}for(var u=a;u>=0;--u){var s=r[u];if(e[i]!==s)break;e.pop(),i--}e=r}}function x(t){for(var e=[],n=0;n<t.length;++n){var r=t[n],i="    (No stack trace)"===r||H.test(r),o=i&&rt(r);i&&!o&&(G&&" "!==r.charAt(0)&&(r="    "+r),e.push(r))}return e}function E(t){for(var e=t.stack.replace(/\s+$/g,"").split("\n"),n=0;n<e.length;++n){var r=e[n];if("    (No stack trace)"===r||H.test(r))break}return n>0&&"SyntaxError"!=t.name&&(e=e.slice(n)),e}function k(t){var e=t.stack,n=t.toString();return e="string"==typeof e&&e.length>0?E(t):["    (No stack trace)"],{message:n,stack:"SyntaxError"==t.name?e:x(e)}}function P(t,e,n){if("undefined"!=typeof console){var r;if(D.isObject(t)){var i=t.stack;r=e+V(i,t)}else r=e+String(t);"function"==typeof F?F(r,n):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(r)}}function S(t,e,n,r){var i=!1;try{"function"==typeof e&&(i=!0,"rejectionHandled"===t?e(r):e(n,r))}catch(t){N.throwLater(t)}"unhandledRejection"===t?et(t,n,r)||i||P(n,"Unhandled rejection "):et(t,r)}function M(t){var e;if("function"==typeof t)e="[function "+(t.name||"anonymous")+"]";else{e=t&&"function"==typeof t.toString?t.toString():D.toString(t);var n=/\[object [a-zA-Z0-9$_]+\]/;if(n.test(e))try{var r=JSON.stringify(t);e=r}catch(t){}0===e.length&&(e="(empty array)")}return"(<"+O(e)+">, no stack trace)"}function O(t){var e=41;return t.length<e?t:t.substr(0,e-3)+"..."}function A(){return"function"==typeof ot}function C(t){var e=t.match(it);if(e)return{fileName:e[1],line:parseInt(e[2],10)}}function T(t,e){if(A()){for(var n,r,i=t.stack.split("\n"),o=e.stack.split("\n"),a=-1,u=-1,s=0;s<i.length;++s){var c=C(i[s]);if(c){n=c.fileName,a=c.line;break}}for(var s=0;s<o.length;++s){var c=C(o[s]);if(c){r=c.fileName,u=c.line;break}}a<0||u<0||!n||!r||n!==r||a>=u||(rt=function(t){if(z.test(t))return!0;var e=C(t);return!!(e&&e.fileName===n&&a<=e.line&&e.line<=u)})}}function R(t){this._parent=t,this._promisesCreated=0;var e=this._length=1+(void 0===t?0:t._length);ot(this,R),e>32&&this.uncycle()}var j,I,F,L=t._getDomain,N=t._async,B=n(340).Warning,D=n(333),U=D.canAttachTrace,z=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,q=/\((?:timers\.js):\d+:\d+\)/,Y=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,H=null,V=null,G=!1,W=!(0==D.env("BLUEBIRD_DEBUG")||!D.env("BLUEBIRD_DEBUG")&&"development"!==D.env("NODE_ENV")),X=!(0==D.env("BLUEBIRD_WARNINGS")||!W&&!D.env("BLUEBIRD_WARNINGS")),$=!(0==D.env("BLUEBIRD_LONG_STACK_TRACES")||!W&&!D.env("BLUEBIRD_LONG_STACK_TRACES")),Q=0!=D.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(X||!!D.env("BLUEBIRD_W_FORGOTTEN_RETURN"));t.prototype.suppressUnhandledRejections=function(){var t=this._target();t._bitField=t._bitField&-1048577|524288},t.prototype._ensurePossibleRejectionHandled=function(){if(0===(524288&this._bitField)){this._setRejectionIsUnhandled();var t=this;setTimeout(function(){t._notifyUnhandledRejection()},1)}},t.prototype._notifyUnhandledRejectionIsHandled=function(){S("rejectionHandled",j,void 0,this)},t.prototype._setReturnedNonUndefined=function(){this._bitField=268435456|this._bitField},t.prototype._returnedNonUndefined=function(){return 0!==(268435456&this._bitField)},t.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var t=this._settledValue();this._setUnhandledRejectionIsNotified(),S("unhandledRejection",I,t,this)}},t.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=262144|this._bitField},t.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=this._bitField&-262145},t.prototype._isUnhandledRejectionNotified=function(){return(262144&this._bitField)>0},t.prototype._setRejectionIsUnhandled=function(){this._bitField=1048576|this._bitField},t.prototype._unsetRejectionIsUnhandled=function(){this._bitField=this._bitField&-1048577,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},t.prototype._isRejectionUnhandled=function(){return(1048576&this._bitField)>0},t.prototype._warn=function(t,e,n){return m(t,e,n||this)},t.onPossiblyUnhandledRejection=function(t){var e=L();I="function"==typeof t?null===e?t:D.domainBind(e,t):void 0},t.onUnhandledRejectionHandled=function(t){var e=L();j="function"==typeof t?null===e?t:D.domainBind(e,t):void 0};var J=function(){};t.longStackTraces=function(){if(N.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");if(!at.longStackTraces&&A()){var e=t.prototype._captureStackTrace,n=t.prototype._attachExtraTrace;at.longStackTraces=!0,J=function(){if(N.haveItemsQueued()&&!at.longStackTraces)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");t.prototype._captureStackTrace=e,t.prototype._attachExtraTrace=n,r.deactivateLongStackTraces(),N.enableTrampoline(),at.longStackTraces=!1},t.prototype._captureStackTrace=d,t.prototype._attachExtraTrace=v,r.activateLongStackTraces(),N.disableTrampolineIfNecessary()}},t.hasLongStackTraces=function(){return at.longStackTraces&&A()};var K=function(){try{if("function"==typeof CustomEvent){var t=new CustomEvent("CustomEvent");return D.global.dispatchEvent(t),function(t,e){var n=new CustomEvent(t.toLowerCase(),{detail:e,cancelable:!0});return!D.global.dispatchEvent(n)}}if("function"==typeof Event){var t=new Event("CustomEvent");return D.global.dispatchEvent(t),function(t,e){var n=new Event(t.toLowerCase(),{cancelable:!0});return n.detail=e,!D.global.dispatchEvent(n)}}var t=document.createEvent("CustomEvent");return t.initCustomEvent("testingtheevent",!1,!0,{}),D.global.dispatchEvent(t),function(t,e){var n=document.createEvent("CustomEvent");return n.initCustomEvent(t.toLowerCase(),!1,!0,e),!D.global.dispatchEvent(n)}}catch(t){}return function(){return!1}}(),Z=function(){return D.isNode?function(){return e.emit.apply(e,arguments)}:D.global?function(t){var e="on"+t.toLowerCase(),n=D.global[e];return!!n&&(n.apply(D.global,[].slice.call(arguments,1)),!0)}:function(){return!1}}(),tt={promiseCreated:i,promiseFulfilled:i,promiseRejected:i,promiseResolved:i,promiseCancelled:i,promiseChained:function(t,e,n){return{promise:e,child:n}},warning:function(t,e){return{warning:e}},unhandledRejection:function(t,e,n){return{reason:e,promise:n}},rejectionHandled:i},et=function(t){var e=!1;try{e=Z.apply(null,arguments)}catch(t){N.throwLater(t),e=!0}var n=!1;try{n=K(t,tt[t].apply(null,arguments))}catch(t){N.throwLater(t),n=!0}return n||e};t.config=function(e){if(e=Object(e),"longStackTraces"in e&&(e.longStackTraces?t.longStackTraces():!e.longStackTraces&&t.hasLongStackTraces()&&J()),"warnings"in e){var n=e.warnings;at.warnings=!!n,Q=at.warnings,D.isObject(n)&&"wForgottenReturn"in n&&(Q=!!n.wForgottenReturn)}if("cancellation"in e&&e.cancellation&&!at.cancellation){if(N.haveItemsQueued())throw new Error("cannot enable cancellation after promises are in use");t.prototype._clearCancellationData=f,t.prototype._propagateFrom=l,t.prototype._onCancel=s,t.prototype._setOnCancel=c,t.prototype._attachCancellationCallback=u,t.prototype._execute=a,nt=l,at.cancellation=!0}return"monitoring"in e&&(e.monitoring&&!at.monitoring?(at.monitoring=!0,t.prototype._fireEvent=et):!e.monitoring&&at.monitoring&&(at.monitoring=!1,t.prototype._fireEvent=o)),t},t.prototype._fireEvent=o,t.prototype._execute=function(t,e,n){try{t(e,n)}catch(t){return t}},t.prototype._onCancel=function(){},t.prototype._setOnCancel=function(t){},t.prototype._attachCancellationCallback=function(t){},t.prototype._captureStackTrace=function(){},t.prototype._attachExtraTrace=function(){},t.prototype._clearCancellationData=function(){},t.prototype._propagateFrom=function(t,e){};var nt=h,rt=function(){return!1},it=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;D.inherits(R,Error),r.CapturedTrace=R,R.prototype.uncycle=function(){var t=this._length;if(!(t<2)){for(var e=[],n={},r=0,i=this;void 0!==i;++r)e.push(i),i=i._parent;t=this._length=r;for(var r=t-1;r>=0;--r){var o=e[r].stack;void 0===n[o]&&(n[o]=r)}for(var r=0;r<t;++r){var a=e[r].stack,u=n[a];if(void 0!==u&&u!==r){u>0&&(e[u-1]._parent=void 0,e[u-1]._length=1),e[r]._parent=void 0,e[r]._length=1;var s=r>0?e[r-1]:this;u<t-1?(s._parent=e[u+1],s._parent.uncycle(),s._length=s._parent._length+1):(s._parent=void 0,s._length=1);for(var c=s._length+1,f=r-2;f>=0;--f)e[f]._length=c,c++;return}}}},R.prototype.attachExtraTrace=function(t){if(!t.__stackCleaned__){this.uncycle();for(var e=k(t),n=e.message,r=[e.stack],i=this;void 0!==i;)r.push(x(i.stack.split("\n"))),i=i._parent;w(r),b(r),D.notEnumerableProp(t,"stack",_(n,r)),D.notEnumerableProp(t,"__stackCleaned__",!0)}};var ot=function(){var t=/^\s*at\s*/,e=function(t,e){return"string"==typeof t?t:void 0!==e.name&&void 0!==e.message?e.toString():M(e)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit+=6,H=t,V=e;var n=Error.captureStackTrace;return rt=function(t){return z.test(t)},function(t,e){Error.stackTraceLimit+=6,n(t,e),Error.stackTraceLimit-=6}}var r=new Error;if("string"==typeof r.stack&&r.stack.split("\n")[0].indexOf("stackDetection@")>=0)return H=/@/,V=e,G=!0,function(t){t.stack=(new Error).stack};var i;try{throw new Error}catch(t){i="stack"in t}return"stack"in r||!i||"number"!=typeof Error.stackTraceLimit?(V=function(t,e){return"string"==typeof t?t:"object"!=typeof e&&"function"!=typeof e||void 0===e.name||void 0===e.message?M(e):e.toString()},null):(H=t,V=e,function(t){Error.stackTraceLimit+=6;try{throw new Error}catch(e){t.stack=e.stack}Error.stackTraceLimit-=6})}([]);"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(F=function(t){console.warn(t)},D.isNode&&e.stderr.isTTY?F=function(t,e){var n=e?"[33m":"[31m";console.warn(n+t+"[0m\n")}:D.isNode||"string"!=typeof(new Error).stack||(F=function(t,e){console.warn("%c"+t,e?"color: darkorange":"color: red")}));var at={warnings:X,longStackTraces:!1,cancellation:!1,monitoring:!1};return $&&t.longStackTraces(),{longStackTraces:function(){return at.longStackTraces},warnings:function(){return at.warnings},cancellation:function(){return at.cancellation},monitoring:function(){return at.monitoring},propagateFromFunction:function(){return nt},boundValueFunction:function(){return p},checkForgottenReturns:y,setBounds:T,warn:m,deprecated:g,CapturedTrace:R,fireDomEvent:K,fireGlobalEvent:Z}}}).call(e,n(332))},function(t,e,n){"use strict";t.exports=function(t,e,r){function i(t,e,n){this.promise=t,this.type=e,this.handler=n,this.called=!1,this.cancelPromise=null}function o(t){this.finallyHandler=t}function a(t,e){return null!=t.cancelPromise&&(arguments.length>1?t.cancelPromise._reject(e):t.cancelPromise._cancel(),t.cancelPromise=null,!0)}function u(){return c.call(this,this.promise._target()._settledValue())}function s(t){if(!a(this,t))return h.e=t,h}function c(n){var i=this.promise,c=this.handler;if(!this.called){this.called=!0;var f=this.isFinallyHandler()?c.call(i._boundValue()):c.call(i._boundValue(),n);if(f===r)return f;if(void 0!==f){i._setReturnedNonUndefined();var p=e(f,i);if(p instanceof t){if(null!=this.cancelPromise){if(p._isCancelled()){var d=new l("late cancellation observer");return i._attachExtraTrace(d),h.e=d,h}p.isPending()&&p._attachCancellationCallback(new o(this))}return p._then(u,s,void 0,this,void 0)}}}return i.isRejected()?(a(this),h.e=n,h):(a(this),n)}var f=n(333),l=t.CancellationError,h=f.errorObj,p=n(346)(r);return i.prototype.isFinallyHandler=function(){return 0===this.type},o.prototype._resultCancelled=function(){a(this.finallyHandler)},t.prototype._passThrough=function(t,e,n,r){return"function"!=typeof t?this.then():this._then(n,r,void 0,new i(this,e,t),void 0)},t.prototype.lastly=t.prototype.finally=function(t){return this._passThrough(t,0,c,c)},t.prototype.tap=function(t){return this._passThrough(t,1,c)},t.prototype.tapCatch=function(e){var n=arguments.length;if(1===n)return this._passThrough(e,1,void 0,c);var r,i=new Array(n-1),o=0;for(r=0;r<n-1;++r){var a=arguments[r];if(!f.isObject(a))return t.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+f.classString(a)));i[o++]=a}i.length=o;var u=arguments[r];return this._passThrough(p(i,u,this),1,void 0,c)},i}},function(t,e,n){"use strict";t.exports=function(t){function e(e,n,u){return function(s){var c=u._boundValue();t:for(var f=0;f<e.length;++f){var l=e[f];if(l===Error||null!=l&&l.prototype instanceof Error){if(s instanceof l)return o(n).call(c,s)}else if("function"==typeof l){var h=o(l).call(c,s);if(h===a)return h;if(h)return o(n).call(c,s)}else if(r.isObject(s)){for(var p=i(l),d=0;d<p.length;++d){var v=p[d];if(l[v]!=s[v])continue t}return o(n).call(c,s)}}return t}}var r=n(333),i=n(334).keys,o=r.tryCatch,a=r.errorObj;return e}},function(t,e,n){"use strict";function r(t){return t instanceof Error&&f.getPrototypeOf(t)===Error.prototype}function i(t){var e;if(r(t)){e=new c(t),e.name=t.name,e.message=t.message,e.stack=t.stack;for(var n=f.keys(t),i=0;i<n.length;++i){var o=n[i];l.test(o)||(e[o]=t[o])}return e}return a.markAsOriginatingFromRejection(t),t}function o(t,e){return function(n,r){if(null!==t){if(n){var o=i(u(n));t._attachExtraTrace(o),t._reject(o)}else if(e){for(var a=arguments.length,s=new Array(Math.max(a-1,0)),c=1;c<a;++c)s[c-1]=arguments[c];t._fulfill(s)}else t._fulfill(r);t=null}}}var a=n(333),u=a.maybeWrapAsError,s=n(340),c=s.OperationalError,f=n(334),l=/^(?:name|message|stack|cause)$/;t.exports=o},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o){var a=n(333),u=a.tryCatch;t.method=function(n){if("function"!=typeof n)throw new t.TypeError("expecting a function but got "+a.classString(n));return function(){var r=new t(e);r._captureStackTrace(),r._pushContext();var i=u(n).apply(this,arguments),a=r._popContext();return o.checkForgottenReturns(i,a,"Promise.method",r),r._resolveFromSyncValue(i),r}},t.attempt=t.try=function(n){if("function"!=typeof n)return i("expecting a function but got "+a.classString(n));var r=new t(e);r._captureStackTrace(),r._pushContext();var s;if(arguments.length>1){o.deprecated("calling Promise.try with more than 1 argument");var c=arguments[1],f=arguments[2];s=a.isArray(c)?u(n).apply(f,c):u(n).call(f,c)}else s=u(n)();var l=r._popContext();return o.checkForgottenReturns(s,l,"Promise.try",r),r._resolveFromSyncValue(s),r},t.prototype._resolveFromSyncValue=function(t){t===a.errorObj?this._rejectCallback(t.e,!1):this._resolveCallback(t,!0)}}},function(t,e){"use strict";t.exports=function(t,e,n,r){var i=!1,o=function(t,e){this._reject(e)},a=function(t,e){e.promiseRejectionQueued=!0,e.bindingPromise._then(o,o,null,this,t)},u=function(t,e){0===(50397184&this._bitField)&&this._resolveCallback(e.target)},s=function(t,e){e.promiseRejectionQueued||this._reject(t)};t.prototype.bind=function(o){i||(i=!0,t.prototype._propagateFrom=r.propagateFromFunction(),t.prototype._boundValue=r.boundValueFunction());var c=n(o),f=new t(e);f._propagateFrom(this,1);var l=this._target();if(f._setBoundTo(c),c instanceof t){var h={promiseRejectionQueued:!1,promise:f,target:l,bindingPromise:c};l._then(e,a,void 0,f,h),c._then(u,s,void 0,f,h),f._setOnCancel(c)}else f._resolveCallback(l);return f},t.prototype._setBoundTo=function(t){void 0!==t?(this._bitField=2097152|this._bitField,this._boundTo=t):this._bitField=this._bitField&-2097153},t.prototype._isBound=function(){return 2097152===(2097152&this._bitField)},t.bind=function(e,n){return t.resolve(n).bind(e)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){var o=n(333),a=o.tryCatch,u=o.errorObj,s=t._async;t.prototype.break=t.prototype.cancel=function(){if(!i.cancellation())return this._warn("cancellation is disabled");for(var t=this,e=t;t._isCancellable();){if(!t._cancelBy(e)){e._isFollowing()?e._followee().cancel():e._cancelBranched();break}var n=t._cancellationParent;if(null==n||!n._isCancellable()){t._isFollowing()?t._followee().cancel():t._cancelBranched();break}t._isFollowing()&&t._followee().cancel(),t._setWillBeCancelled(),e=t,t=n}},t.prototype._branchHasCancelled=function(){this._branchesRemainingToCancel--},t.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||this._branchesRemainingToCancel<=0},t.prototype._cancelBy=function(t){return t===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))},t.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()},t.prototype._cancel=function(){this._isCancellable()&&(this._setCancelled(),s.invoke(this._cancelPromises,this,void 0))},t.prototype._cancelPromises=function(){this._length()>0&&this._settlePromises()},t.prototype._unsetOnCancel=function(){this._onCancelField=void 0},t.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()},t.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()},t.prototype._doInvokeOnCancel=function(t,e){if(o.isArray(t))for(var n=0;n<t.length;++n)this._doInvokeOnCancel(t[n],e);else if(void 0!==t)if("function"==typeof t){if(!e){var r=a(t).call(this._boundValue());r===u&&(this._attachExtraTrace(r.e),s.throwLater(r.e))}}else t._resultCancelled(this)},t.prototype._invokeOnCancel=function(){var t=this._onCancel();this._unsetOnCancel(),s.invoke(this._doInvokeOnCancel,this,t)},t.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())},t.prototype._resultCancelled=function(){this.cancel()}}},function(t,e){
"use strict";t.exports=function(t){function e(){return this.value}function n(){throw this.reason}t.prototype.return=t.prototype.thenReturn=function(n){return n instanceof t&&n.suppressUnhandledRejections(),this._then(e,void 0,void 0,{value:n},void 0)},t.prototype.throw=t.prototype.thenThrow=function(t){return this._then(n,void 0,void 0,{reason:t},void 0)},t.prototype.catchThrow=function(t){if(arguments.length<=1)return this._then(void 0,n,void 0,{reason:t},void 0);var e=arguments[1],r=function(){throw e};return this.caught(t,r)},t.prototype.catchReturn=function(n){if(arguments.length<=1)return n instanceof t&&n.suppressUnhandledRejections(),this._then(void 0,e,void 0,{value:n},void 0);var r=arguments[1];r instanceof t&&r.suppressUnhandledRejections();var i=function(){return r};return this.caught(n,i)}}},function(t,e){"use strict";t.exports=function(t){function e(t){void 0!==t?(t=t._target(),this._bitField=t._bitField,this._settledValueField=t._isFateSealed()?t._settledValue():void 0):(this._bitField=0,this._settledValueField=void 0)}e.prototype._settledValue=function(){return this._settledValueField};var n=e.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},r=e.prototype.error=e.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},i=e.prototype.isFulfilled=function(){return 0!==(33554432&this._bitField)},o=e.prototype.isRejected=function(){return 0!==(16777216&this._bitField)},a=e.prototype.isPending=function(){return 0===(50397184&this._bitField)},u=e.prototype.isResolved=function(){return 0!==(50331648&this._bitField)};e.prototype.isCancelled=function(){return 0!==(8454144&this._bitField)},t.prototype.__isCancelled=function(){return 65536===(65536&this._bitField)},t.prototype._isCancelled=function(){return this._target().__isCancelled()},t.prototype.isCancelled=function(){return 0!==(8454144&this._target()._bitField)},t.prototype.isPending=function(){return a.call(this._target())},t.prototype.isRejected=function(){return o.call(this._target())},t.prototype.isFulfilled=function(){return i.call(this._target())},t.prototype.isResolved=function(){return u.call(this._target())},t.prototype.value=function(){return n.call(this._target())},t.prototype.reason=function(){var t=this._target();return t._unsetRejectionIsUnhandled(),r.call(t)},t.prototype._value=function(){return this._settledValue()},t.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()},t.PromiseInspection=e}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){var u,s=n(333),c=s.canEvaluate,f=s.tryCatch,l=s.errorObj;if(c){for(var h=function(t){return new Function("value","holder","                             \n\t            'use strict';                                                    \n\t            holder.pIndex = value;                                           \n\t            holder.checkFulfillment(this);                                   \n\t            ".replace(/Index/g,t))},p=function(t){return new Function("promise","holder","                           \n\t            'use strict';                                                    \n\t            holder.pIndex = promise;                                         \n\t            ".replace(/Index/g,t))},d=function(e){for(var n=new Array(e),r=0;r<n.length;++r)n[r]="this.p"+(r+1);var i=n.join(" = ")+" = null;",a="var promise;\n"+n.map(function(t){return"                                                         \n\t                promise = "+t+";                                      \n\t                if (promise instanceof Promise) {                            \n\t                    promise.cancel();                                        \n\t                }                                                            \n\t            "}).join("\n"),u=n.join(", "),s="Holder$"+e,c="return function(tryCatch, errorObj, Promise, async) {    \n\t            'use strict';                                                    \n\t            function [TheName](fn) {                                         \n\t                [TheProperties]                                              \n\t                this.fn = fn;                                                \n\t                this.asyncNeeded = true;                                     \n\t                this.now = 0;                                                \n\t            }                                                                \n\t                                                                             \n\t            [TheName].prototype._callFunction = function(promise) {          \n\t                promise._pushContext();                                      \n\t                var ret = tryCatch(this.fn)([ThePassedArguments]);           \n\t                promise._popContext();                                       \n\t                if (ret === errorObj) {                                      \n\t                    promise._rejectCallback(ret.e, false);                   \n\t                } else {                                                     \n\t                    promise._resolveCallback(ret);                           \n\t                }                                                            \n\t            };                                                               \n\t                                                                             \n\t            [TheName].prototype.checkFulfillment = function(promise) {       \n\t                var now = ++this.now;                                        \n\t                if (now === [TheTotal]) {                                    \n\t                    if (this.asyncNeeded) {                                  \n\t                        async.invoke(this._callFunction, this, promise);     \n\t                    } else {                                                 \n\t                        this._callFunction(promise);                         \n\t                    }                                                        \n\t                                                                             \n\t                }                                                            \n\t            };                                                               \n\t                                                                             \n\t            [TheName].prototype._resultCancelled = function() {              \n\t                [CancellationCode]                                           \n\t            };                                                               \n\t                                                                             \n\t            return [TheName];                                                \n\t        }(tryCatch, errorObj, Promise, async);                               \n\t        ";return c=c.replace(/\[TheName\]/g,s).replace(/\[TheTotal\]/g,e).replace(/\[ThePassedArguments\]/g,u).replace(/\[TheProperties\]/g,i).replace(/\[CancellationCode\]/g,a),new Function("tryCatch","errorObj","Promise","async",c)(f,l,t,o)},v=[],y=[],g=[],m=0;m<8;++m)v.push(d(m+1)),y.push(h(m+1)),g.push(p(m+1));u=function(t){this._reject(t)}}t.join=function(){var n,o=arguments.length-1;if(o>0&&"function"==typeof arguments[o]&&(n=arguments[o],o<=8&&c)){var f=new t(i);f._captureStackTrace();for(var l=v[o-1],h=new l(n),p=y,d=0;d<o;++d){var m=r(arguments[d],f);if(m instanceof t){m=m._target();var _=m._bitField;0===(50397184&_)?(m._then(p[d],u,void 0,f,h),g[d](m,h),h.asyncNeeded=!1):0!==(33554432&_)?p[d].call(f,m._value(),h):0!==(16777216&_)?f._reject(m._reason()):f._cancel()}else p[d].call(f,m,h)}if(!f._isFateSealed()){if(h.asyncNeeded){var b=a();null!==b&&(h.fn=s.domainBind(b,h.fn))}f._setAsyncGuaranteed(),f._setOnCancel(h)}return f}for(var w=arguments.length,x=new Array(w),E=0;E<w;++E)x[E]=arguments[E];n&&x.pop();var f=new e(x).promise();return void 0!==n?f.spread(n):f}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){function u(t,e,n,r){this.constructor$(t),this._promise._captureStackTrace();var i=c();this._callback=null===i?e:f.domainBind(i,e),this._preservedValues=r===o?new Array(this.length()):null,this._limit=n,this._inFlight=0,this._queue=[],p.invoke(this._asyncInit,this,void 0)}function s(e,n,i,o){if("function"!=typeof n)return r("expecting a function but got "+f.classString(n));var a=0;if(void 0!==i){if("object"!=typeof i||null===i)return t.reject(new TypeError("options argument must be an object but it is "+f.classString(i)));if("number"!=typeof i.concurrency)return t.reject(new TypeError("'concurrency' must be a number but it is "+f.classString(i.concurrency)));a=i.concurrency}return a="number"==typeof a&&isFinite(a)&&a>=1?a:0,new u(e,n,a,o).promise()}var c=t._getDomain,f=n(333),l=f.tryCatch,h=f.errorObj,p=t._async;f.inherits(u,e),u.prototype._asyncInit=function(){this._init$(void 0,-2)},u.prototype._init=function(){},u.prototype._promiseFulfilled=function(e,n){var r=this._values,o=this.length(),u=this._preservedValues,s=this._limit;if(n<0){if(n=n*-1-1,r[n]=e,s>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(s>=1&&this._inFlight>=s)return r[n]=e,this._queue.push(n),!1;null!==u&&(u[n]=e);var c=this._promise,f=this._callback,p=c._boundValue();c._pushContext();var d=l(f).call(p,e,n,o),v=c._popContext();if(a.checkForgottenReturns(d,v,null!==u?"Promise.filter":"Promise.map",c),d===h)return this._reject(d.e),!0;var y=i(d,this._promise);if(y instanceof t){y=y._target();var g=y._bitField;if(0===(50397184&g))return s>=1&&this._inFlight++,r[n]=y,y._proxy(this,(n+1)*-1),!1;if(0===(33554432&g))return 0!==(16777216&g)?(this._reject(y._reason()),!0):(this._cancel(),!0);d=y._value()}r[n]=d}var m=++this._totalResolved;return m>=o&&(null!==u?this._filter(r,u):this._resolve(r),!0)},u.prototype._drainQueue=function(){for(var t=this._queue,e=this._limit,n=this._values;t.length>0&&this._inFlight<e;){if(this._isResolved())return;var r=t.pop();this._promiseFulfilled(n[r],r)}},u.prototype._filter=function(t,e){for(var n=e.length,r=new Array(n),i=0,o=0;o<n;++o)t[o]&&(r[i++]=e[o]);r.length=i,this._resolve(r)},u.prototype.preservedValues=function(){return this._preservedValues},t.prototype.map=function(t,e){return s(this,t,e,null)},t.map=function(t,e,n,r){return s(t,e,n,r)}}},function(t,e,n){"use strict";var r=Object.create;if(r){var i=r(null),o=r(null);i[" size"]=o[" size"]=0}t.exports=function(t){function e(e,n){var r;if(null!=e&&(r=e[n]),"function"!=typeof r){var i="Object "+f.classString(e)+" has no method '"+f.toString(n)+"'";throw new t.TypeError(i)}return r}function r(t){var n=this.pop(),r=e(t,n);return r.apply(t,this)}function a(t){return t[this]}function u(t){var e=+this;return e<0&&(e=Math.max(0,e+t.length)),t[e]}var s,c,f=n(333),l=f.canEvaluate,h=f.isIdentifier,p=function(t){return new Function("ensureMethod","                                    \n\t        return function(obj) {                                               \n\t            'use strict'                                                     \n\t            var len = this.length;                                           \n\t            ensureMethod(obj, 'methodName');                                 \n\t            switch(len) {                                                    \n\t                case 1: return obj.methodName(this[0]);                      \n\t                case 2: return obj.methodName(this[0], this[1]);             \n\t                case 3: return obj.methodName(this[0], this[1], this[2]);    \n\t                case 0: return obj.methodName();                             \n\t                default:                                                     \n\t                    return obj.methodName.apply(obj, this);                  \n\t            }                                                                \n\t        };                                                                   \n\t        ".replace(/methodName/g,t))(e)},d=function(t){return new Function("obj","                                             \n\t        'use strict';                                                        \n\t        return obj.propertyName;                                             \n\t        ".replace("propertyName",t))},v=function(t,e,n){var r=n[t];if("function"!=typeof r){if(!h(t))return null;if(r=e(t),n[t]=r,n[" size"]++,n[" size"]>512){for(var i=Object.keys(n),o=0;o<256;++o)delete n[i[o]];n[" size"]=i.length-256}}return r};s=function(t){return v(t,p,i)},c=function(t){return v(t,d,o)},t.prototype.call=function(t){for(var e=arguments.length,n=new Array(Math.max(e-1,0)),i=1;i<e;++i)n[i-1]=arguments[i];if(l){var o=s(t);if(null!==o)return this._then(o,void 0,void 0,n,void 0)}return n.push(t),this._then(r,void 0,void 0,n,void 0)},t.prototype.get=function(t){var e,n="number"==typeof t;if(n)e=u;else if(l){var r=c(t);e=null!==r?r:a}else e=a;return this._then(e,void 0,void 0,t,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){function u(t){setTimeout(function(){throw t},0)}function s(t){var e=r(t);return e!==t&&"function"==typeof t._isDisposable&&"function"==typeof t._getDisposer&&t._isDisposable()&&e._setDisposable(t._getDisposer()),e}function c(e,n){function i(){if(a>=c)return f._fulfill();var o=s(e[a++]);if(o instanceof t&&o._isDisposable()){try{o=r(o._getDisposer().tryDispose(n),e.promise)}catch(t){return u(t)}if(o instanceof t)return o._then(i,u,null,null,null)}i()}var a=0,c=e.length,f=new t(o);return i(),f}function f(t,e,n){this._data=t,this._promise=e,this._context=n}function l(t,e,n){this.constructor$(t,e,n)}function h(t){return f.isDisposer(t)?(this.resources[this.index]._setDisposable(t),t.promise()):t}function p(t){this.length=t,this.promise=null,this[t-1]=null}var d=n(333),v=n(340).TypeError,y=n(333).inherits,g=d.errorObj,m=d.tryCatch,_={};f.prototype.data=function(){return this._data},f.prototype.promise=function(){return this._promise},f.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():_},f.prototype.tryDispose=function(t){var e=this.resource(),n=this._context;void 0!==n&&n._pushContext();var r=e!==_?this.doDispose(e,t):null;return void 0!==n&&n._popContext(),this._promise._unsetDisposable(),this._data=null,r},f.isDisposer=function(t){return null!=t&&"function"==typeof t.resource&&"function"==typeof t.tryDispose},y(l,f),l.prototype.doDispose=function(t,e){var n=this.data();return n.call(t,t,e)},p.prototype._resultCancelled=function(){for(var e=this.length,n=0;n<e;++n){var r=this[n];r instanceof t&&r.cancel()}},t.using=function(){var n=arguments.length;if(n<2)return e("you must pass at least 2 arguments to Promise.using");var i=arguments[n-1];if("function"!=typeof i)return e("expecting a function but got "+d.classString(i));var o,u=!0;2===n&&Array.isArray(arguments[0])?(o=arguments[0],n=o.length,u=!1):(o=arguments,n--);for(var s=new p(n),l=0;l<n;++l){var v=o[l];if(f.isDisposer(v)){var y=v;v=v.promise(),v._setDisposable(y)}else{var _=r(v);_ instanceof t&&(v=_._then(h,null,null,{resources:s,index:l},void 0))}s[l]=v}for(var b=new Array(s.length),l=0;l<b.length;++l)b[l]=t.resolve(s[l]).reflect();var w=t.all(b).then(function(t){for(var e=0;e<t.length;++e){var n=t[e];if(n.isRejected())return g.e=n.error(),g;if(!n.isFulfilled())return void w.cancel();t[e]=n.value()}x._pushContext(),i=m(i);var r=u?i.apply(void 0,t):i(t),o=x._popContext();return a.checkForgottenReturns(r,o,"Promise.using",x),r}),x=w.lastly(function(){var e=new t.PromiseInspection(w);return c(s,e)});return s.promise=x,x._setOnCancel(s),x},t.prototype._setDisposable=function(t){this._bitField=131072|this._bitField,this._disposer=t},t.prototype._isDisposable=function(){return(131072&this._bitField)>0},t.prototype._getDisposer=function(){return this._disposer},t.prototype._unsetDisposable=function(){this._bitField=this._bitField&-131073,this._disposer=void 0},t.prototype.disposer=function(t){if("function"==typeof t)return new l(t,this,i());throw new v}}},function(t,e,n){"use strict";t.exports=function(t,e,r){function i(t){this.handle=t}function o(t){return clearTimeout(this.handle),t}function a(t){throw clearTimeout(this.handle),t}var u=n(333),s=t.TimeoutError;i.prototype._resultCancelled=function(){clearTimeout(this.handle)};var c=function(t){return f(+this).thenReturn(t)},f=t.delay=function(n,o){var a,u;return void 0!==o?(a=t.resolve(o)._then(c,null,null,n,void 0),r.cancellation()&&o instanceof t&&a._setOnCancel(o)):(a=new t(e),u=setTimeout(function(){a._fulfill()},+n),r.cancellation()&&a._setOnCancel(new i(u)),a._captureStackTrace()),a._setAsyncGuaranteed(),a};t.prototype.delay=function(t){return f(t,this)};var l=function(t,e,n){var r;r="string"!=typeof e?e instanceof Error?e:new s("operation timed out"):new s(e),u.markAsOriginatingFromRejection(r),t._attachExtraTrace(r),t._reject(r),null!=n&&n.cancel()};t.prototype.timeout=function(t,e){t=+t;var n,u,s=new i(setTimeout(function(){n.isPending()&&l(n,e,u)},t));return r.cancellation()?(u=this.then(),n=u._then(o,a,void 0,s,void 0),n._setOnCancel(s)):n=this._then(o,a,void 0,s,void 0),n}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){function u(e,n,r){for(var o=0;o<n.length;++o){r._pushContext();var a=p(n[o])(e);if(r._popContext(),a===h){r._pushContext();var u=t.reject(h.e);return r._popContext(),u}var s=i(a,r);if(s instanceof t)return s}return null}function s(e,n,i,o){if(a.cancellation()){var u=new t(r),s=this._finallyPromise=new t(r);this._promise=u.lastly(function(){return s}),u._captureStackTrace(),u._setOnCancel(this)}else{var c=this._promise=new t(r);c._captureStackTrace()}this._stack=o,this._generatorFunction=e,this._receiver=n,this._generator=void 0,this._yieldHandlers="function"==typeof i?[i].concat(d):d,this._yieldedPromise=null,this._cancellationPhase=!1}var c=n(340),f=c.TypeError,l=n(333),h=l.errorObj,p=l.tryCatch,d=[];l.inherits(s,o),s.prototype._isResolved=function(){return null===this._promise},s.prototype._cleanup=function(){this._promise=this._generator=null,a.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)},s.prototype._promiseCancelled=function(){if(!this._isResolved()){var e,n="undefined"!=typeof this._generator.return;if(n)this._promise._pushContext(),e=p(this._generator.return).call(this._generator,void 0),this._promise._popContext();else{var r=new t.CancellationError("generator .return() sentinel");t.coroutine.returnSentinel=r,this._promise._attachExtraTrace(r),this._promise._pushContext(),e=p(this._generator.throw).call(this._generator,r),this._promise._popContext()}this._cancellationPhase=!0,this._yieldedPromise=null,this._continue(e)}},s.prototype._promiseFulfilled=function(t){this._yieldedPromise=null,this._promise._pushContext();var e=p(this._generator.next).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._promiseRejected=function(t){this._yieldedPromise=null,this._promise._attachExtraTrace(t),this._promise._pushContext();var e=p(this._generator.throw).call(this._generator,t);this._promise._popContext(),this._continue(e)},s.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof t){var e=this._yieldedPromise;this._yieldedPromise=null,e.cancel()}},s.prototype.promise=function(){return this._promise},s.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._promiseFulfilled(void 0)},s.prototype._continue=function(e){var n=this._promise;if(e===h)return this._cleanup(),this._cancellationPhase?n.cancel():n._rejectCallback(e.e,!1);var r=e.value;if(e.done===!0)return this._cleanup(),this._cancellationPhase?n.cancel():n._resolveCallback(r);var o=i(r,this._promise);if(!(o instanceof t)&&(o=u(o,this._yieldHandlers,this._promise),null===o))return void this._promiseRejected(new f("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",String(r))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));o=o._target();var a=o._bitField;0===(50397184&a)?(this._yieldedPromise=o,o._proxy(this,null)):0!==(33554432&a)?t._async.invoke(this._promiseFulfilled,this,o._value()):0!==(16777216&a)?t._async.invoke(this._promiseRejected,this,o._reason()):this._promiseCancelled()},t.coroutine=function(t,e){if("function"!=typeof t)throw new f("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var n=Object(e).yieldHandler,r=s,i=(new Error).stack;return function(){var e=t.apply(this,arguments),o=new r(void 0,void 0,n,i),a=o.promise();return o._generator=e,o._promiseFulfilled(void 0),a}},t.coroutine.addYieldHandler=function(t){if("function"!=typeof t)throw new f("expecting a function but got "+l.classString(t));d.push(t)},t.spawn=function(n){if(a.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof n)return e("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var r=new s(n,this),i=r.promise();return r._run(t.spawn),i}}},function(t,e,n){"use strict";t.exports=function(t){function e(t,e){var n=this;if(!o.isArray(t))return r.call(n,t,e);var i=u(e).apply(n._boundValue(),[null].concat(t));i===s&&a.throwLater(i.e)}function r(t,e){var n=this,r=n._boundValue(),i=void 0===t?u(e).call(r,null):u(e).call(r,null,t);i===s&&a.throwLater(i.e)}function i(t,e){var n=this;if(!t){var r=new Error(t+"");r.cause=t,t=r}var i=u(e).call(n._boundValue(),t);i===s&&a.throwLater(i.e)}var o=n(333),a=t._async,u=o.tryCatch,s=o.errorObj;t.prototype.asCallback=t.prototype.nodeify=function(t,n){if("function"==typeof t){var o=r;void 0!==n&&Object(n).spread&&(o=e),this._then(o,i,void 0,this,t)}return this}}},function(t,e,n){"use strict";t.exports=function(t,e){function r(t){return!x.test(t)}function i(t){try{return t.__isPromisified__===!0}catch(t){return!1}}function o(t,e,n){var r=p.getDataPropertyOrDefault(t,e+n,b);return!!r&&i(r)}function a(t,e,n){for(var r=0;r<t.length;r+=2){var i=t[r];if(n.test(i))for(var o=i.replace(n,""),a=0;a<t.length;a+=2)if(t[a]===o)throw new m("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",e))}}function u(t,e,n,r){for(var u=p.inheritedDataKeys(t),s=[],c=0;c<u.length;++c){var f=u[c],l=t[f],h=r===E||E(f,l,t);"function"!=typeof l||i(l)||o(t,f,e)||!r(f,l,t,h)||s.push(f,l)}return a(s,e,n),s}function s(n,r,i,o,a,u){function s(){var i=r;r===h&&(i=this);var o=new t(e);o._captureStackTrace();var a="string"==typeof f&&this!==c?this[f]:n,s=d(o,u);try{a.apply(i,v(arguments,s))}catch(t){o._rejectCallback(y(t),!0,!0)}return o._isFateSealed()||o._setAsyncGuaranteed(),o}var c=function(){return this}(),f=n;return"string"==typeof f&&(n=o),p.notEnumerableProp(s,"__isPromisified__",!0),s}function c(t,e,n,r,i){for(var o=new RegExp(k(e)+"$"),a=u(t,e,o,n),s=0,c=a.length;s<c;s+=2){var f=a[s],l=a[s+1],d=f+e;if(r===A)t[d]=A(f,h,f,l,e,i);else{var v=r(l,function(){return A(f,h,f,l,e,i)});p.notEnumerableProp(v,"__isPromisified__",!0),t[d]=v}}return p.toFastProperties(t),t}function f(t,e,n){return A(t,e,void 0,t,null,n)}var l,h={},p=n(333),d=n(347),v=p.withAppended,y=p.maybeWrapAsError,g=p.canEvaluate,m=n(340).TypeError,_="Async",b={__isPromisified__:!0},w=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],x=new RegExp("^(?:"+w.join("|")+")$"),E=function(t){return p.isIdentifier(t)&&"_"!==t.charAt(0)&&"constructor"!==t},k=function(t){return t.replace(/([$])/,"\\$")},P=function(t){for(var e=[t],n=Math.max(0,t-1-3),r=t-1;r>=n;--r)e.push(r);for(var r=t+1;r<=3;++r)e.push(r);return e},S=function(t){return p.filledRange(t,"_arg","")},M=function(t){return p.filledRange(Math.max(t,3),"_arg","")},O=function(t){return"number"==typeof t.length?Math.max(Math.min(t.length,1024),0):0};l=function(n,r,i,o,a,u){function s(t){var e,n=S(t).join(", "),i=t>0?", ":"";return e=g?"ret = callback.call(this, {{args}}, nodeback); break;\n":void 0===r?"ret = callback({{args}}, nodeback); break;\n":"ret = callback.call(receiver, {{args}}, nodeback); break;\n",e.replace("{{args}}",n).replace(", ",i)}function c(){for(var t="",e=0;e<l.length;++e)t+="case "+l[e]+":"+s(l[e]);return t+="                                                             \n\t        default:                                                             \n\t            var args = new Array(len + 1);                                   \n\t            var i = 0;                                                       \n\t            for (var i = 0; i < len; ++i) {                                  \n\t               args[i] = arguments[i];                                       \n\t            }                                                                \n\t            args[i] = nodeback;                                              \n\t            [CodeForCall]                                                    \n\t            break;                                                           \n\t        ".replace("[CodeForCall]",g?"ret = callback.apply(this, args);\n":"ret = callback.apply(receiver, args);\n")}var f=Math.max(0,O(o)-1),l=P(f),g="string"==typeof n||r===h,m="string"==typeof n?"this != null ? this['"+n+"'] : fn":"fn",_="'use strict';                                                \n\t        var ret = function (Parameters) {                                    \n\t            'use strict';                                                    \n\t            var len = arguments.length;                                      \n\t            var promise = new Promise(INTERNAL);                             \n\t            promise._captureStackTrace();                                    \n\t            var nodeback = nodebackForPromise(promise, "+u+");   \n\t            var ret;                                                         \n\t            var callback = tryCatch([GetFunctionCode]);                      \n\t            switch(len) {                                                    \n\t                [CodeForSwitchCase]                                          \n\t            }                                                                \n\t            if (ret === errorObj) {                                          \n\t                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\n\t            }                                                                \n\t            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \n\t            return promise;                                                  \n\t        };                                                                   \n\t        notEnumerableProp(ret, '__isPromisified__', true);                   \n\t        return ret;                                                          \n\t    ".replace("[CodeForSwitchCase]",c()).replace("[GetFunctionCode]",m);return _=_.replace("Parameters",M(f)),new Function("Promise","fn","receiver","withAppended","maybeWrapAsError","nodebackForPromise","tryCatch","errorObj","notEnumerableProp","INTERNAL",_)(t,o,r,v,y,d,p.tryCatch,p.errorObj,p.notEnumerableProp,e)};var A=g?l:s;t.promisify=function(t,e){if("function"!=typeof t)throw new m("expecting a function but got "+p.classString(t));if(i(t))return t;e=Object(e);var n=void 0===e.context?h:e.context,o=!!e.multiArgs,a=f(t,n,o);return p.copyDescriptors(t,a,r),a},t.promisifyAll=function(t,e){if("function"!=typeof t&&"object"!=typeof t)throw new m("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");e=Object(e);var n=!!e.multiArgs,r=e.suffix;"string"!=typeof r&&(r=_);var i=e.filter;"function"!=typeof i&&(i=E);var o=e.promisifier;if("function"!=typeof o&&(o=A),!p.isIdentifier(r))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var a=p.inheritedDataKeys(t),u=0;u<a.length;++u){var s=t[a[u]];"constructor"!==a[u]&&p.isClass(s)&&(c(s.prototype,r,i,o,n),c(s,r,i,o,n))}return c(t,r,i,o,n)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(t){var e,n=!1;if(void 0!==u&&t instanceof u)e=l(t),n=!0;else{var r=f.keys(t),i=r.length;e=new Array(2*i);for(var o=0;o<i;++o){var a=r[o];e[o]=t[a],e[o+i]=a}}this.constructor$(e),this._isMap=n,this._init$(void 0,n?-6:-3)}function a(e){var n,a=r(e);return c(a)?(n=a instanceof t?a._then(t.props,void 0,void 0,void 0,void 0):new o(a).promise(),a instanceof t&&n._propagateFrom(a,2),n):i("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var u,s=n(333),c=s.isObject,f=n(334);"function"==typeof Map&&(u=Map);var l=function(){function t(t,r){this[e]=t,this[e+n]=r,e++}var e=0,n=0;return function(r){n=r.size,e=0;var i=new Array(2*r.size);return r.forEach(t,i),i}}(),h=function(t){for(var e=new u,n=t.length/2|0,r=0;r<n;++r){var i=t[n+r],o=t[r];e.set(i,o)}return e};s.inherits(o,e),o.prototype._init=function(){},o.prototype._promiseFulfilled=function(t,e){this._values[e]=t;var n=++this._totalResolved;if(n>=this._length){var r;if(this._isMap)r=h(this._values);else{r={};for(var i=this.length(),o=0,a=this.length();o<a;++o)r[this._values[o+i]]=this._values[o]}return this._resolve(r),!0}return!1},o.prototype.shouldCopyValues=function(){return!1},o.prototype.getActualLength=function(t){return t>>1},t.prototype.props=function(){return a(this)},t.props=function(t){return a(t)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i){function o(n,o){var s=r(n);if(s instanceof t)return u(s);if(n=a.asArray(n),null===n)return i("expecting an array or an iterable object but got "+a.classString(n));var c=new t(e);void 0!==o&&c._propagateFrom(o,3);for(var f=c._fulfill,l=c._reject,h=0,p=n.length;h<p;++h){var d=n[h];(void 0!==d||h in n)&&t.cast(d)._then(f,l,void 0,c,null)}return c}var a=n(333),u=function(t){return t.then(function(e){return o(e,t)})};t.race=function(t){return o(t,void 0)},t.prototype.race=function(){return o(this,void 0)}}},function(t,e,n){"use strict";t.exports=function(t,e,r,i,o,a){function u(e,n,r,i){this.constructor$(e);var a=h();this._fn=null===a?n:p.domainBind(a,n),void 0!==r&&(r=t.resolve(r),r._attachCancellationCallback(this)),this._initialValue=r,this._currentCancellable=null,i===o?this._eachValues=Array(this._length):0===i?this._eachValues=null:this._eachValues=void 0,this._promise._captureStackTrace(),this._init$(void 0,-5)}function s(t,e){this.isFulfilled()?e._resolve(t):e._reject(t)}function c(t,e,n,i){if("function"!=typeof e)return r("expecting a function but got "+p.classString(e));var o=new u(t,e,n,i);return o.promise()}function f(e){this.accum=e,this.array._gotAccum(e);var n=i(this.value,this.array._promise);return n instanceof t?(this.array._currentCancellable=n,n._then(l,void 0,void 0,this,void 0)):l.call(this,n)}function l(e){var n=this.array,r=n._promise,i=d(n._fn);r._pushContext();var o;o=void 0!==n._eachValues?i.call(r._boundValue(),e,this.index,this.length):i.call(r._boundValue(),this.accum,e,this.index,this.length),o instanceof t&&(n._currentCancellable=o);var u=r._popContext();return a.checkForgottenReturns(o,u,void 0!==n._eachValues?"Promise.each":"Promise.reduce",r),o}var h=t._getDomain,p=n(333),d=p.tryCatch;p.inherits(u,e),u.prototype._gotAccum=function(t){void 0!==this._eachValues&&null!==this._eachValues&&t!==o&&this._eachValues.push(t)},u.prototype._eachComplete=function(t){return null!==this._eachValues&&this._eachValues.push(t),this._eachValues},u.prototype._init=function(){},u.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)},u.prototype.shouldCopyValues=function(){return!1},u.prototype._resolve=function(t){this._promise._resolveCallback(t),
this._values=null},u.prototype._resultCancelled=function(e){return e===this._initialValue?this._cancel():void(this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof t&&this._currentCancellable.cancel(),this._initialValue instanceof t&&this._initialValue.cancel()))},u.prototype._iterate=function(e){this._values=e;var n,r,i=e.length;if(void 0!==this._initialValue?(n=this._initialValue,r=0):(n=t.resolve(e[0]),r=1),this._currentCancellable=n,!n.isRejected())for(;r<i;++r){var o={accum:null,value:e[r],index:r,length:i,array:this};n=n._then(f,void 0,void 0,o,void 0)}void 0!==this._eachValues&&(n=n._then(this._eachComplete,void 0,void 0,this,void 0)),n._then(s,s,void 0,n,this)},t.prototype.reduce=function(t,e){return c(this,t,e,null)},t.reduce=function(t,e,n,r){return c(t,e,n,r)}}},function(t,e,n){"use strict";t.exports=function(t,e,r){function i(t){this.constructor$(t)}var o=t.PromiseInspection,a=n(333);a.inherits(i,e),i.prototype._promiseResolved=function(t,e){this._values[t]=e;var n=++this._totalResolved;return n>=this._length&&(this._resolve(this._values),!0)},i.prototype._promiseFulfilled=function(t,e){var n=new o;return n._bitField=33554432,n._settledValueField=t,this._promiseResolved(e,n)},i.prototype._promiseRejected=function(t,e){var n=new o;return n._bitField=16777216,n._settledValueField=t,this._promiseResolved(e,n)},t.settle=function(t){return r.deprecated(".settle()",".reflect()"),new i(t).promise()},t.prototype.settle=function(){return t.settle(this)}}},function(t,e,n){"use strict";t.exports=function(t,e,r){function i(t){this.constructor$(t),this._howMany=0,this._unwrap=!1,this._initialized=!1}function o(t,e){if((0|e)!==e||e<0)return r("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");var n=new i(t),o=n.promise();return n.setHowMany(e),n.init(),o}var a=n(333),u=n(340).RangeError,s=n(340).AggregateError,c=a.isArray,f={};a.inherits(i,e),i.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var t=c(this._values);!this._isResolved()&&t&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},i.prototype.init=function(){this._initialized=!0,this._init()},i.prototype.setUnwrap=function(){this._unwrap=!0},i.prototype.howMany=function(){return this._howMany},i.prototype.setHowMany=function(t){this._howMany=t},i.prototype._promiseFulfilled=function(t){return this._addFulfilled(t),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)},i.prototype._promiseRejected=function(t){return this._addRejected(t),this._checkOutcome()},i.prototype._promiseCancelled=function(){return this._values instanceof t||null==this._values?this._cancel():(this._addRejected(f),this._checkOutcome())},i.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var t=new s,e=this.length();e<this._values.length;++e)this._values[e]!==f&&t.push(this._values[e]);return t.length>0?this._reject(t):this._cancel(),!0}return!1},i.prototype._fulfilled=function(){return this._totalResolved},i.prototype._rejected=function(){return this._values.length-this.length()},i.prototype._addRejected=function(t){this._values.push(t)},i.prototype._addFulfilled=function(t){this._values[this._totalResolved++]=t},i.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},i.prototype._getRangeError=function(t){var e="Input array must contain at least "+this._howMany+" items but contains only "+t+" items";return new u(e)},i.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},t.some=function(t,e){return o(t,e)},t.prototype.some=function(t){return o(this,t)},t._SomePromiseArray=i}},function(t,e){"use strict";t.exports=function(t,e){var n=t.map;t.prototype.filter=function(t,r){return n(this,t,r,e)},t.filter=function(t,r,i){return n(t,r,i,e)}}},function(t,e){"use strict";t.exports=function(t,e){function n(){return o(this)}function r(t,n){return i(t,n,e,e)}var i=t.reduce,o=t.all;t.prototype.each=function(t){return i(this,t,e,0)._then(n,void 0,void 0,this,void 0)},t.prototype.mapSeries=function(t){return i(this,t,e,e)},t.each=function(t,r){return i(t,r,e,0)._then(n,void 0,void 0,t,void 0)},t.mapSeries=r}},function(t,e){"use strict";t.exports=function(t){function e(t){var e=new n(t),r=e.promise();return e.setHowMany(1),e.setUnwrap(),e.init(),r}var n=t._SomePromiseArray;t.any=function(t){return e(t)},t.prototype.any=function(){return e(this)}}},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new l.Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):l.Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.PointBufferCache=void 0;var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(370),s=n(374),c=n(375),f=n(385),l=n(330);e.PointBufferCache=function(){function t(){i(this,t),this.nodes={},this.recolorTasks=[],this.colorWorkerManager=new f.ColorWorkerManager(5)}return a(t,null,[{key:"getInstance",value:function(){return t.instance||(t.instance=new t),t.instance}}]),a(t,[{key:"setRenderRequestFn",value:function(t){this.renderRequestFunction=t}},{key:"push",value:function(){function t(t,n){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n){var r,i,o,a,s,f,h,p,d,v,y,g,m,_,b,w,x,E,k,P=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=(0,u.checkParam)(e,"data"),i=(0,u.checkParam)(e,"schema"),o=(0,u.checkParam)(e,"treePath"),a=(0,u.checkParam)(e,"totalPoints"),s=(0,u.checkParam)(e,"geoTransform"),f=(0,u.checkParam)(e,"renderSpaceBounds"),h=(0,u.checkParam)(e,"bufferStats"),p=(0,u.checkParam)(e,"pointCloudBufferStats"),d=o.length>1?this.nodes[o.substring(0,o.length-1)]:null,v=Array.from(new Array(8),function(t,e){return P.nodes[o+e]}).filter(function(t){return null!=t}),y=n.filter(function(t){return null!=t}),g={},y.forEach(function(t,e){g[e]={parentNode:d?d.stagingAttributes[e]:null,childrenNodes:v.map(function(t){return t.stagingAttributes[e]})}}),m={geoTransform:s,renderSpaceBounds:f,bufferStats:h,pointCloudBufferStats:p,treePath:o},t.next=9,l.Promise.all(y.map(function(t,e){return t.prepare(m,g[e].parentNode,g[e].childrenNodes)}));case 9:return _=3+y.length,b=new Float32Array(a*_),this._lockNode(e),t.next=14,this._copyAndColorBuffer(b,e,y,_);case 14:return w=t.sent,b=w.outputBuffer,y=w.brushes,e.data=w.inputBuffer,this._releaseNode(e),x={},y.forEach(function(t,e){var n=t.stagingAttributes(m,g[e].parentNode,g[e].childrenNodes);x[e]=n}),t.next=23,l.Promise.all(y.map(function(t){return t.unprepare(m)}));case 23:return E={update:!1,buf:b},this.nodes[o]={stagingAttributes:x,data:E,dataPointSize:_,treePath:o,inputBuffer:e.data,bufferStats:e.bufferStats,schema:i,renderSpaceBounds:f,totalPoints:a},k=[],y.forEach(function(t,e){var n=t.nodeSelectionStrategy(m),r=n.strategy,i=n.params,a=[];if(r===c.NodeSelectionStrategy.ALL?a=Object.keys(P.nodes).filter(function(t){return t!==o}).sort().map(function(t){return P.nodes[t]}):r===c.NodeSelectionStrategy.ANCESTORS&&(a=P._nodeAncestors(o)),a.length>0)for(var u=0,s=a.length;u<s;u++){var f=a[u],l=f.stagingAttributes[e],h=null==l||t.bufferNeedsRecolor(m,i,l);h&&k.push([t,f,e])}}),this._queueRecolorTasks(k,m.geoTransform,m.pointCloudBufferStats),t.abrupt("return",E);case 29:case"end":return t.stop()}},t,this)}));return t}()},{key:"remove",value:function(t){delete this.nodes[t];for(var e=[],n=0,r=this.recolorTasks.length;n<r;n++){var i=this.recolorTasks[n];i[1].treePath!=t&&e.push(i)}this.recolorTasks=e}},{key:"flush",value:function(){this.nodes={},this.recolorTasks=[],this._recolorRunning=!1}},{key:"_nodeAncestors",value:function(t){var e=t,n=[];if(e.length>1)for(e=e.substring(0,e.length-1);e.length>0;){var r=this.nodes[e];r&&n.push(r),e=e.substring(0,e.length-1)}return n}},{key:"_copyAndColorBuffer",value:function(){function t(t,n,r,i){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r,i){var o,a,u,f,l,h;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.totalPoints,a=n.data,u=n.schema,f=s.BrushFactory.beginTransferForBrushes(c.TransferDirection.MAIN_TO_WORKER,r),t.next=4,this.colorWorkerManager.push({params:{brushes:f.params,totalPoints:o,inputBuffer:a,schema:u,outputBuffer:e,outputPointSize:i},transferList:[a.buffer,e.buffer].concat(f.transferList)});case 4:return l=t.sent,h=s.BrushFactory.endTransferOntoBrushes(c.TransferDirection.WORKER_TO_MAIN,r,l.brushes),t.abrupt("return",{inputBuffer:l.inputBuffer,outputBuffer:l.outputBuffer,brushes:h});case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"_lockNode",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){var n,r,i=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.treePath,r=this.lockedNodes||{},r[n]){t.next=6;break}return r[n]={waiting:[]},this.lockedNodes=r,t.abrupt("return");case 6:return t.abrupt("return",new l.Promise(function(t,e){r[n].waiting.push([t,e]),i.lockedNodes=r}));case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"_releaseNode",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){var n,r,i,a,u,s,c;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n=e.treePath,r=this.lockedNodes||{},r[n]&&(i=r[n].waiting,0===i.length?(delete r[n],this.lockedNodes=r):(a=i.shift(),u=o(a,2),s=u[0],c=u[1],r[n].waiting=i,this.lockedNodes=r,s()));case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"_recolorNode",value:function(){function t(t,n,r,i){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r,i){var o,a,u,s,c,f,h,p,d,v,y,g,m,_,b,w,x,E=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=e.totalPoints,a=e.dataPointSize,u=e.treePath,s=e.bufferStats,c=e.inputBuffer,f=e.renderSpaceBounds,h=e.schema,p=e.stagingAttributes,t.next=3,l.Promise.delay(0);case 3:return d=u.length>1?this.nodes[u.substring(0,u.length-1)]:null,v=Array.from(new Array(8),function(t,e){return E.nodes[u+e]}).filter(function(t){return null!=t}),y=[],g=[],m=[],n.forEach(function(t,e){y[e]={geoTransform:r,bufferStats:s,pointCloudBufferStats:i,renderSpaceBounds:f,treePath:u,lastStagedAttributes:p[e]},d&&(g[e]=d.stagingAttributes[e]),m[e]=v.map(function(t){return t.stagingAttributes[e]}).filter(function(t){return null!=t})}),t.next=11,l.Promise.all(n.map(function(t,e){if(t)return t.prepare(y[e],g[e],m[e])}));case 11:return _={schema:h,totalPoints:o,data:c},t.next=14,this._lockNode(e);case 14:return b=e.data.buf,w=e.data.update,t.next=18,this._copyAndColorBuffer(b,_,n,a);case 18:return x=t.sent,e.data.buf=b=x.outputBuffer,e.data.update=w,e.inputBuffer=_.data=x.inputBuffer,n=x.brushes,t.next=25,this._releaseNode(e);case 25:return n.forEach(function(t,n){if(t){var r=t.stagingAttributes(y[n],g[n],m[n]);e.stagingAttributes[n]=r}}),t.next=28,l.Promise.all(n.map(function(t,e){if(t)return t.unprepare(y[e])}));case 28:case"end":return t.stop()}},t,this)}));return t}()},{key:"_queueRecolorTasks",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r){var i,a,u,s,c,f,h,p,d,v,y,g,m,_,b,w;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(i=[],a=0,u=e.length;a<u;a++){for(s=o(e[a],3),c=s[0],f=s[1],h=s[2],p=-1,d=0,v=this.recolorTasks.length;d<v&&p==-1;d++)y=o(this.recolorTasks[d],3),g=y[0],m=y[1],_=y[2],g.treePath===f.treePath&&(p=d);p>=0?(b=this.recolorTasks[p],this.recolorTasks.splice(p,1),b[1][h]=c,this.recolorTasks.push(b)):(w=[],w[h]=c,this.recolorTasks.push([f,w,{geoTransform:n,pointCloudBufferStats:r}]))}return this._recolorRunning||i.push(this._startRecolor()),t.abrupt("return",l.Promise.all(i));case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"_startRecolor",value:function(){function t(){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(){var e,n,r,i,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this._recolorRunning=!0;case 1:if(!(this.recolorTasks.length>0)){t.next=11;break}if(e=this.recolorTasks.shift(),!e){t.next=9;break}return n=o(e,3),r=n[0],i=n[1],a=n[2],t.next=7,this._recolorNode(r,i,a.geoTransform,a.pointCloudBufferStats);case 7:r.data.update=!0,this.renderRequestFunction&&this.renderRequestFunction();case 9:t.next=1;break;case 11:this._recolorRunning=!1;case 12:case"end":return t.stop()}},t,this)}));return t}()}]),t}()},function(t,e,n){(function(e){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){return function(){var e=t.apply(this,arguments);return new d(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):d.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function a(t){return(255&t)<<24|(65280&t)<<8|t>>8&65280|t>>24&255}function u(t,e){return new d(function(n,r){var i=new XMLHttpRequest;i.onreadystatechange=function(){4==i.readyState&&(v(i.status)?n([i.getResponseHeader("content-type"),i.responseText]):r(new Error("unsuccessful code: "+i.status)))},i.open("GET",t,!0),i.withCredentials=e.creds===!0,i.send()})}function s(t,e,n,r){var i=void 0,o=void 0,a=void 0;if(0==e)i=o=a=n;else{var u=n<.5?n*(1+e):n+e-n*e,s=2*n-u;i=A(s,u,t+1/3),o=A(s,u,t),a=A(s,u,t-1/3)}var c=null==r?[0,0,0]:r;return c[0]=Math.round(255*i),c[1]=Math.round(255*o),c[2]=Math.round(255*a),c}var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=function(){var t=i(regeneratorRuntime.mark(function t(e,n){var r,i,o,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u(e,n);case 2:if(r=t.sent,i=f(r,2),o=i[0],a=i[1],o.match(/^application\/json/)){t.next=8;break}throw new Error("The recieved data type was not JSON, it was: "+o);case 8:return t.abrupt("return",JSON.parse(a.toString("utf-8")));case 9:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),h=n(371).vec3,p=n(372),d=n(330),v=(d.coroutine,function(t){return 2==Math.floor(t/100)}),y=function(t){return p.pairs(t).map(function(t){var e=f(t,2),n=e[0],r=e[1];return n+"="+encodeURIComponent(JSON.stringify(r))}).join("&")},g=function(t,e,n){return new d(function(r,i){var o=new XMLHttpRequest,u=t+"?"+y(e);o.open("GET",u),o.withCredentials=n.creds===!0,o.responseType="arraybuffer",o.onload=function(t){if(4===this.readyState)if(200===this.status){var e=this.response,n=new DataView(e,e.byteLength-4,4),o=a(n.getUint32(0));e=e.slice(0,e.byteLength-4),r({contentType:this.getResponseHeader("content-type"),response:e,numPoints:o})}else i(new Error("getBinary failed with status:"+this.status))},o.onerror=function(t){i(t)},o.onabort=function(){i(new Error("request aborted."))},o.send()})},m=g,_=function(t){var e=t.reduce(function(t,e){return t+e.length},0),n=new Float32Array(e),r=0;return t.forEach(function(t){n.set(t,r),r+=t.length}),n},b=function(t){var e=function t(e,n){if(!e&&!n)return null;if(!e&&n)return n;if(e&&!n)return e;var r=p.map(n,function(n,r){return p.isObject(n)?[r,t(n,e[r])]:p.isArray(n)?[r,n.concat(e[r])]:[r,(e[r]||0)+n]}),i=p.zipObject(r);return i};return t.reduce(e,{})},w=function(t,e,n){var r;r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),r.onreadystatechange=function(){4==r.readyState&&(v(r.status)?n(null,r.responseText):n(new Error("unsuccessful code: "+r.status)))},r.ontimeout=function(){n(new Error("Timeout"))},r.open("GET",t,!0),r.timeout=e,r.send()},x=function(t,e,n){var r=new XMLHttpRequest,i=[];for(var o in e)i.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));i=i.join("&"),r.open("PUT",t,!0),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.onreadystatechange=function(){4==r.readyState&&(v(r.status)?n(null,r.responseText):n(new Error("Unsuccessful error code:",r.status)))},r.send(i)},E=function(t,e,n){return Math.min(n,Math.max(t,e))},k=function(t){var e=[t.mins[0]+(t.maxs[0]-t.mins[0])/2,t.mins[1]+(t.maxs[1]-t.mins[1])/2,t.mins[2]+(t.maxs[2]-t.mins[2])/2];return[-e[0],e[2],e[1]]},P=function(t,e){return h.distance([t[0],0,t[2]],[e[0],0,e[2]])},S=function(t,e){var n=t.mins[0],r=t.maxs[0],i=t.mins[1],o=t.maxs[1],a=-e[0],u=e[2];return a>=n&&a<r&&u>=i&&u<o},M=function(t){var e=0,n=0;return(t.clientX||t.clientY)&&document.body&&null!=document.body.scrollLeft&&(e=t.clientX+document.body.scrollLeft,n=t.clientY+document.body.scrollTop),(t.clientX||t.clientY)&&"CSS1Compat"==document.compatMode&&document.documentElement&&null!=document.documentElement.scrollLeft&&(e=t.clientX+document.documentElement.scrollLeft,n=t.clientY+document.documentElement.scrollTop),(t.pageX||t.pageY)&&(e=t.pageX,n=t.pageY),[e,n]},O=function(t){var e=void 0==t.offsetX?t.layerX:t.offsetX,n=void 0==t.offsetY?t.layerY:t.offsetY;return[e,n]},A=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},C=function(){return window.performance?window.performance.now():Date.now()},T=function(){return C()},R=function(t){var e=C();return e-t},j=function(t,e){this.to=t,this.cb=e,this.timer=null,this.v=void 0};j.prototype.val=function(t){if(this.v=t,null!==this.timer&&(clearTimeout(this.timer),this.timer=null),void 0!==this.v){var n=this;this.timer=setTimeout(function(){n.timer=null,e.nextTick(n.cb.bind(null,n.v))},this.to)}},j.prototype.simulateVal=function(){this.v&&this.val(this.v)},j.prototype.forceTrigger=function(){this.v&&(null!==this.timer&&(clearTimeout(this.timer),this.timer=null),e.nextTick(o.cb.bind(null,o.v)))};var I=function(){function t(e){r(this,t),this.renderer=e,this.lastCapture=null,this.lastCaptureRes=null}return c(t,[{key:"captureForBounds",value:function(t,e,n){var r=mat4.identity(mat4.create());mat4.rotateX(r,r,1.5705);var i=[n[0],e[1],e[2]],o=[e[0],n[1],n[2]],a=h.transformMat4(h.create(),i,r),u=h.transformMat4(h.create(),o,r),s=mat4.ortho(mat4.create(),a[0],u[0],u[1],a[1],-1e6,1e6),c=mat4.multiply(mat4.create(),s,r);this.lastCapture=this.renderer.projectToImage(c,1,t),this.lastCaptureRes=t,this.lastCaptureMins=e,this.lastCaptureMaxs=n}},{key:"captureForRadius",value:function(t,e,n){this.captureForBounds(t,h.subtract(h.create(),e,[n,n,n]),h.add(h.create(),e,[n,n,n]))}},{key:"worldCoordinatesToPixel",value:function(t){if(!this.lastCapture)throw new Error("Nothing has been captured");var e=this.lastCaptureMins,n=this.lastCaptureMaxs,r=1-(t[0]-e[0])/(n[0]-e[0]),i=1-(t[2]-e[2])/(n[2]-e[2]);return[Math.floor((this.lastCaptureRes-1)*r),Math.floor((this.lastCaptureRes-1)*i)]}},{key:"pixelToWorldCoordinates",value:function(t,e){if(!this.lastCapture)throw new Error("Nothing has been captured");if(t>=this.lastCaptureRes||e>=this.lastCaptureRes)throw new Error("Index out of range");var n=this.lastCaptureMins,r=this.lastCaptureMaxs;return[n[0]+t*(r[0]-n[0])/this.lastCaptureRes,this.readPixel(t,e),n[2]+e*(r[2]-n[2])/this.lastCaptureRes]}},{key:"readPixel",value:function(t,e){if(!this.lastCapture)throw new Error("Nothing has been captured");if(t<0||t>=this.lastCaptureRes||e<0||e>=this.lastCaptureRes)throw new Error("Coordinates out of bounds");return this.lastCapture[e*this.lastCaptureRes+t]}},{key:"toDataURL",value:function(t){if(!this.lastCapture)throw new Error("Nothing has been captured");for(var e=Number.MIN_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,r=this.lastCapture,i=this.lastCaptureRes,o=0;o<r.length;o++)e=Math.max(e,r[o]),n=Math.min(n,r[o]);var a=document.createElement("canvas");a.width=a.height=i;for(var u=a.getContext("2d"),s=u.createImageData(i,i),c=0,f=0;f<r.length;f++){var l=r[f],h=void 0;if(Math.abs(l)<1e-6)h=0;else{var p=(l-n)/(e-n);h=Math.floor(255*p)}s.data[c]=h,s.data[c+1]=h,s.data[c+2]=h,s.data[c+3]=255,c+=4}return u.putImageData(s,0,0),a.toDataURL(t)}},{key:"rawData",get:function(){return this.lastCapture}}]),t}(),F=function(t){return(t||"id")+"-"+Math.random().toFixed(20).substring(2)},L=function(t,e){var n=f(e,2),r=n[0],i=n[1],o=t.pickPoint(r,i);return Math.abs(o[0])<1e-5&&Math.abs(o[1])<1e-5&&Math.abs(o[2])<1e-5?null:o},N=function(t,e){var n=f(e,2),r=n[0],i=n[1];return t.pickUIPoint(r,i)},B=function(){return 0===navigator.platform.indexOf("Win")},D=function(){return 0===navigator.platform.indexOf("Linux")},U=function(){var t=window.chrome,e=window.navigator.vendor;return null!==t&&void 0!==t&&"Google Inc."===e},z=function(t,e,n,r,i){var o=(n-t)/(e-t+1e-5);return o=Math.max(0,Math.min(1,o)),r+o*(i-r)},q=function(t){var e=t[0],n=t[1],r=t[2];return e/16777216+n/65536+r/256},Y=function(t){var e=t.indexOf("?");if(e===-1)return[t,{}];var n=t.substring(e+1),r=n.split("&"),i=r.reduce(function(t,e){var n=f(t,2),r=n[0],i=n[1],o=e.split("="),a=f(o,2),u=a[0],s=a[1];return 0===u.indexOf("pl-")?[r,i.concat([u.substring(3),decodeURIComponent(s)])]:[r.concat([e]),i]},[[],[]]),o=f(i,2),a=o[0],u=o[1],s={};return u.forEach(function(t){var e=f(t,2),n=e[0],r=e[1];s[n]=r}),[t.substring(0,e)+"?"+a.join("&"),s]},H=function(t){var e=t.indexOf("?");if(e===-1)return[t,{}];var n=t.substring(e+1),r=n.split("&"),i={};return r.forEach(function(t){var e=t.split("="),n=f(e,2),r=n[0],o=n[1];i[r]=decodeURIComponent(o)}),[t.substring(0,e),i]},V=function(t,e,n,r){return h.lerp(t,e,n,r),t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),t},G=function(t){if(!t)return null;var e=t.match(/^#([0-9a-f]{6})$/i);if(!e)return null;var n=e[1];return[parseInt(n.substr(0,2),16)/255,parseInt(n.substr(2,2),16)/255,parseInt(n.substr(4,2),16)/255]},W=function(){for(var t=function(t){return t.match(/^https?:\/\//)?t:"http://"+t},e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.slice(1).reduce(function(t,e){return"/"===t[t.length-1]?t+e:t+"/"+e},t(n[0]))},X=function(t,e,n){if(!t)throw new Error("Source object is not specified");var r=t[e];if(null==r){if(void 0!==n)return n;throw new Error("Missing required field: "+e+" among: "+Object.keys(t).join(", "))}return r},$=function(t){if(p.isArray(t)&&6===t.length)return[t[0]+.5*(t[3]-t[0]),t[1]+.5*(t[4]-t[1]),t[2]+.5*(t[5]-t[2])];throw new Error("Invalid argument, need an array with 6 elements")},Q=function(t){var e=t.split("?");if(e.length>2)throw new Error("Malformed spec, multiple ?, encode your URLs if you're specifying them as parameters");var n=e[0],r=e[1],i=n.match(/^([a-z]+):\/\/(\S+)$/);if(!i)throw new Error("Malformed spec, should start with a scheme://name, where scheme is all small alphanumeric characters, matched: "+n);var o=i[1],a=i[2],u={};if(r){var s=r.split("&");s.forEach(function(t){var e=t.split("=");if(2!==e.length)throw new Error("Invalid parameter syntax for: "+t);var n=f(e,2),r=n[0],i=n[1],o=decodeURIComponent(i);u[r]&&!Array.isArray(u[r])&&(u[r]=[u[r]]),Array.isArray(u[r])?o&&u[r].push(o):u[r]=o?o:null})}return{scheme:o,name:a,params:u}},J=function(t){for(var e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,r=0,i=t.length;r<i;r++){var o=t[r];e>o&&(e=o),n<o&&(n=o)}return[e,n]},K=function(t,e){var n=t,r=e;return n[0]<=r[0]&&n[1]<=r[1]&&n[2]<=r[2]&&n[3]>=r[3]&&n[4]>=r[4]&&n[5]>=r[5]},Z=function(t,e){return t[0]==e[0]&&t[1]==e[1]&&t[2]==e[2]&&t[3]==e[3]&&t[4]==e[4]&&t[5]==e[5]},tt=function(t){var e=Number.MAX_SAFE_INTEGER,n=Number.MAX_SAFE_INTEGER,r=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER,a=Number.MIN_SAFE_INTEGER;return t.forEach(function(t){e>t[0]&&(e=t[0]),n>t[1]&&(n=t[1]),r>t[2]&&(r=t[2]),i<t[3]&&(i=t[3]),o<t[4]&&(o=t[4]),a<t[5]&&(a=t[5])}),[e,n,r,i,o,a]},et=function(t,e){for(var n in e){var r=e[n],i=t[n]?t[n]:new Map,o=!0,a=!1,u=void 0;try{for(var s,c=r.keys()[Symbol.iterator]();!(o=(s=c.next()).done);o=!0){var f=s.value,l=i.get(f)||0;l+=r.get(f),i.set(f,l)}}catch(t){a=!0,u=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw u}}t[n]=i}return t},nt=function(t){for(var e=/\[(\d+)-(\d+)\]/,n=null;null!=(n=e.exec(t));){var r=parseInt(n[1]),i=parseInt(n[2]);if(r>i)throw new Error("Invalid range, start is greater than end:"+t);var o=r+Math.floor(Math.random()*(i-r+1));t=t.replace(n[0],o.toString())}return t},rt=function(t,e){var n=[],r=function(t){return t.match(/^https?:\/\//)?t:"http://"+t};return t.forEach(function(t){var i=t.indexOf("@"),o=null,a=null;if(i<0){if(!e)throw new Error("A resource without a server was specified, but the fallback server is not defined: "+t);o=t,a=r(e)}else o=t.substr(0,i),a=r(t.substr(i+1));n.push({resource:o,server:a})}),n};t.exports={makeQueryString:y,getBinary:m,joinFloatBuffers:_,mergeStats:b,getJson:l,get:u,getWithTimeout:w,put:x,clamp:E,geocenter:k,geodist:P,ginside:S,getxy:O,getxyScreen:M,TriggeredDispatch:j,HeightmapCapture:I,perf_start:T,perf_end:R,hslToRgb:s,randomId:F,pickPoint:L,pickUIPoint:N,isWindows:B,isLinux:D,isChrome:U,maprange:z,compressColor:q,parsePlasioParams:Y,parseURLParams:H,interpolateColor:V,parseColor:G,joinPath:W,checkParam:X,boundsCenter:$,joinBounds:tt,parseBrushSpec:Q,minmax:J,enclosesBounds:K,equalBounds:Z,accumulateStats:et,pickOne:nt,parseResources:rt}}).call(e,n(332))},function(t,e,n){!function(e,n){t.exports=n()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";function r(t){e.ARRAY_TYPE=u=t}function i(t){return t*s}function o(t,e){return Math.abs(t-e)<=a*Math.max(1,Math.abs(t),Math.abs(e))}Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=r,e.toRadian=i,e.equals=o;var a=e.EPSILON=1e-6,u=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,s=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new F.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function o(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function a(t){var e=new F.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function s(t,e,n,r,i,o,a,u,s){var c=new F.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=i,c[5]=o,c[6]=a,c[7]=u,c[8]=s,c}function c(t,e,n,r,i,o,a,u,s,c){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t}function f(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function l(t,e){if(t===e){var n=e[1],r=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=f*a-u*c,h=-f*o+u*s,p=c*o-a*s,d=n*l+r*h+i*p;return d?(d=1/d,t[0]=l*d,t[1]=(-f*r+i*c)*d,t[2]=(u*r-i*a)*d,t[3]=h*d,t[4]=(f*n-i*s)*d,t[5]=(-u*n+i*o)*d,t[6]=p*d,t[7]=(-c*n+r*s)*d,t[8]=(a*n-r*o)*d,t):null}function p(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8];return t[0]=a*f-u*c,t[1]=i*c-r*f,t[2]=r*u-i*a,t[3]=u*s-o*f,t[4]=n*f-i*s,t[5]=i*o-n*u,t[6]=o*c-a*s,t[7]=r*s-n*c,t[8]=n*a-r*o,t}function d(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],c=t[8];return e*(c*o-a*s)+n*(-c*i+a*u)+r*(s*i-o*u)}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1],d=n[2],v=n[3],y=n[4],g=n[5],m=n[6],_=n[7],b=n[8];return t[0]=h*r+p*a+d*c,t[1]=h*i+p*u+d*f,t[2]=h*o+p*s+d*l,t[3]=v*r+y*a+g*c,t[4]=v*i+y*u+g*f,t[5]=v*o+y*s+g*l,t[6]=m*r+_*a+b*c,t[7]=m*i+_*u+b*f,t[8]=m*o+_*s+b*l,t}function y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=n[0],p=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=u,t[5]=s,t[6]=h*r+p*a+c,t[7]=h*i+p*u+f,t[8]=h*o+p*s+l,t}function g(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=Math.sin(n),p=Math.cos(n);return t[0]=p*r+h*a,t[1]=p*i+h*u,t[2]=p*o+h*s,t[3]=p*a-h*r,t[4]=p*u-h*i,t[5]=p*s-h*o,t[6]=c,t[7]=f,t[8]=l,t}function m(t,e,n){var r=n[0],i=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function _(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function b(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function w(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function x(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function E(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,h=i*a,p=i*u,d=i*s,v=o*a,y=o*u,g=o*s;return t[0]=1-l-d,t[3]=f-g,t[6]=h+y,t[1]=f+g,t[4]=1-c-d,t[7]=p-v,t[2]=h-y,t[5]=p+v,t[8]=1-c-l,t}function k(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],v=e[13],y=e[14],g=e[15],m=n*u-r*a,_=n*s-i*a,b=n*c-o*a,w=r*s-i*u,x=r*c-o*u,E=i*c-o*s,k=f*v-l*d,P=f*y-h*d,S=f*g-p*d,M=l*y-h*v,O=l*g-p*v,A=h*g-p*y,C=m*A-_*O+b*M+w*S-x*P+E*k;return C?(C=1/C,t[0]=(u*A-s*O+c*M)*C,t[1]=(s*S-a*A-c*P)*C,t[2]=(a*O-u*S+c*k)*C,t[3]=(i*O-r*A-o*M)*C,t[4]=(n*A-i*S+o*P)*C,t[5]=(r*S-n*O-o*k)*C,t[6]=(v*E-y*x+g*w)*C,t[7]=(y*b-d*E-g*_)*C,t[8]=(d*x-v*b+g*m)*C,t):null}function P(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function S(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function M(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))}function O(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t}function A(t,e,n){
return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}function C(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t}function T(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t}function R(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function j(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=e[0],h=e[1],p=e[2],d=e[3],v=e[4],y=e[5],g=e[6],m=e[7],_=e[8];return Math.abs(n-l)<=F.EPSILON*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-h)<=F.EPSILON*Math.max(1,Math.abs(r),Math.abs(h))&&Math.abs(i-p)<=F.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(o-d)<=F.EPSILON*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-v)<=F.EPSILON*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(u-y)<=F.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(s-g)<=F.EPSILON*Math.max(1,Math.abs(s),Math.abs(g))&&Math.abs(c-m)<=F.EPSILON*Math.max(1,Math.abs(c),Math.abs(m))&&Math.abs(f-_)<=F.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.fromMat4=o,e.clone=a,e.copy=u,e.fromValues=s,e.set=c,e.identity=f,e.transpose=l,e.invert=h,e.adjoint=p,e.determinant=d,e.multiply=v,e.translate=y,e.rotate=g,e.scale=m,e.fromTranslation=_,e.fromRotation=b,e.fromScaling=w,e.fromMat2d=x,e.fromQuat=E,e.normalFromMat4=k,e.projection=P,e.str=S,e.frob=M,e.add=O,e.subtract=A,e.multiplyScalar=C,e.multiplyScalarAndAdd=T,e.exactEquals=R,e.equals=j;var I=n(0),F=r(I);e.mul=v,e.sub=A},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new H.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function o(t){var e=new H.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function u(t,e,n){var r=new H.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function c(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function f(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function h(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function p(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function v(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function y(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function g(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function m(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function _(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function b(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return Math.sqrt(n*n+r*r+i*i)}function x(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2];return n*n+r*r+i*i}function E(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function k(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function P(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=n*n+r*r+i*i;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function M(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function O(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2];return t[0]=i*s-o*u,t[1]=o*a-r*s,t[2]=r*u-i*a,t}function A(t,e,n,r){var i=e[0],o=e[1],a=e[2];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t}function C(t,e,n,r,i,o){var a=o*o,u=a*(2*o-3)+1,s=a*(o-2)+o,c=a*(o-1),f=a*(3-2*o);return t[0]=e[0]*u+n[0]*s+r[0]*c+i[0]*f,t[1]=e[1]*u+n[1]*s+r[1]*c+i[1]*f,t[2]=e[2]*u+n[2]*s+r[2]*c+i[2]*f,t}function T(t,e,n,r,i,o){var a=1-o,u=a*a,s=o*o,c=u*a,f=3*o*u,l=3*s*a,h=s*o;return t[0]=e[0]*c+n[0]*f+r[0]*l+i[0]*h,t[1]=e[1]*c+n[1]*f+r[1]*l+i[1]*h,t[2]=e[2]*c+n[2]*f+r[2]*l+i[2]*h,t}function R(t,e){e=e||1;var n=2*H.RANDOM()*Math.PI,r=2*H.RANDOM()-1,i=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*i,t[1]=Math.sin(n)*i,t[2]=r*e,t}function j(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[3]*r+n[7]*i+n[11]*o+n[15];return a=a||1,t[0]=(n[0]*r+n[4]*i+n[8]*o+n[12])/a,t[1]=(n[1]*r+n[5]*i+n[9]*o+n[13])/a,t[2]=(n[2]*r+n[6]*i+n[10]*o+n[14])/a,t}function I(t,e,n){var r=e[0],i=e[1],o=e[2];return t[0]=r*n[0]+i*n[3]+o*n[6],t[1]=r*n[1]+i*n[4]+o*n[7],t[2]=r*n[2]+i*n[5]+o*n[8],t}function F(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*o-s*i,l=c*i+s*r-a*o,h=c*o+a*i-u*r,p=-a*r-u*i-s*o;return t[0]=f*c+p*-a+l*-s-h*-u,t[1]=l*c+p*-u+h*-a-f*-s,t[2]=h*c+p*-s+f*-u-l*-a,t}function L(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0],o[1]=i[1]*Math.cos(r)-i[2]*Math.sin(r),o[2]=i[1]*Math.sin(r)+i[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function N(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[2]*Math.sin(r)+i[0]*Math.cos(r),o[1]=i[1],o[2]=i[2]*Math.cos(r)-i[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function B(t,e,n,r){var i=[],o=[];return i[0]=e[0]-n[0],i[1]=e[1]-n[1],i[2]=e[2]-n[2],o[0]=i[0]*Math.cos(r)-i[1]*Math.sin(r),o[1]=i[0]*Math.sin(r)+i[1]*Math.cos(r),o[2]=i[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t}function D(t,e){var n=u(t[0],t[1],t[2]),r=u(e[0],e[1],e[2]);S(n,n),S(r,r);var i=M(n,r);return i>1?0:i<-1?Math.PI:Math.acos(i)}function U(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function z(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function q(t,e){var n=t[0],r=t[1],i=t[2],o=e[0],a=e[1],u=e[2];return Math.abs(n-o)<=H.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-a)<=H.EPSILON*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(i-u)<=H.EPSILON*Math.max(1,Math.abs(i),Math.abs(u))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=o,e.length=a,e.fromValues=u,e.copy=s,e.set=c,e.add=f,e.subtract=l,e.multiply=h,e.divide=p,e.ceil=d,e.floor=v,e.min=y,e.max=g,e.round=m,e.scale=_,e.scaleAndAdd=b,e.distance=w,e.squaredDistance=x,e.squaredLength=E,e.negate=k,e.inverse=P,e.normalize=S,e.dot=M,e.cross=O,e.lerp=A,e.hermite=C,e.bezier=T,e.random=R,e.transformMat4=j,e.transformMat3=I,e.transformQuat=F,e.rotateX=L,e.rotateY=N,e.rotateZ=B,e.angle=D,e.str=U,e.exactEquals=z,e.equals=q;var Y=n(0),H=r(Y);e.sub=l,e.mul=h,e.div=p,e.dist=w,e.sqrDist=x,e.len=a,e.sqrLen=E,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var u=void 0,s=void 0;for(n||(n=3),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new L.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function o(t){var e=new L.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e,n,r){var i=new L.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function u(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function s(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function y(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function m(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+i*i+o*o)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1],i=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+i*i+o*o}function x(t){var e=t[0],n=t[1],r=t[2],i=t[3];return Math.sqrt(e*e+n*n+r*r+i*i)}function E(t){var e=t[0],n=t[1],r=t[2],i=t[3];return e*e+n*n+r*r+i*i}function k(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function P(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function S(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o;return a>0&&(a=1/Math.sqrt(a),t[0]=n*a,t[1]=r*a,t[2]=i*a,t[3]=o*a),t}function M(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function O(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=e[3];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t[2]=a+r*(n[2]-a),t[3]=u+r*(n[3]-u),t}function A(t,e){return e=e||1,t[0]=L.RANDOM(),t[1]=L.RANDOM(),t[2]=L.RANDOM(),t[3]=L.RANDOM(),S(t,t),m(t,t,e),t}function C(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3];return t[0]=n[0]*r+n[4]*i+n[8]*o+n[12]*a,t[1]=n[1]*r+n[5]*i+n[9]*o+n[13]*a,t[2]=n[2]*r+n[6]*i+n[10]*o+n[14]*a,t[3]=n[3]*r+n[7]*i+n[11]*o+n[15]*a,t}function T(t,e,n){var r=e[0],i=e[1],o=e[2],a=n[0],u=n[1],s=n[2],c=n[3],f=c*r+u*o-s*i,l=c*i+s*r-a*o,h=c*o+a*i-u*r,p=-a*r-u*i-s*o;return t[0]=f*c+p*-a+l*-s-h*-u,t[1]=l*c+p*-u+h*-a-f*-s,t[2]=h*c+p*-s+f*-u-l*-a,t[3]=e[3],t}function R(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function j(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function I(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=L.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=L.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=L.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=L.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=i,e.clone=o,e.fromValues=a,e.copy=u,e.set=s,e.add=c,e.subtract=f,e.multiply=l,e.divide=h,e.ceil=p,e.floor=d,e.min=v,e.max=y,e.round=g,e.scale=m,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=w,e.length=x,e.squaredLength=E,e.negate=k,e.inverse=P,e.normalize=S,e.dot=M,e.lerp=O,e.random=A,e.transformMat4=C,e.transformQuat=T,e.str=R,e.exactEquals=j,e.equals=I;var F=n(0),L=r(F);e.sub=f,e.mul=l,e.div=h,e.dist=b,e.sqrDist=w,e.len=x,e.sqrLen=E,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var u=void 0,s=void 0;for(n||(n=4),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,a),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var i=n(0),o=r(i),a=n(5),u=r(a),s=n(6),c=r(s),f=n(1),l=r(f),h=n(7),p=r(h),d=n(8),v=r(d),y=n(9),g=r(y),m=n(2),_=r(m),b=n(3),w=r(b);e.glMatrix=o,e.mat2=u,e.mat2d=c,e.mat3=l,e.mat4=p,e.quat=v,e.vec2=g,e.vec3=_,e.vec4=w},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new A.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function o(t){var e=new A.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function s(t,e,n,r){var i=new A.ARRAY_TYPE(4);return i[0]=t,i[1]=e,i[2]=n,i[3]=r,i}function c(t,e,n,r,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t}function f(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function l(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*o-i*r;return a?(a=1/a,t[0]=o*a,t[1]=-r*a,t[2]=-i*a,t[3]=n*a,t):null}function h(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t}function p(t){return t[0]*t[3]-t[2]*t[1]}function d(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*u+o*s,t[1]=i*u+a*s,t[2]=r*c+o*f,t[3]=i*c+a*f,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+o*u,t[1]=i*s+a*u,t[2]=r*-u+o*s,t[3]=i*-u+a*s,t}function y(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1];return t[0]=r*u,t[1]=i*u,t[2]=o*s,t[3]=a*s,t}function g(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t}function m(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function _(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function b(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))}function w(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]}function x(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function E(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function k(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function P(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=e[0],u=e[1],s=e[2],c=e[3];return Math.abs(n-a)<=A.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-u)<=A.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(i-s)<=A.EPSILON*Math.max(1,Math.abs(i),Math.abs(s))&&Math.abs(o-c)<=A.EPSILON*Math.max(1,Math.abs(o),Math.abs(c))}function S(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function M(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=o,e.copy=a,e.identity=u,e.fromValues=s,e.set=c,e.transpose=f,e.invert=l,e.adjoint=h,e.determinant=p,e.multiply=d,e.rotate=v,e.scale=y,e.fromRotation=g,e.fromScaling=m,e.str=_,e.frob=b,e.LDU=w,e.add=x,e.subtract=E,e.exactEquals=k,e.equals=P,e.multiplyScalar=S,e.multiplyScalarAndAdd=M;var O=n(0),A=r(O);e.mul=d,e.sub=E},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new O.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function o(t){var e=new O.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function s(t,e,n,r,i,o){var a=new O.ARRAY_TYPE(6);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a[4]=i,a[5]=o,a}function c(t,e,n,r,i,o,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t}function f(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=n*o-r*i;return s?(s=1/s,t[0]=o*s,t[1]=-r*s,t[2]=-i*s,t[3]=n*s,t[4]=(i*u-o*a)*s,t[5]=(r*a-n*u)*s,t):null}function l(t){return t[0]*t[3]-t[1]*t[2]}function h(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=n[0],f=n[1],l=n[2],h=n[3],p=n[4],d=n[5];return t[0]=r*c+o*f,t[1]=i*c+a*f,t[2]=r*l+o*h,t[3]=i*l+a*h,t[4]=r*p+o*d+u,t[5]=i*p+a*d+s,t}function p(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=Math.sin(n),f=Math.cos(n);return t[0]=r*f+o*c,t[1]=i*f+a*c,t[2]=r*-c+o*f,t[3]=i*-c+a*f,t[4]=u,t[5]=s,t}function d(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r*c,t[1]=i*c,t[2]=o*f,t[3]=a*f,t[4]=u,t[5]=s,t}function v(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=n[0],f=n[1];return t[0]=r,t[1]=i,t[2]=o,t[3]=a,t[4]=r*c+o*f+u,t[5]=i*c+a*f+s,t}function y(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t}function g(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function m(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function _(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function b(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)}function w(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t}function x(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}function E(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t}function k(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t}function P(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function S(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=e[0],c=e[1],f=e[2],l=e[3],h=e[4],p=e[5];return Math.abs(n-s)<=O.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=O.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(i-f)<=O.EPSILON*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(o-l)<=O.EPSILON*Math.max(1,Math.abs(o),Math.abs(l))&&Math.abs(a-h)<=O.EPSILON*Math.max(1,Math.abs(a),Math.abs(h))&&Math.abs(u-p)<=O.EPSILON*Math.max(1,Math.abs(u),Math.abs(p))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=o,e.copy=a,e.identity=u,e.fromValues=s,e.set=c,e.invert=f,e.determinant=l,e.multiply=h,e.rotate=p,e.scale=d,e.translate=v,e.fromRotation=y,e.fromScaling=g,e.fromTranslation=m,e.str=_,e.frob=b,e.add=w,e.subtract=x,e.multiplyScalar=E,e.multiplyScalarAndAdd=k,e.exactEquals=P,e.equals=S;var M=n(0),O=r(M);e.mul=h,e.sub=x},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new $.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function o(t){var e=new $.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function a(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function u(t,e,n,r,i,o,a,u,s,c,f,l,h,p,d,v){var y=new $.ARRAY_TYPE(16);return y[0]=t,y[1]=e,y[2]=n,y[3]=r,y[4]=i,y[5]=o,y[6]=a,y[7]=u,y[8]=s,y[9]=c,y[10]=f,y[11]=l,y[12]=h,y[13]=p,y[14]=d,y[15]=v,y}function s(t,e,n,r,i,o,a,u,s,c,f,l,h,p,d,v,y){return t[0]=e,t[1]=n,t[2]=r,t[3]=i,t[4]=o,t[5]=a,t[6]=u,t[7]=s,t[8]=c,t[9]=f,t[10]=l,t[11]=h,t[12]=p,t[13]=d,t[14]=v,t[15]=y,t}function c(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function f(t,e){if(t===e){var n=e[1],r=e[2],i=e[3],o=e[6],a=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=i,t[13]=a,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function l(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],v=e[13],y=e[14],g=e[15],m=n*u-r*a,_=n*s-i*a,b=n*c-o*a,w=r*s-i*u,x=r*c-o*u,E=i*c-o*s,k=f*v-l*d,P=f*y-h*d,S=f*g-p*d,M=l*y-h*v,O=l*g-p*v,A=h*g-p*y,C=m*A-_*O+b*M+w*S-x*P+E*k;return C?(C=1/C,t[0]=(u*A-s*O+c*M)*C,t[1]=(i*O-r*A-o*M)*C,t[2]=(v*E-y*x+g*w)*C,t[3]=(h*x-l*E-p*w)*C,t[4]=(s*S-a*A-c*P)*C,t[5]=(n*A-i*S+o*P)*C,t[6]=(y*b-d*E-g*_)*C,t[7]=(f*E-h*b+p*_)*C,t[8]=(a*O-u*S+c*k)*C,t[9]=(r*S-n*O-o*k)*C,t[10]=(d*x-v*b+g*m)*C,t[11]=(l*b-f*x-p*m)*C,t[12]=(u*P-a*M-s*k)*C,t[13]=(n*M-r*P+i*k)*C,t[14]=(v*_-d*w-y*m)*C,t[15]=(f*w-l*_+h*m)*C,t):null}function h(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=e[4],u=e[5],s=e[6],c=e[7],f=e[8],l=e[9],h=e[10],p=e[11],d=e[12],v=e[13],y=e[14],g=e[15];return t[0]=u*(h*g-p*y)-l*(s*g-c*y)+v*(s*p-c*h),t[1]=-(r*(h*g-p*y)-l*(i*g-o*y)+v*(i*p-o*h)),t[2]=r*(s*g-c*y)-u*(i*g-o*y)+v*(i*c-o*s),t[3]=-(r*(s*p-c*h)-u*(i*p-o*h)+l*(i*c-o*s)),t[4]=-(a*(h*g-p*y)-f*(s*g-c*y)+d*(s*p-c*h)),t[5]=n*(h*g-p*y)-f*(i*g-o*y)+d*(i*p-o*h),t[6]=-(n*(s*g-c*y)-a*(i*g-o*y)+d*(i*c-o*s)),t[7]=n*(s*p-c*h)-a*(i*p-o*h)+f*(i*c-o*s),t[8]=a*(l*g-p*v)-f*(u*g-c*v)+d*(u*p-c*l),t[9]=-(n*(l*g-p*v)-f*(r*g-o*v)+d*(r*p-o*l)),t[10]=n*(u*g-c*v)-a*(r*g-o*v)+d*(r*c-o*u),t[11]=-(n*(u*p-c*l)-a*(r*p-o*l)+f*(r*c-o*u)),t[12]=-(a*(l*y-h*v)-f*(u*y-s*v)+d*(u*h-s*l)),t[13]=n*(l*y-h*v)-f*(r*y-i*v)+d*(r*h-i*l),t[14]=-(n*(u*y-s*v)-a*(r*y-i*v)+d*(r*s-i*u)),t[15]=n*(u*h-s*l)-a*(r*h-i*l)+f*(r*s-i*u),t}function p(t){var e=t[0],n=t[1],r=t[2],i=t[3],o=t[4],a=t[5],u=t[6],s=t[7],c=t[8],f=t[9],l=t[10],h=t[11],p=t[12],d=t[13],v=t[14],y=t[15],g=e*a-n*o,m=e*u-r*o,_=e*s-i*o,b=n*u-r*a,w=n*s-i*a,x=r*s-i*u,E=c*d-f*p,k=c*v-l*p,P=c*y-h*p,S=f*v-l*d,M=f*y-h*d,O=l*y-h*v;return g*O-m*M+_*S+b*P-w*k+x*E}function d(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=e[4],s=e[5],c=e[6],f=e[7],l=e[8],h=e[9],p=e[10],d=e[11],v=e[12],y=e[13],g=e[14],m=e[15],_=n[0],b=n[1],w=n[2],x=n[3];return t[0]=_*r+b*u+w*l+x*v,t[1]=_*i+b*s+w*h+x*y,t[2]=_*o+b*c+w*p+x*g,t[3]=_*a+b*f+w*d+x*m,_=n[4],b=n[5],w=n[6],x=n[7],t[4]=_*r+b*u+w*l+x*v,t[5]=_*i+b*s+w*h+x*y,t[6]=_*o+b*c+w*p+x*g,t[7]=_*a+b*f+w*d+x*m,_=n[8],b=n[9],w=n[10],x=n[11],t[8]=_*r+b*u+w*l+x*v,t[9]=_*i+b*s+w*h+x*y,t[10]=_*o+b*c+w*p+x*g,t[11]=_*a+b*f+w*d+x*m,_=n[12],b=n[13],w=n[14],x=n[15],t[12]=_*r+b*u+w*l+x*v,t[13]=_*i+b*s+w*h+x*y,t[14]=_*o+b*c+w*p+x*g,t[15]=_*a+b*f+w*d+x*m,t}function v(t,e,n){var r=n[0],i=n[1],o=n[2],a=void 0,u=void 0,s=void 0,c=void 0,f=void 0,l=void 0,h=void 0,p=void 0,d=void 0,v=void 0,y=void 0,g=void 0;return e===t?(t[12]=e[0]*r+e[4]*i+e[8]*o+e[12],t[13]=e[1]*r+e[5]*i+e[9]*o+e[13],t[14]=e[2]*r+e[6]*i+e[10]*o+e[14],t[15]=e[3]*r+e[7]*i+e[11]*o+e[15]):(a=e[0],u=e[1],s=e[2],c=e[3],f=e[4],l=e[5],h=e[6],p=e[7],d=e[8],v=e[9],y=e[10],g=e[11],t[0]=a,t[1]=u,t[2]=s,t[3]=c,t[4]=f,t[5]=l,t[6]=h,t[7]=p,t[8]=d,t[9]=v,t[10]=y,t[11]=g,t[12]=a*r+f*i+d*o+e[12],t[13]=u*r+l*i+v*o+e[13],t[14]=s*r+h*i+y*o+e[14],t[15]=c*r+p*i+g*o+e[15]),t}function y(t,e,n){var r=n[0],i=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function g(t,e,n,r){var i=r[0],o=r[1],a=r[2],u=Math.sqrt(i*i+o*o+a*a),s=void 0,c=void 0,f=void 0,l=void 0,h=void 0,p=void 0,d=void 0,v=void 0,y=void 0,g=void 0,m=void 0,_=void 0,b=void 0,w=void 0,x=void 0,E=void 0,k=void 0,P=void 0,S=void 0,M=void 0,O=void 0,A=void 0,C=void 0,T=void 0;return Math.abs(u)<$.EPSILON?null:(u=1/u,i*=u,o*=u,a*=u,s=Math.sin(n),c=Math.cos(n),f=1-c,l=e[0],h=e[1],p=e[2],d=e[3],v=e[4],y=e[5],g=e[6],m=e[7],_=e[8],b=e[9],w=e[10],x=e[11],E=i*i*f+c,k=o*i*f+a*s,P=a*i*f-o*s,S=i*o*f-a*s,M=o*o*f+c,O=a*o*f+i*s,A=i*a*f+o*s,C=o*a*f-i*s,T=a*a*f+c,t[0]=l*E+v*k+_*P,t[1]=h*E+y*k+b*P,t[2]=p*E+g*k+w*P,t[3]=d*E+m*k+x*P,t[4]=l*S+v*M+_*O,t[5]=h*S+y*M+b*O,t[6]=p*S+g*M+w*O,t[7]=d*S+m*M+x*O,t[8]=l*A+v*C+_*T,t[9]=h*A+y*C+b*T,t[10]=p*A+g*C+w*T,t[11]=d*A+m*C+x*T,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function m(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[4],a=e[5],u=e[6],s=e[7],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*i+c*r,t[5]=a*i+f*r,t[6]=u*i+l*r,t[7]=s*i+h*r,t[8]=c*i-o*r,t[9]=f*i-a*r,t[10]=l*i-u*r,t[11]=h*i-s*r,t}function _(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],c=e[8],f=e[9],l=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i-c*r,t[1]=a*i-f*r,t[2]=u*i-l*r,t[3]=s*i-h*r,t[8]=o*r+c*i,t[9]=a*r+f*i,t[10]=u*r+l*i,t[11]=s*r+h*i,t}function b(t,e,n){var r=Math.sin(n),i=Math.cos(n),o=e[0],a=e[1],u=e[2],s=e[3],c=e[4],f=e[5],l=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*i+c*r,t[1]=a*i+f*r,t[2]=u*i+l*r,t[3]=s*i+h*r,t[4]=c*i-o*r,t[5]=f*i-a*r,t[6]=l*i-u*r,t[7]=h*i-s*r,t}function w(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function x(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function E(t,e,n){var r=n[0],i=n[1],o=n[2],a=Math.sqrt(r*r+i*i+o*o),u=void 0,s=void 0,c=void 0;return Math.abs(a)<$.EPSILON?null:(a=1/a,r*=a,i*=a,o*=a,u=Math.sin(e),s=Math.cos(e),c=1-s,t[0]=r*r*c+s,t[1]=i*r*c+o*u,t[2]=o*r*c-i*u,t[3]=0,t[4]=r*i*c-o*u,t[5]=i*i*c+s,t[6]=o*i*c+r*u,t[7]=0,t[8]=r*o*c+i*u,t[9]=i*o*c-r*u,t[10]=o*o*c+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function k(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function P(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function S(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function M(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=r+r,s=i+i,c=o+o,f=r*u,l=r*s,h=r*c,p=i*s,d=i*c,v=o*c,y=a*u,g=a*s,m=a*c;return t[0]=1-(p+v),t[1]=l+m,t[2]=h-g,t[3]=0,t[4]=l-m,t[5]=1-(f+v),t[6]=d+y,t[7]=0,t[8]=h+g,t[9]=d-y,t[10]=1-(f+p),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function O(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function A(t,e){var n=e[0],r=e[1],i=e[2],o=e[4],a=e[5],u=e[6],s=e[8],c=e[9],f=e[10];return t[0]=Math.sqrt(n*n+r*r+i*i),t[1]=Math.sqrt(o*o+a*a+u*u),t[2]=Math.sqrt(s*s+c*c+f*f),t}function C(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t}function T(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=e[3],s=i+i,c=o+o,f=a+a,l=i*s,h=i*c,p=i*f,d=o*c,v=o*f,y=a*f,g=u*s,m=u*c,_=u*f,b=r[0],w=r[1],x=r[2];return t[0]=(1-(d+y))*b,t[1]=(h+_)*b,t[2]=(p-m)*b,t[3]=0,t[4]=(h-_)*w,t[5]=(1-(l+y))*w,t[6]=(v+g)*w,t[7]=0,t[8]=(p+m)*x,t[9]=(v-g)*x,t[10]=(1-(l+d))*x,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function R(t,e,n,r,i){var o=e[0],a=e[1],u=e[2],s=e[3],c=o+o,f=a+a,l=u+u,h=o*c,p=o*f,d=o*l,v=a*f,y=a*l,g=u*l,m=s*c,_=s*f,b=s*l,w=r[0],x=r[1],E=r[2],k=i[0],P=i[1],S=i[2];return t[0]=(1-(v+g))*w,t[1]=(p+b)*w,t[2]=(d-_)*w,t[3]=0,t[4]=(p-b)*x,t[5]=(1-(h+g))*x,t[6]=(y+m)*x,t[7]=0,t[8]=(d+_)*E,t[9]=(y-m)*E,t[10]=(1-(h+v))*E,t[11]=0,t[12]=n[0]+k-(t[0]*k+t[4]*P+t[8]*S),t[13]=n[1]+P-(t[1]*k+t[5]*P+t[9]*S),t[14]=n[2]+S-(t[2]*k+t[6]*P+t[10]*S),t[15]=1,t}function j(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n+n,u=r+r,s=i+i,c=n*a,f=r*a,l=r*u,h=i*a,p=i*u,d=i*s,v=o*a,y=o*u,g=o*s;return t[0]=1-l-d,t[1]=f+g,t[2]=h-y,t[3]=0,t[4]=f-g,t[5]=1-c-d,t[6]=p+v,t[7]=0,t[8]=h+y,t[9]=p-v,t[10]=1-c-l,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function I(t,e,n,r,i,o,a){var u=1/(n-e),s=1/(i-r),c=1/(o-a);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*s,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(i+r)*s,t[10]=(a+o)*c,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*o*2*c,t[15]=0,t}function F(t,e,n,r,i){var o=1/Math.tan(e/2),a=1/(r-i);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(i+r)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*i*r*a,t[15]=0,t}function L(t,e,n,r){var i=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),s=2/(a+u),c=2/(i+o);return t[0]=s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=c,t[6]=0,t[7]=0,t[8]=-((a-u)*s*.5),t[9]=(i-o)*c*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function N(t,e,n,r,i,o,a){var u=1/(e-n),s=1/(r-i),c=1/(o-a);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+n)*u,t[13]=(i+r)*s,t[14]=(a+o)*c,t[15]=1,t}function B(t,e,n,r){var i=void 0,o=void 0,a=void 0,u=void 0,s=void 0,c=void 0,f=void 0,l=void 0,h=void 0,p=void 0,d=e[0],v=e[1],y=e[2],g=r[0],m=r[1],_=r[2],b=n[0],w=n[1],x=n[2];return Math.abs(d-b)<$.EPSILON&&Math.abs(v-w)<$.EPSILON&&Math.abs(y-x)<$.EPSILON?mat4.identity(t):(f=d-b,l=v-w,h=y-x,p=1/Math.sqrt(f*f+l*l+h*h),f*=p,l*=p,h*=p,i=m*h-_*l,o=_*f-g*h,a=g*l-m*f,p=Math.sqrt(i*i+o*o+a*a),p?(p=1/p,i*=p,o*=p,a*=p):(i=0,o=0,a=0),u=l*a-h*o,s=h*i-f*a,c=f*o-l*i,p=Math.sqrt(u*u+s*s+c*c),p?(p=1/p,u*=p,s*=p,c*=p):(u=0,s=0,c=0),t[0]=i,t[1]=u,t[2]=f,t[3]=0,t[4]=o,t[5]=s,t[6]=l,t[7]=0,t[8]=a,t[9]=c,t[10]=h,t[11]=0,t[12]=-(i*d+o*v+a*y),t[13]=-(u*d+s*v+c*y),t[14]=-(f*d+l*v+h*y),t[15]=1,t)}function D(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=r[0],s=r[1],c=r[2],f=i-n[0],l=o-n[1],h=a-n[2],p=f*f+l*l+h*h;p>0&&(p=1/Math.sqrt(p),f*=p,l*=p,h*=p);var d=s*h-c*l,v=c*f-u*h,y=u*l-s*f;return t[0]=d,t[1]=v,t[2]=y,t[3]=0,t[4]=l*y-h*v,t[5]=h*d-f*y,t[6]=f*v-l*d,t[7]=0,t[8]=f,t[9]=l,t[10]=h,t[11]=0,t[12]=i,t[13]=o,t[14]=a,t[15]=1,t}function U(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function z(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))}function q(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function Y(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function H(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function V(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15];
}function W(t,e){var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],u=t[5],s=t[6],c=t[7],f=t[8],l=t[9],h=t[10],p=t[11],d=t[12],v=t[13],y=t[14],g=t[15],m=e[0],_=e[1],b=e[2],w=e[3],x=e[4],E=e[5],k=e[6],P=e[7],S=e[8],M=e[9],O=e[10],A=e[11],C=e[12],T=e[13],R=e[14],j=e[15];return Math.abs(n-m)<=$.EPSILON*Math.max(1,Math.abs(n),Math.abs(m))&&Math.abs(r-_)<=$.EPSILON*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(i-b)<=$.EPSILON*Math.max(1,Math.abs(i),Math.abs(b))&&Math.abs(o-w)<=$.EPSILON*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(a-x)<=$.EPSILON*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(u-E)<=$.EPSILON*Math.max(1,Math.abs(u),Math.abs(E))&&Math.abs(s-k)<=$.EPSILON*Math.max(1,Math.abs(s),Math.abs(k))&&Math.abs(c-P)<=$.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-S)<=$.EPSILON*Math.max(1,Math.abs(f),Math.abs(S))&&Math.abs(l-M)<=$.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))&&Math.abs(h-O)<=$.EPSILON*Math.max(1,Math.abs(h),Math.abs(O))&&Math.abs(p-A)<=$.EPSILON*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(d-C)<=$.EPSILON*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(v-T)<=$.EPSILON*Math.max(1,Math.abs(v),Math.abs(T))&&Math.abs(y-R)<=$.EPSILON*Math.max(1,Math.abs(y),Math.abs(R))&&Math.abs(g-j)<=$.EPSILON*Math.max(1,Math.abs(g),Math.abs(j))}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=i,e.clone=o,e.copy=a,e.fromValues=u,e.set=s,e.identity=c,e.transpose=f,e.invert=l,e.adjoint=h,e.determinant=p,e.multiply=d,e.translate=v,e.scale=y,e.rotate=g,e.rotateX=m,e.rotateY=_,e.rotateZ=b,e.fromTranslation=w,e.fromScaling=x,e.fromRotation=E,e.fromXRotation=k,e.fromYRotation=P,e.fromZRotation=S,e.fromRotationTranslation=M,e.getTranslation=O,e.getScaling=A,e.getRotation=C,e.fromRotationTranslationScale=T,e.fromRotationTranslationScaleOrigin=R,e.fromQuat=j,e.frustum=I,e.perspective=F,e.perspectiveFromFieldOfView=L,e.ortho=N,e.lookAt=B,e.targetTo=D,e.str=U,e.frob=z,e.add=q,e.subtract=Y,e.multiplyScalar=H,e.multiplyScalarAndAdd=V,e.exactEquals=G,e.equals=W;var X=n(0),$=r(X);e.mul=d,e.sub=Y},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new b.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function a(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function u(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n}function s(t,e,n){var r=e[0],i=e[1],o=e[2],a=e[3],u=n[0],s=n[1],c=n[2],f=n[3];return t[0]=r*f+a*u+i*c-o*s,t[1]=i*f+a*s+o*u-r*c,t[2]=o*f+a*c+r*s-i*u,t[3]=a*f-r*u-i*s-o*c,t}function c(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+a*u,t[1]=i*s+o*u,t[2]=o*s-i*u,t[3]=a*s-r*u,t}function f(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s-o*u,t[1]=i*s+a*u,t[2]=o*s+r*u,t[3]=a*s-i*u,t}function l(t,e,n){n*=.5;var r=e[0],i=e[1],o=e[2],a=e[3],u=Math.sin(n),s=Math.cos(n);return t[0]=r*s+i*u,t[1]=i*s-r*u,t[2]=o*s+a*u,t[3]=a*s-o*u,t}function h(t,e){var n=e[0],r=e[1],i=e[2];return t[0]=n,t[1]=r,t[2]=i,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-i*i)),t}function p(t,e,n,r){var i=e[0],o=e[1],a=e[2],u=e[3],s=n[0],c=n[1],f=n[2],l=n[3],h=void 0,p=void 0,d=void 0,v=void 0,y=void 0;return p=i*s+o*c+a*f+u*l,p<0&&(p=-p,s=-s,c=-c,f=-f,l=-l),1-p>1e-6?(h=Math.acos(p),d=Math.sin(h),v=Math.sin((1-r)*h)/d,y=Math.sin(r*h)/d):(v=1-r,y=r),t[0]=v*i+y*s,t[1]=v*o+y*c,t[2]=v*a+y*f,t[3]=v*u+y*l,t}function d(t,e){var n=e[0],r=e[1],i=e[2],o=e[3],a=n*n+r*r+i*i+o*o,u=a?1/a:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-i*u,t[3]=o*u,t}function v(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function y(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var o=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*o+o]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*o+a]-e[3*a+o])*r,t[o]=(e[3*o+i]+e[3*i+o])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}function g(t,e,n,r){var i=.5*Math.PI/180;e*=i,n*=i,r*=i;var o=Math.sin(e),a=Math.cos(e),u=Math.sin(n),s=Math.cos(n),c=Math.sin(r),f=Math.cos(r);return t[0]=o*s*f-a*u*c,t[1]=a*u*f+o*s*c,t[2]=a*s*c-o*u*f,t[3]=a*s*f+o*u*c,t}function m(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=i,e.identity=o,e.setAxisAngle=a,e.getAxisAngle=u,e.multiply=s,e.rotateX=c,e.rotateY=f,e.rotateZ=l,e.calculateW=h,e.slerp=p,e.invert=d,e.conjugate=v,e.fromMat3=y,e.fromEuler=g,e.str=m;var _=n(0),b=r(_),w=n(1),x=r(w),E=n(2),k=r(E),P=n(3),S=r(P),M=(e.clone=S.clone,e.fromValues=S.fromValues,e.copy=S.copy,e.set=S.set,e.add=S.add,e.mul=s,e.scale=S.scale,e.dot=S.dot,e.lerp=S.lerp,e.length=S.length),O=(e.len=M,e.squaredLength=S.squaredLength),A=(e.sqrLen=O,e.normalize=S.normalize);e.exactEquals=S.exactEquals,e.equals=S.equals,e.rotationTo=function(){var t=k.create(),e=k.fromValues(1,0,0),n=k.fromValues(0,1,0);return function(r,i,o){var u=k.dot(i,o);return u<-.999999?(k.cross(t,e,i),k.len(t)<1e-6&&k.cross(t,n,i),k.normalize(t,t),a(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(k.cross(t,i,o),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,A(r,r))}}(),e.sqlerp=function(){var t=i(),e=i();return function(n,r,i,o,a,u){return p(t,r,a,u),p(e,i,o,u),p(n,t,e,2*u*(1-u)),n}}(),e.setAxes=function(){var t=x.create();return function(e,n,r,i){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=i[0],t[4]=i[1],t[7]=i[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],A(e,y(e,t))}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(){var t=new D.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function o(t){var e=new D.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e}function a(t,e){var n=new D.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n}function u(t,e){return t[0]=e[0],t[1]=e[1],t}function s(t,e,n){return t[0]=e,t[1]=n,t}function c(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function f(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function l(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function h(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function p(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function d(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function v(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function y(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function g(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function m(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function _(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function b(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function w(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function x(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function E(t){var e=t[0],n=t[1];return e*e+n*n}function k(t,e){return t[0]=-e[0],t[1]=-e[1],t}function P(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function S(t,e){var n=e[0],r=e[1],i=n*n+r*r;return i>0&&(i=1/Math.sqrt(i),t[0]=e[0]*i,t[1]=e[1]*i),t}function M(t,e){return t[0]*e[0]+t[1]*e[1]}function O(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function A(t,e,n,r){var i=e[0],o=e[1];return t[0]=i+r*(n[0]-i),t[1]=o+r*(n[1]-o),t}function C(t,e){e=e||1;var n=2*D.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t}function T(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i,t[1]=n[1]*r+n[3]*i,t}function R(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[2]*i+n[4],t[1]=n[1]*r+n[3]*i+n[5],t}function j(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[3]*i+n[6],t[1]=n[1]*r+n[4]*i+n[7],t}function I(t,e,n){var r=e[0],i=e[1];return t[0]=n[0]*r+n[4]*i+n[12],t[1]=n[1]*r+n[5]*i+n[13],t}function F(t){return"vec2("+t[0]+", "+t[1]+")"}function L(t,e){return t[0]===e[0]&&t[1]===e[1]}function N(t,e){var n=t[0],r=t[1],i=e[0],o=e[1];return Math.abs(n-i)<=D.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=D.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=i,e.clone=o,e.fromValues=a,e.copy=u,e.set=s,e.add=c,e.subtract=f,e.multiply=l,e.divide=h,e.ceil=p,e.floor=d,e.min=v,e.max=y,e.round=g,e.scale=m,e.scaleAndAdd=_,e.distance=b,e.squaredDistance=w,e.length=x,e.squaredLength=E,e.negate=k,e.inverse=P,e.normalize=S,e.dot=M,e.cross=O,e.lerp=A,e.random=C,e.transformMat2=T,e.transformMat2d=R,e.transformMat3=j,e.transformMat4=I,e.str=F,e.exactEquals=L,e.equals=N;var B=n(0),D=r(B);e.len=x,e.sub=f,e.mul=l,e.div=h,e.dist=b,e.sqrDist=w,e.sqrLen=E,e.forEach=function(){var t=i();return function(e,n,r,i,o,a){var u=void 0,s=void 0;for(n||(n=2),r||(r=0),s=i?Math.min(i*n+r,e.length):e.length,u=r;u<s;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,a),e[u]=t[0],e[u+1]=t[1];return e}}()}])})},function(t,e,n){var r;(function(t,i){(function(){function o(t,e){if(t!==e){var n=null===t,r=t===M,i=t===t,o=null===e,a=e===M,u=e===e;if(t>e&&!o||!i||n&&!a&&u||r&&u)return 1;if(t<e&&!n||!u||o&&!r&&i||a&&i)return-1}return 0}function a(t,e,n){for(var r=t.length,i=n?r:-1;n?i--:++i<r;)if(e(t[i],i,t))return i;return-1}function u(t,e,n){if(e!==e)return m(t,n);for(var r=n-1,i=t.length;++r<i;)if(t[r]===e)return r;return-1}function s(t){return"function"==typeof t||!1}function c(t){return null==t?"":t+""}function f(t,e){for(var n=-1,r=t.length;++n<r&&e.indexOf(t.charAt(n))>-1;);return n}function l(t,e){for(var n=t.length;n--&&e.indexOf(t.charAt(n))>-1;);return n}function h(t,e){return o(t.criteria,e.criteria)||t.index-e.index}function p(t,e,n){for(var r=-1,i=t.criteria,a=e.criteria,u=i.length,s=n.length;++r<u;){var c=o(i[r],a[r]);if(c){if(r>=s)return c;var f=n[r];return c*("asc"===f||f===!0?1:-1)}}return t.index-e.index}function d(t){return Gt[t]}function v(t){return Wt[t]}function y(t,e,n){return e?t=Qt[t]:n&&(t=Jt[t]),"\\"+t}function g(t){return"\\"+Jt[t]}function m(t,e,n){for(var r=t.length,i=e+(n?0:-1);n?i--:++i<r;){var o=t[i];if(o!==o)return i}return-1}function _(t){return!!t&&"object"==typeof t}function b(t){return t<=160&&t>=9&&t<=13||32==t||160==t||5760==t||6158==t||t>=8192&&(t<=8202||8232==t||8233==t||8239==t||8287==t||12288==t||65279==t)}function w(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;)t[n]===e&&(t[n]=G,o[++i]=n);return o}function x(t,e){for(var n,r=-1,i=t.length,o=-1,a=[];++r<i;){var u=t[r],s=e?e(u,r,t):u;r&&n===s||(n=s,a[++o]=u)}return a}function E(t){for(var e=-1,n=t.length;++e<n&&b(t.charCodeAt(e)););return e}function k(t){for(var e=t.length;e--&&b(t.charCodeAt(e)););return e}function P(t){return Xt[t]}function S(t){function e(t){if(_(t)&&!Au(t)&&!(t instanceof i)){if(t instanceof r)return t;if(ea.call(t,"__chain__")&&ea.call(t,"__wrapped__"))return pr(t)}return new r(t)}function n(){}function r(t,e,n){this.__wrapped__=t,this.__actions__=n||[],this.__chain__=!!e}function i(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Oa,this.__views__=[]}function b(){var t=new i(this.__wrapped__);return t.__actions__=te(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=te(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=te(this.__views__),t}function Z(){if(this.__filtered__){var t=new i(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function rt(){var t=this.__wrapped__.value(),e=this.__dir__,n=Au(t),r=e<0,i=n?t.length:0,o=Gn(0,i,this.__views__),a=o.start,u=o.end,s=u-a,c=r?u:a-1,f=this.__iteratees__,l=f.length,h=0,p=Ea(s,this.__takeCount__);if(!n||i<q||i==s&&p==s)return nn(r&&n?t.reverse():t,this.__actions__);var d=[];t:for(;s--&&h<p;){c+=e;for(var v=-1,y=t[c];++v<l;){var g=f[v],m=g.iteratee,_=g.type,b=m(y);if(_==H)y=b;else if(!b){if(_==Y)continue t;break t}}d[h++]=y}return d}function ot(){this.__data__={}}function Gt(t){return this.has(t)&&delete this.__data__[t]}function Wt(t){return"__proto__"==t?M:this.__data__[t]}function Xt(t){return"__proto__"!=t&&ea.call(this.__data__,t)}function $t(t,e){return"__proto__"!=t&&(this.__data__[t]=e),this}function Qt(t){var e=t?t.length:0;for(this.data={hash:ga(null),set:new la};e--;)this.push(t[e])}function Jt(t,e){var n=t.data,r="string"==typeof e||Ii(e)?n.set.has(e):n.hash[e];return r?0:-1}function Kt(t){var e=this.data;"string"==typeof t||Ii(t)?e.set.add(t):e.hash[t]=!0}function Zt(t,e){for(var n=-1,r=t.length,i=-1,o=e.length,a=zo(r+o);++n<r;)a[n]=t[n];for(;++i<o;)a[n++]=e[i];return a}function te(t,e){var n=-1,r=t.length;for(e||(e=zo(r));++n<r;)e[n]=t[n];return e}function ee(t,e){for(var n=-1,r=t.length;++n<r&&e(t[n],n,t)!==!1;);return t}function ne(t,e){for(var n=t.length;n--&&e(t[n],n,t)!==!1;);return t}function oe(t,e){for(var n=-1,r=t.length;++n<r;)if(!e(t[n],n,t))return!1;return!0}function ae(t,e,n,r){for(var i=-1,o=t.length,a=r,u=a;++i<o;){var s=t[i],c=+e(s);n(c,a)&&(a=c,u=s)}return u}function ue(t,e){for(var n=-1,r=t.length,i=-1,o=[];++n<r;){var a=t[n];e(a,n,t)&&(o[++i]=a)}return o}function se(t,e){for(var n=-1,r=t.length,i=zo(r);++n<r;)i[n]=e(t[n],n,t);return i}function ce(t,e){for(var n=-1,r=e.length,i=t.length;++n<r;)t[i+n]=e[n];return t}function fe(t,e,n,r){var i=-1,o=t.length;for(r&&o&&(n=t[++i]);++i<o;)n=e(n,t[i],i,t);return n}function le(t,e,n,r){var i=t.length;for(r&&i&&(n=t[--i]);i--;)n=e(n,t[i],i,t);return n}function he(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function pe(t,e){for(var n=t.length,r=0;n--;)r+=+e(t[n])||0;return r}function de(t,e){return t===M?e:t}function ve(t,e,n,r){return t!==M&&ea.call(r,n)?t:e}function ye(t,e,n){for(var r=-1,i=Uu(e),o=i.length;++r<o;){var a=i[r],u=t[a],s=n(u,e[a],a,t,e);(s===s?s===u:u!==u)&&(u!==M||a in t)||(t[a]=s)}return t}function ge(t,e){return null==e?t:_e(e,Uu(e),t)}function me(t,e){for(var n=-1,r=null==t,i=!r&&Jn(t),o=i?t.length:0,a=e.length,u=zo(a);++n<a;){var s=e[n];i?u[n]=Kn(s,o)?t[s]:M:u[n]=r?M:t[s]}return u}function _e(t,e,n){n||(n={});for(var r=-1,i=e.length;++r<i;){var o=e[r];n[o]=t[o]}return n}function be(t,e,n){var r=typeof t;return"function"==r?e===M?t:an(t,e,n):null==t?Oo:"object"==r?De(t):e===M?Io(t):Ue(t,e)}function we(t,e,n,r,i,o,a){var u;if(n&&(u=i?n(t,r,i):n(t)),u!==M)return u;if(!Ii(t))return t;var s=Au(t);if(s){if(u=Wn(t),!e)return te(t,u)}else{var c=ra.call(t),f=c==K;if(c!=et&&c!=W&&(!f||i))return Vt[c]?$n(t,c,e):i?t:{};if(u=Xn(f?{}:t),!e)return ge(u,t)}o||(o=[]),a||(a=[]);for(var l=o.length;l--;)if(o[l]==t)return a[l];return o.push(t),a.push(u),(s?ee:Te)(t,function(r,i){u[i]=we(r,e,n,i,t,o,a)}),u}function xe(t,e,n){if("function"!=typeof t)throw new Qo(V);return ha(function(){t.apply(M,n)},e)}function Ee(t,e){var n=t?t.length:0,r=[];if(!n)return r;var i=-1,o=Yn(),a=o==u,s=a&&e.length>=q?vn(e):null,c=e.length;s&&(o=Jt,a=!1,e=s);t:for(;++i<n;){var f=t[i];if(a&&f===f){for(var l=c;l--;)if(e[l]===f)continue t;r.push(f)}else o(e,f,0)<0&&r.push(f)}return r}function ke(t,e){var n=!0;return La(t,function(t,r,i){return n=!!e(t,r,i)}),n}function Pe(t,e,n,r){var i=r,o=i;return La(t,function(t,a,u){var s=+e(t,a,u);(n(s,i)||s===r&&s===o)&&(i=s,o=t)}),o}function Se(t,e,n,r){var i=t.length;for(n=null==n?0:+n||0,n<0&&(n=-n>i?0:i+n),r=r===M||r>i?i:+r||0,r<0&&(r+=i),i=n>r?0:r>>>0,n>>>=0;n<i;)t[n++]=e;return t}function Me(t,e){var n=[];return La(t,function(t,r,i){e(t,r,i)&&n.push(t)}),n}function Oe(t,e,n,r){var i;return n(t,function(t,n,o){if(e(t,n,o))return i=r?n:t,!1}),i}function Ae(t,e,n,r){r||(r=[]);for(var i=-1,o=t.length;++i<o;){var a=t[i];_(a)&&Jn(a)&&(n||Au(a)||Pi(a))?e?Ae(a,e,n,r):ce(r,a):n||(r[r.length]=a)}return r}function Ce(t,e){return Ba(t,e,to)}function Te(t,e){return Ba(t,e,Uu)}function Re(t,e){return Da(t,e,Uu)}function je(t,e){for(var n=-1,r=e.length,i=-1,o=[];++n<r;){var a=e[n];ji(t[a])&&(o[++i]=a)}return o}function Ie(t,e,n){if(null!=t){n!==M&&n in lr(t)&&(e=[n]);for(var r=0,i=e.length;null!=t&&r<i;)t=t[e[r++]];return r&&r==i?t:M}}function Fe(t,e,n,r,i,o){return t===e||(null==t||null==e||!Ii(t)&&!_(e)?t!==t&&e!==e:Le(t,e,Fe,n,r,i,o))}function Le(t,e,n,r,i,o,a){var u=Au(t),s=Au(e),c=X,f=X;u||(c=ra.call(t),c==W?c=et:c!=et&&(u=Yi(t))),s||(f=ra.call(e),f==W?f=et:f!=et&&(s=Yi(e)));var l=c==et,h=f==et,p=c==f;if(p&&!u&&!l)return Dn(t,e,c);if(!i){var d=l&&ea.call(t,"__wrapped__"),v=h&&ea.call(e,"__wrapped__");if(d||v)return n(d?t.value():t,v?e.value():e,r,i,o,a)}if(!p)return!1;o||(o=[]),a||(a=[]);for(var y=o.length;y--;)if(o[y]==t)return a[y]==e;o.push(t),a.push(e);var g=(u?Bn:Un)(t,e,n,r,i,o,a);return o.pop(),a.pop(),g}function Ne(t,e,n){var r=e.length,i=r,o=!n;if(null==t)return!i;for(t=lr(t);r--;){var a=e[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<i;){a=e[r];var u=a[0],s=t[u],c=a[1];if(o&&a[2]){if(s===M&&!(u in t))return!1}else{var f=n?n(s,c,u):M;if(!(f===M?Fe(c,s,n,!0):f))return!1}}return!0}function Be(t,e){var n=-1,r=Jn(t)?zo(t.length):[];return La(t,function(t,i,o){r[++n]=e(t,i,o)}),r}function De(t){var e=Hn(t);if(1==e.length&&e[0][2]){var n=e[0][0],r=e[0][1];return function(t){return null!=t&&(t[n]===r&&(r!==M||n in lr(t)))}}return function(t){return Ne(t,e)}}function Ue(t,e){var n=Au(t),r=tr(t)&&rr(e),i=t+"";return t=hr(t),function(o){if(null==o)return!1;var a=i;if(o=lr(o),(n||!r)&&!(a in o)){if(o=1==t.length?o:Ie(o,Xe(t,0,-1)),null==o)return!1;a=Sr(t),o=lr(o)}return o[a]===e?e!==M||a in o:Fe(e,o[a],M,!0)}}function ze(t,e,n,r,i){if(!Ii(t))return t;var o=Jn(e)&&(Au(e)||Yi(e)),a=o?M:Uu(e);return ee(a||e,function(u,s){if(a&&(s=u,u=e[s]),_(u))r||(r=[]),i||(i=[]),qe(t,e,s,ze,n,r,i);else{var c=t[s],f=n?n(c,u,s,t,e):M,l=f===M;l&&(f=u),f===M&&(!o||s in t)||!l&&(f===f?f===c:c!==c)||(t[s]=f)}}),t}function qe(t,e,n,r,i,o,a){for(var u=o.length,s=e[n];u--;)if(o[u]==s)return void(t[n]=a[u]);var c=t[n],f=i?i(c,s,n,t,e):M,l=f===M;l&&(f=s,Jn(s)&&(Au(s)||Yi(s))?f=Au(c)?c:Jn(c)?te(c):[]:Ui(s)||Pi(s)?f=Pi(c)?Xi(c):Ui(c)?c:{}:l=!1),o.push(s),a.push(f),l?t[n]=r(f,s,i,o,a):(f===f?f!==c:c===c)&&(t[n]=f)}function Ye(t){return function(e){return null==e?M:e[t]}}function He(t){var e=t+"";return t=hr(t),function(n){return Ie(n,t,e)}}function Ve(t,e){for(var n=t?e.length:0;n--;){var r=e[n];if(r!=i&&Kn(r)){var i=r;pa.call(t,r,1)}}return t}function Ge(t,e){return t+ma(Sa()*(e-t+1))}function We(t,e,n,r,i){return i(t,function(t,i,o){n=r?(r=!1,t):e(n,t,i,o)}),n}function Xe(t,e,n){var r=-1,i=t.length;e=null==e?0:+e||0,e<0&&(e=-e>i?0:i+e),n=n===M||n>i?i:+n||0,n<0&&(n+=i),i=e>n?0:n-e>>>0,e>>>=0;for(var o=zo(i);++r<i;)o[r]=t[r+e];return o}function $e(t,e){var n;return La(t,function(t,r,i){return n=e(t,r,i),!n}),!!n}function Qe(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function Je(t,e,n){var r=zn(),i=-1;e=se(e,function(t){return r(t)});var o=Be(t,function(t){var n=se(e,function(e){return e(t)});return{criteria:n,index:++i,value:t}});return Qe(o,function(t,e){return p(t,e,n)})}function Ke(t,e){var n=0;return La(t,function(t,r,i){n+=+e(t,r,i)||0}),n}function Ze(t,e){var n=-1,r=Yn(),i=t.length,o=r==u,a=o&&i>=q,s=a?vn():null,c=[];s?(r=Jt,o=!1):(a=!1,s=e?[]:c);t:for(;++n<i;){var f=t[n],l=e?e(f,n,t):f;if(o&&f===f){for(var h=s.length;h--;)if(s[h]===l)continue t;e&&s.push(l),c.push(f)}else r(s,l,0)<0&&((e||a)&&s.push(l),c.push(f))}return c}function tn(t,e){for(var n=-1,r=e.length,i=zo(r);++n<r;)i[n]=t[e[n]];return i}function en(t,e,n,r){for(var i=t.length,o=r?i:-1;(r?o--:++o<i)&&e(t[o],o,t););return n?Xe(t,r?0:o,r?o+1:i):Xe(t,r?o+1:0,r?i:o)}function nn(t,e){var n=t;n instanceof i&&(n=n.value());for(var r=-1,o=e.length;++r<o;){var a=e[r];n=a.func.apply(a.thisArg,ce([n],a.args))}return n}function rn(t,e,n){var r=0,i=t?t.length:r;if("number"==typeof e&&e===e&&i<=Ta){for(;r<i;){var o=r+i>>>1,a=t[o];(n?a<=e:a<e)&&null!==a?r=o+1:i=o}return i}return on(t,e,Oo,n)}function on(t,e,n,r){e=n(e);for(var i=0,o=t?t.length:0,a=e!==e,u=null===e,s=e===M;i<o;){var c=ma((i+o)/2),f=n(t[c]),l=f!==M,h=f===f;if(a)var p=h||r;else p=u?h&&l&&(r||null!=f):s?h&&(r||l):null!=f&&(r?f<=e:f<e);p?i=c+1:o=c}return Ea(o,Ca)}function an(t,e,n){if("function"!=typeof t)return Oo;if(e===M)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)};case 5:return function(n,r,i,o,a){return t.call(e,n,r,i,o,a)}}return function(){return t.apply(e,arguments)}}function un(t){var e=new aa(t.byteLength),n=new da(e);return n.set(new da(t)),e}function sn(t,e,n){for(var r=n.length,i=-1,o=xa(t.length-r,0),a=-1,u=e.length,s=zo(u+o);++a<u;)s[a]=e[a];for(;++i<r;)s[n[i]]=t[i];for(;o--;)s[a++]=t[i++];return s}function cn(t,e,n){for(var r=-1,i=n.length,o=-1,a=xa(t.length-i,0),u=-1,s=e.length,c=zo(a+s);++o<a;)c[o]=t[o];for(var f=o;++u<s;)c[f+u]=e[u];for(;++r<i;)c[f+n[r]]=t[o++];return c}function fn(t,e){return function(n,r,i){var o=e?e():{};if(r=zn(r,i,3),Au(n))for(var a=-1,u=n.length;++a<u;){var s=n[a];t(o,s,r(s,a,n),n)}else La(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function ln(t){return gi(function(e,n){var r=-1,i=null==e?0:n.length,o=i>2?n[i-2]:M,a=i>2?n[2]:M,u=i>1?n[i-1]:M;for("function"==typeof o?(o=an(o,u,5),i-=2):(o="function"==typeof u?u:M,i-=o?1:0),a&&Zn(n[0],n[1],a)&&(o=i<3?M:o,i=1);++r<i;){var s=n[r];s&&t(e,s,o)}return e})}function hn(t,e){return function(n,r){var i=n?qa(n):0;if(!nr(i))return t(n,r);for(var o=e?i:-1,a=lr(n);(e?o--:++o<i)&&r(a[o],o,a)!==!1;);return n}}function pn(t){return function(e,n,r){for(var i=lr(e),o=r(e),a=o.length,u=t?a:-1;t?u--:++u<a;){var s=o[u];if(n(i[s],s,i)===!1)break}return e}}function dn(t,e){function n(){var i=this&&this!==re&&this instanceof n?r:t;return i.apply(e,arguments)}var r=gn(t);return n}function vn(t){return ga&&la?new Qt(t):null}function yn(t){return function(e){for(var n=-1,r=Po(fo(e)),i=r.length,o="";++n<i;)o=t(o,r[n],n);return o}}function gn(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var n=Fa(t.prototype),r=t.apply(n,e);return Ii(r)?r:n}}function mn(t){function e(n,r,i){i&&Zn(n,r,i)&&(r=M);var o=Nn(n,t,M,M,M,M,M,r);return o.placeholder=e.placeholder,o}return e}function _n(t,e){return gi(function(n){var r=n[0];return null==r?r:(n.push(e),t.apply(M,n))})}function bn(t,e){return function(n,r,i){if(i&&Zn(n,r,i)&&(r=M),r=zn(r,i,3),1==r.length){n=Au(n)?n:fr(n);var o=ae(n,r,t,e);if(!n.length||o!==e)return o}return Pe(n,r,t,e)}}function wn(t,e){return function(n,r,i){if(r=zn(r,i,3),Au(n)){var o=a(n,r,e);return o>-1?n[o]:M}return Oe(n,r,t)}}function xn(t){return function(e,n,r){return e&&e.length?(n=zn(n,r,3),a(e,n,t)):-1}}function En(t){return function(e,n,r){return n=zn(n,r,3),Oe(e,n,t,!0)}}function kn(t){return function(){for(var e,n=arguments.length,i=t?n:-1,o=0,a=zo(n);t?i--:++i<n;){var u=a[o++]=arguments[i];if("function"!=typeof u)throw new Qo(V);!e&&r.prototype.thru&&"wrapper"==qn(u)&&(e=new r([],!0))}for(i=e?-1:n;++i<n;){u=a[i];var s=qn(u),c="wrapper"==s?za(u):M;e=c&&er(c[0])&&c[1]==(L|R|I|N)&&!c[4].length&&1==c[9]?e[qn(c[0])].apply(e,c[3]):1==u.length&&er(u)?e[s]():e.thru(u)}return function(){var t=arguments,r=t[0];if(e&&1==t.length&&Au(r)&&r.length>=q)return e.plant(r).value();for(var i=0,o=n?a[i].apply(this,t):r;++i<n;)o=a[i].call(this,o);return o}}}function Pn(t,e){return function(n,r,i){return"function"==typeof r&&i===M&&Au(n)?t(n,r):e(n,an(r,i,3))}}function Sn(t){return function(e,n,r){return"function"==typeof n&&r===M||(n=an(n,r,3)),t(e,n,to)}}function Mn(t){return function(e,n,r){return"function"==typeof n&&r===M||(n=an(n,r,3)),t(e,n)}}function On(t){return function(e,n,r){var i={};return n=zn(n,r,3),Te(e,function(e,r,o){var a=n(e,r,o);r=t?a:r,e=t?e:a,i[r]=e}),i}}function An(t){return function(e,n,r){return e=c(e),(t?e:"")+jn(e,n,r)+(t?"":e)}}function Cn(t){var e=gi(function(n,r){var i=w(r,e.placeholder);return Nn(n,t,M,r,i)});return e}function Tn(t,e){return function(n,r,i,o){var a=arguments.length<3;return"function"==typeof r&&o===M&&Au(n)?t(n,r,i,a):We(n,zn(r,o,4),i,a,e)}}function Rn(t,e,n,r,i,o,a,u,s,c){function f(){for(var m=arguments.length,_=m,b=zo(m);_--;)b[_]=arguments[_];if(r&&(b=sn(b,r,i)),o&&(b=cn(b,o,a)),d||y){var x=f.placeholder,E=w(b,x);if(m-=E.length,m<c){var k=u?te(u):M,P=xa(c-m,0),S=d?E:M,O=d?M:E,T=d?b:M,R=d?M:b;e|=d?I:F,e&=~(d?F:I),v||(e&=~(A|C));var j=[t,e,n,T,S,R,O,k,s,P],L=Rn.apply(M,j);return er(t)&&Ya(L,j),L.placeholder=x,L}}var N=h?n:this,B=p?N[t]:t;return u&&(b=sr(b,u)),l&&s<b.length&&(b.length=s),this&&this!==re&&this instanceof f&&(B=g||gn(t)),B.apply(N,b)}var l=e&L,h=e&A,p=e&C,d=e&R,v=e&T,y=e&j,g=p?M:gn(t);return f}function jn(t,e,n){var r=t.length;if(e=+e,r>=e||!ba(e))return"";var i=e-r;return n=null==n?" ":n+"",go(n,ya(i/n.length)).slice(0,i)}function In(t,e,n,r){function i(){for(var e=-1,u=arguments.length,s=-1,c=r.length,f=zo(c+u);++s<c;)f[s]=r[s];for(;u--;)f[s++]=arguments[++e];var l=this&&this!==re&&this instanceof i?a:t;return l.apply(o?n:this,f)}var o=e&A,a=gn(t);return i}function Fn(t){var e=Vo[t];return function(t,n){return n=n===M?0:+n||0,n?(n=ca(10,n),e(t*n)/n):e(t)}}function Ln(t){return function(e,n,r,i){var o=zn(r);return null==r&&o===be?rn(e,n,t):on(e,n,o(r,i,1),t)}}function Nn(t,e,n,r,i,o,a,u){var s=e&C;if(!s&&"function"!=typeof t)throw new Qo(V);var c=r?r.length:0;if(c||(e&=~(I|F),r=i=M),c-=i?i.length:0,e&F){var f=r,l=i;r=i=M}var h=s?M:za(t),p=[t,e,n,r,i,f,l,o,a,u];if(h&&(ir(p,h),e=p[1],u=p[9]),p[9]=null==u?s?0:t.length:xa(u-c,0)||0,e==A)var d=dn(p[0],p[2]);else d=e!=I&&e!=(A|I)||p[4].length?Rn.apply(M,p):In.apply(M,p);var v=h?Ua:Ya;return v(d,p)}function Bn(t,e,n,r,i,o,a){var u=-1,s=t.length,c=e.length;if(s!=c&&!(i&&c>s))return!1;for(;++u<s;){var f=t[u],l=e[u],h=r?r(i?l:f,i?f:l,u):M;if(h!==M){if(h)continue;return!1}if(i){if(!he(e,function(t){return f===t||n(f,t,r,i,o,a)}))return!1}else if(f!==l&&!n(f,l,r,i,o,a))return!1}return!0}function Dn(t,e,n){switch(n){case $:case Q:return+t==+e;case J:return t.name==e.name&&t.message==e.message;case tt:return t!=+t?e!=+e:t==+e;case nt:case it:return t==e+""}return!1}function Un(t,e,n,r,i,o,a){var u=Uu(t),s=u.length,c=Uu(e),f=c.length;if(s!=f&&!i)return!1;for(var l=s;l--;){var h=u[l];if(!(i?h in e:ea.call(e,h)))return!1}for(var p=i;++l<s;){h=u[l];var d=t[h],v=e[h],y=r?r(i?v:d,i?d:v,h):M;if(!(y===M?n(d,v,r,i,o,a):y))return!1;p||(p="constructor"==h)}if(!p){var g=t.constructor,m=e.constructor;if(g!=m&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof m&&m instanceof m))return!1}return!0}function zn(t,n,r){var i=e.callback||So;return i=i===So?be:i,r?i(t,n,r):i}function qn(t){for(var e=t.name,n=Ia[e],r=n?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==t)return i.name}return e}function Yn(t,n,r){var i=e.indexOf||kr;return i=i===kr?u:i,t?i(t,n,r):i}function Hn(t){for(var e=eo(t),n=e.length;n--;)e[n][2]=rr(e[n][1]);return e}function Vn(t,e){var n=null==t?M:t[e];return Ni(n)?n:M}function Gn(t,e,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":t+=a;break;case"dropRight":e-=a;break;case"take":e=Ea(e,t+a);break;case"takeRight":t=xa(t,e-a)}}return{start:t,end:e}}function Wn(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&ea.call(t,"index")&&(n.index=t.index,n.input=t.input),n}function Xn(t){var e=t.constructor;return"function"==typeof e&&e instanceof e||(e=Wo),new e}function $n(t,e,n){var r=t.constructor;switch(e){case at:return un(t);case $:case Q:return new r(+t);case ut:case st:case ct:case ft:case lt:case ht:case pt:case dt:case vt:var i=t.buffer;return new r(n?un(i):i,t.byteOffset,t.length);case tt:case it:return new r(t);case nt:var o=new r(t.source,It.exec(t));o.lastIndex=t.lastIndex}return o}function Qn(t,e,n){null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Ie(t,Xe(e,0,-1)),e=Sr(e));var r=null==t?t:t[e];return null==r?M:r.apply(t,n)}function Jn(t){return null!=t&&nr(qa(t))}function Kn(t,e){return t="number"==typeof t||Nt.test(t)?+t:-1,e=null==e?Ra:e,t>-1&&t%1==0&&t<e}function Zn(t,e,n){if(!Ii(n))return!1;var r=typeof e;if("number"==r?Jn(n)&&Kn(e,n.length):"string"==r&&e in n){var i=n[e];return t===t?t===i:i!==i}return!1}function tr(t,e){var n=typeof t;if("string"==n&&Mt.test(t)||"number"==n)return!0;if(Au(t))return!1;var r=!St.test(t);return r||null!=e&&t in lr(e)}function er(t){var n=qn(t);if(!(n in i.prototype))return!1;var r=e[n];if(t===r)return!0;var o=za(r);return!!o&&t===o[0]}function nr(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Ra}function rr(t){return t===t&&!Ii(t)}function ir(t,e){var n=t[1],r=e[1],i=n|r,o=i<L,a=r==L&&n==R||r==L&&n==N&&t[7].length<=e[8]||r==(L|N)&&n==R;if(!o&&!a)return t;r&A&&(t[2]=e[2],i|=n&A?0:T);var u=e[3];if(u){var s=t[3];t[3]=s?sn(s,u,e[4]):te(u),t[4]=s?w(t[3],G):te(e[4])}return u=e[5],u&&(s=t[5],t[5]=s?cn(s,u,e[6]):te(u),t[6]=s?w(t[5],G):te(e[6])),u=e[7],u&&(t[7]=te(u)),r&L&&(t[8]=null==t[8]?e[8]:Ea(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=i,t}function or(t,e){return t===M?e:Cu(t,e,or)}function ar(t,e){t=lr(t);for(var n=-1,r=e.length,i={};++n<r;){var o=e[n];o in t&&(i[o]=t[o])}return i}function ur(t,e){var n={};return Ce(t,function(t,r,i){e(t,r,i)&&(n[r]=t)}),n}function sr(t,e){for(var n=t.length,r=Ea(e.length,n),i=te(t);r--;){var o=e[r];t[r]=Kn(o,n)?i[o]:M}return t}function cr(t){for(var e=to(t),n=e.length,r=n&&t.length,i=!!r&&nr(r)&&(Au(t)||Pi(t)),o=-1,a=[];++o<n;){var u=e[o];(i&&Kn(u,r)||ea.call(t,u))&&a.push(u)}return a}function fr(t){return null==t?[]:Jn(t)?Ii(t)?t:Wo(t):oo(t)}function lr(t){return Ii(t)?t:Wo(t)}function hr(t){if(Au(t))return t;var e=[];return c(t).replace(Ot,function(t,n,r,i){e.push(r?i.replace(Rt,"$1"):n||t)}),e}function pr(t){return t instanceof i?t.clone():new r(t.__wrapped__,t.__chain__,te(t.__actions__))}function dr(t,e,n){e=(n?Zn(t,e,n):null==e)?1:xa(ma(e)||1,1);for(var r=0,i=t?t.length:0,o=-1,a=zo(ya(i/e));r<i;)a[++o]=Xe(t,r,r+=e);return a}function vr(t){for(var e=-1,n=t?t.length:0,r=-1,i=[];++e<n;){var o=t[e];o&&(i[++r]=o)}return i}function yr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),Xe(t,e<0?0:e)):[]}function gr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Xe(t,0,e<0?0:e)):[]}function mr(t,e,n){return t&&t.length?en(t,zn(e,n,3),!0,!0):[]}function _r(t,e,n){return t&&t.length?en(t,zn(e,n,3),!0):[]}function br(t,e,n,r){var i=t?t.length:0;return i?(n&&"number"!=typeof n&&Zn(t,e,n)&&(n=0,r=i),Se(t,e,n,r)):[]}function wr(t){return t?t[0]:M}function xr(t,e,n){var r=t?t.length:0;return n&&Zn(t,e,n)&&(e=!1),r?Ae(t,e):[]}function Er(t){var e=t?t.length:0;return e?Ae(t,!0):[]}function kr(t,e,n){var r=t?t.length:0;if(!r)return-1;if("number"==typeof n)n=n<0?xa(r+n,0):n;else if(n){var i=rn(t,e);return i<r&&(e===e?e===t[i]:t[i]!==t[i])?i:-1}return u(t,e,n||0)}function Pr(t){return gr(t,1)}function Sr(t){var e=t?t.length:0;return e?t[e-1]:M}function Mr(t,e,n){var r=t?t.length:0;if(!r)return-1;var i=r;if("number"==typeof n)i=(n<0?xa(r+n,0):Ea(n||0,r-1))+1;else if(n){i=rn(t,e,!0)-1;var o=t[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return m(t,i,!0);for(;i--;)if(t[i]===e)return i;return-1}function Or(){var t=arguments,e=t[0];if(!e||!e.length)return e;for(var n=0,r=Yn(),i=t.length;++n<i;)for(var o=0,a=t[n];(o=r(e,a,o))>-1;)pa.call(e,o,1);return e}function Ar(t,e,n){var r=[];if(!t||!t.length)return r;var i=-1,o=[],a=t.length;for(e=zn(e,n,3);++i<a;){var u=t[i];e(u,i,t)&&(r.push(u),o.push(i))}return Ve(t,o),r}function Cr(t){return yr(t,1)}function Tr(t,e,n){var r=t?t.length:0;return r?(n&&"number"!=typeof n&&Zn(t,e,n)&&(e=0,
n=r),Xe(t,e,n)):[]}function Rr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),Xe(t,0,e<0?0:e)):[]}function jr(t,e,n){var r=t?t.length:0;return r?((n?Zn(t,e,n):null==e)&&(e=1),e=r-(+e||0),Xe(t,e<0?0:e)):[]}function Ir(t,e,n){return t&&t.length?en(t,zn(e,n,3),!1,!0):[]}function Fr(t,e,n){return t&&t.length?en(t,zn(e,n,3)):[]}function Lr(t,e,n,r){var i=t?t.length:0;if(!i)return[];null!=e&&"boolean"!=typeof e&&(r=n,n=Zn(t,e,r)?M:e,e=!1);var o=zn();return null==n&&o===be||(n=o(n,r,3)),e&&Yn()==u?x(t,n):Ze(t,n)}function Nr(t){if(!t||!t.length)return[];var e=-1,n=0;t=ue(t,function(t){if(Jn(t))return n=xa(t.length,n),!0});for(var r=zo(n);++e<n;)r[e]=se(t,Ye(e));return r}function Br(t,e,n){var r=t?t.length:0;if(!r)return[];var i=Nr(t);return null==e?i:(e=an(e,n,4),se(i,function(t){return fe(t,e,M,!0)}))}function Dr(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(Jn(n))var r=r?ce(Ee(r,n),Ee(n,r)):n}return r?Ze(r):[]}function Ur(t,e){var n=-1,r=t?t.length:0,i={};for(!r||e||Au(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function zr(t){var n=e(t);return n.__chain__=!0,n}function qr(t,e,n){return e.call(n,t),t}function Yr(t,e,n){return e.call(n,t)}function Hr(){return zr(this)}function Vr(){return new r(this.value(),this.__chain__)}function Gr(t){for(var e,r=this;r instanceof n;){var i=pr(r);e?o.__wrapped__=i:e=i;var o=i;r=r.__wrapped__}return o.__wrapped__=t,e}function Wr(){var t=this.__wrapped__,e=function(t){return n&&n.__dir__<0?t:t.reverse()};if(t instanceof i){var n=t;return this.__actions__.length&&(n=new i(this)),n=n.reverse(),n.__actions__.push({func:Yr,args:[e],thisArg:M}),new r(n,this.__chain__)}return this.thru(e)}function Xr(){return this.value()+""}function $r(){return nn(this.__wrapped__,this.__actions__)}function Qr(t,e,n){var r=Au(t)?oe:ke;return n&&Zn(t,e,n)&&(e=M),"function"==typeof e&&n===M||(e=zn(e,n,3)),r(t,e)}function Jr(t,e,n){var r=Au(t)?ue:Me;return e=zn(e,n,3),r(t,e)}function Kr(t,e){return iu(t,De(e))}function Zr(t,e,n,r){var i=t?qa(t):0;return nr(i)||(t=oo(t),i=t.length),n="number"!=typeof n||r&&Zn(e,n,r)?0:n<0?xa(i+n,0):n||0,"string"==typeof t||!Au(t)&&qi(t)?n<=i&&t.indexOf(e,n)>-1:!!i&&Yn(t,e,n)>-1}function ti(t,e,n){var r=Au(t)?se:Be;return e=zn(e,n,3),r(t,e)}function ei(t,e){return ti(t,Io(e))}function ni(t,e,n){var r=Au(t)?ue:Me;return e=zn(e,n,3),r(t,function(t,n,r){return!e(t,n,r)})}function ri(t,e,n){if(n?Zn(t,e,n):null==e){t=fr(t);var r=t.length;return r>0?t[Ge(0,r-1)]:M}var i=-1,o=Wi(t),r=o.length,a=r-1;for(e=Ea(e<0?0:+e||0,r);++i<e;){var u=Ge(i,a),s=o[u];o[u]=o[i],o[i]=s}return o.length=e,o}function ii(t){return ri(t,Oa)}function oi(t){var e=t?qa(t):0;return nr(e)?e:Uu(t).length}function ai(t,e,n){var r=Au(t)?he:$e;return n&&Zn(t,e,n)&&(e=M),"function"==typeof e&&n===M||(e=zn(e,n,3)),r(t,e)}function ui(t,e,n){if(null==t)return[];n&&Zn(t,e,n)&&(e=M);var r=-1;e=zn(e,n,3);var i=Be(t,function(t,n,i){return{criteria:e(t,n,i),index:++r,value:t}});return Qe(i,h)}function si(t,e,n,r){return null==t?[]:(r&&Zn(e,n,r)&&(n=M),Au(e)||(e=null==e?[]:[e]),Au(n)||(n=null==n?[]:[n]),Je(t,e,n))}function ci(t,e){return Jr(t,De(e))}function fi(t,e){if("function"!=typeof e){if("function"!=typeof t)throw new Qo(V);var n=t;t=e,e=n}return t=ba(t=+t)?t:0,function(){if(--t<1)return e.apply(this,arguments)}}function li(t,e,n){return n&&Zn(t,e,n)&&(e=M),e=t&&null==e?t.length:xa(+e||0,0),Nn(t,L,M,M,M,M,e)}function hi(t,e){var n;if("function"!=typeof e){if("function"!=typeof t)throw new Qo(V);var r=t;t=e,e=r}return function(){return--t>0&&(n=e.apply(this,arguments)),t<=1&&(e=M),n}}function pi(t,e,n){function r(){p&&ua(p),c&&ua(c),v=0,c=p=d=M}function i(e,n){n&&ua(n),c=p=d=M,e&&(v=vu(),f=t.apply(h,s),p||c||(s=h=M))}function o(){var t=e-(vu()-l);t<=0||t>e?i(d,c):p=ha(o,t)}function a(){i(g,p)}function u(){if(s=arguments,l=vu(),h=this,d=g&&(p||!m),y===!1)var n=m&&!p;else{c||m||(v=l);var r=y-(l-v),i=r<=0||r>y;i?(c&&(c=ua(c)),v=l,f=t.apply(h,s)):c||(c=ha(a,r))}return i&&p?p=ua(p):p||e===y||(p=ha(o,e)),n&&(i=!0,f=t.apply(h,s)),!i||p||c||(s=h=M),f}var s,c,f,l,h,p,d,v=0,y=!1,g=!0;if("function"!=typeof t)throw new Qo(V);if(e=e<0?0:+e||0,n===!0){var m=!0;g=!1}else Ii(n)&&(m=!!n.leading,y="maxWait"in n&&xa(+n.maxWait||0,e),g="trailing"in n?!!n.trailing:g);return u.cancel=r,u}function di(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new Qo(V);var n=function(){var r=arguments,i=e?e.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=t.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new di.Cache,n}function vi(t){if("function"!=typeof t)throw new Qo(V);return function(){return!t.apply(this,arguments)}}function yi(t){return hi(2,t)}function gi(t,e){if("function"!=typeof t)throw new Qo(V);return e=xa(e===M?t.length-1:+e||0,0),function(){for(var n=arguments,r=-1,i=xa(n.length-e,0),o=zo(i);++r<i;)o[r]=n[e+r];switch(e){case 0:return t.call(this,o);case 1:return t.call(this,n[0],o);case 2:return t.call(this,n[0],n[1],o)}var a=zo(e+1);for(r=-1;++r<e;)a[r]=n[r];return a[e]=o,t.apply(this,a)}}function mi(t){if("function"!=typeof t)throw new Qo(V);return function(e){return t.apply(this,e)}}function _i(t,e,n){var r=!0,i=!0;if("function"!=typeof t)throw new Qo(V);return n===!1?r=!1:Ii(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),pi(t,e,{leading:r,maxWait:+e,trailing:i})}function bi(t,e){return e=null==e?Oo:e,Nn(e,I,M,[t],[])}function wi(t,e,n,r){return e&&"boolean"!=typeof e&&Zn(t,e,n)?e=!1:"function"==typeof e&&(r=n,n=e,e=!1),"function"==typeof n?we(t,e,an(n,r,1)):we(t,e)}function xi(t,e,n){return"function"==typeof e?we(t,!0,an(e,n,1)):we(t,!0)}function Ei(t,e){return t>e}function ki(t,e){return t>=e}function Pi(t){return _(t)&&Jn(t)&&ea.call(t,"callee")&&!fa.call(t,"callee")}function Si(t){return t===!0||t===!1||_(t)&&ra.call(t)==$}function Mi(t){return _(t)&&ra.call(t)==Q}function Oi(t){return!!t&&1===t.nodeType&&_(t)&&!Ui(t)}function Ai(t){return null==t||(Jn(t)&&(Au(t)||qi(t)||Pi(t)||_(t)&&ji(t.splice))?!t.length:!Uu(t).length)}function Ci(t,e,n,r){n="function"==typeof n?an(n,r,3):M;var i=n?n(t,e):M;return i===M?Fe(t,e,n):!!i}function Ti(t){return _(t)&&"string"==typeof t.message&&ra.call(t)==J}function Ri(t){return"number"==typeof t&&ba(t)}function ji(t){return Ii(t)&&ra.call(t)==K}function Ii(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function Fi(t,e,n,r){return n="function"==typeof n?an(n,r,3):M,Ne(t,Hn(e),n)}function Li(t){return Di(t)&&t!=+t}function Ni(t){return null!=t&&(ji(t)?oa.test(ta.call(t)):_(t)&&Lt.test(t))}function Bi(t){return null===t}function Di(t){return"number"==typeof t||_(t)&&ra.call(t)==tt}function Ui(t){var e;if(!_(t)||ra.call(t)!=et||Pi(t)||!ea.call(t,"constructor")&&(e=t.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var n;return Ce(t,function(t,e){n=e}),n===M||ea.call(t,n)}function zi(t){return Ii(t)&&ra.call(t)==nt}function qi(t){return"string"==typeof t||_(t)&&ra.call(t)==it}function Yi(t){return _(t)&&nr(t.length)&&!!Ht[ra.call(t)]}function Hi(t){return t===M}function Vi(t,e){return t<e}function Gi(t,e){return t<=e}function Wi(t){var e=t?qa(t):0;return nr(e)?e?te(t):[]:oo(t)}function Xi(t){return _e(t,to(t))}function $i(t,e,n){var r=Fa(t);return n&&Zn(t,e,n)&&(e=M),e?ge(r,e):r}function Qi(t){return je(t,to(t))}function Ji(t,e,n){var r=null==t?M:Ie(t,hr(e),e+"");return r===M?n:r}function Ki(t,e){if(null==t)return!1;var n=ea.call(t,e);if(!n&&!tr(e)){if(e=hr(e),t=1==e.length?t:Ie(t,Xe(e,0,-1)),null==t)return!1;e=Sr(e),n=ea.call(t,e)}return n||nr(t.length)&&Kn(e,t.length)&&(Au(t)||Pi(t))}function Zi(t,e,n){n&&Zn(t,e,n)&&(e=M);for(var r=-1,i=Uu(t),o=i.length,a={};++r<o;){var u=i[r],s=t[u];e?ea.call(a,s)?a[s].push(u):a[s]=[u]:a[s]=u}return a}function to(t){if(null==t)return[];Ii(t)||(t=Wo(t));var e=t.length;e=e&&nr(e)&&(Au(t)||Pi(t))&&e||0;for(var n=t.constructor,r=-1,i="function"==typeof n&&n.prototype===t,o=zo(e),a=e>0;++r<e;)o[r]=r+"";for(var u in t)a&&Kn(u,e)||"constructor"==u&&(i||!ea.call(t,u))||o.push(u);return o}function eo(t){t=lr(t);for(var e=-1,n=Uu(t),r=n.length,i=zo(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function no(t,e,n){var r=null==t?M:t[e];return r===M&&(null==t||tr(e,t)||(e=hr(e),t=1==e.length?t:Ie(t,Xe(e,0,-1)),r=null==t?M:t[Sr(e)]),r=r===M?n:r),ji(r)?r.call(t):r}function ro(t,e,n){if(null==t)return t;var r=e+"";e=null!=t[r]||tr(e,t)?[r]:hr(e);for(var i=-1,o=e.length,a=o-1,u=t;null!=u&&++i<o;){var s=e[i];Ii(u)&&(i==a?u[s]=n:null==u[s]&&(u[s]=Kn(e[i+1])?[]:{})),u=u[s]}return t}function io(t,e,n,r){var i=Au(t)||Yi(t);if(e=zn(e,r,4),null==n)if(i||Ii(t)){var o=t.constructor;n=i?Au(t)?new o:[]:Fa(ji(o)?o.prototype:M)}else n={};return(i?ee:Te)(t,function(t,r,i){return e(n,t,r,i)}),n}function oo(t){return tn(t,Uu(t))}function ao(t){return tn(t,to(t))}function uo(t,e,n){return e=+e||0,n===M?(n=e,e=0):n=+n||0,t>=Ea(e,n)&&t<xa(e,n)}function so(t,e,n){n&&Zn(t,e,n)&&(e=n=M);var r=null==t,i=null==e;if(null==n&&(i&&"boolean"==typeof t?(n=t,t=1):"boolean"==typeof e&&(n=e,i=!0)),r&&i&&(e=1,i=!1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=Sa();return Ea(t+o*(e-t+sa("1e-"+((o+"").length-1))),e)}return Ge(t,e)}function co(t){return t=c(t),t&&t.charAt(0).toUpperCase()+t.slice(1)}function fo(t){return t=c(t),t&&t.replace(Bt,d).replace(Tt,"")}function lo(t,e,n){t=c(t),e+="";var r=t.length;return n=n===M?r:Ea(n<0?0:+n||0,r),n-=e.length,n>=0&&t.indexOf(e,n)==n}function ho(t){return t=c(t),t&&xt.test(t)?t.replace(bt,v):t}function po(t){return t=c(t),t&&Ct.test(t)?t.replace(At,y):t||"(?:)"}function vo(t,e,n){t=c(t),e=+e;var r=t.length;if(r>=e||!ba(e))return t;var i=(e-r)/2,o=ma(i),a=ya(i);return n=jn("",a,n),n.slice(0,o)+t+n}function yo(t,e,n){return(n?Zn(t,e,n):null==e)?e=0:e&&(e=+e),t=bo(t),Pa(t,e||(Ft.test(t)?16:10))}function go(t,e){var n="";if(t=c(t),e=+e,e<1||!t||!ba(e))return n;do e%2&&(n+=t),e=ma(e/2),t+=t;while(e);return n}function mo(t,e,n){return t=c(t),n=null==n?0:Ea(n<0?0:+n||0,t.length),t.lastIndexOf(e,n)==n}function _o(t,n,r){var i=e.templateSettings;r&&Zn(t,n,r)&&(n=r=M),t=c(t),n=ye(ge({},r||n),i,ve);var o,a,u=ye(ge({},n.imports),i.imports,ve),s=Uu(u),f=tn(u,s),l=0,h=n.interpolate||Dt,p="__p += '",d=Xo((n.escape||Dt).source+"|"+h.source+"|"+(h===Pt?jt:Dt).source+"|"+(n.evaluate||Dt).source+"|$","g"),v="//# sourceURL="+("sourceURL"in n?n.sourceURL:"lodash.templateSources["+ ++Yt+"]")+"\n";t.replace(d,function(e,n,r,i,u,s){return r||(r=i),p+=t.slice(l,s).replace(Ut,g),n&&(o=!0,p+="' +\n__e("+n+") +\n'"),u&&(a=!0,p+="';\n"+u+";\n__p += '"),r&&(p+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=s+e.length,e}),p+="';\n";var y=n.variable;y||(p="with (obj) {\n"+p+"\n}\n"),p=(a?p.replace(yt,""):p).replace(gt,"$1").replace(mt,"$1;"),p="function("+(y||"obj")+") {\n"+(y?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+p+"return __p\n}";var m=Ju(function(){return Ho(s,v+"return "+p).apply(M,f)});if(m.source=p,Ti(m))throw m;return m}function bo(t,e,n){var r=t;return(t=c(t))?(n?Zn(r,e,n):null==e)?t.slice(E(t),k(t)+1):(e+="",t.slice(f(t,e),l(t,e)+1)):t}function wo(t,e,n){var r=t;return t=c(t),t?(n?Zn(r,e,n):null==e)?t.slice(E(t)):t.slice(f(t,e+"")):t}function xo(t,e,n){var r=t;return t=c(t),t?(n?Zn(r,e,n):null==e)?t.slice(0,k(t)+1):t.slice(0,l(t,e+"")+1):t}function Eo(t,e,n){n&&Zn(t,e,n)&&(e=M);var r=B,i=D;if(null!=e)if(Ii(e)){var o="separator"in e?e.separator:o;r="length"in e?+e.length||0:r,i="omission"in e?c(e.omission):i}else r=+e||0;if(t=c(t),r>=t.length)return t;var a=r-i.length;if(a<1)return i;var u=t.slice(0,a);if(null==o)return u+i;if(zi(o)){if(t.slice(a).search(o)){var s,f,l=t.slice(0,a);for(o.global||(o=Xo(o.source,(It.exec(o)||"")+"g")),o.lastIndex=0;s=o.exec(l);)f=s.index;u=u.slice(0,null==f?a:f)}}else if(t.indexOf(o,a)!=a){var h=u.lastIndexOf(o);h>-1&&(u=u.slice(0,h))}return u+i}function ko(t){return t=c(t),t&&wt.test(t)?t.replace(_t,P):t}function Po(t,e,n){return n&&Zn(t,e,n)&&(e=M),t=c(t),t.match(e||zt)||[]}function So(t,e,n){return n&&Zn(t,e,n)&&(e=M),_(t)?Ao(t):be(t,e)}function Mo(t){return function(){return t}}function Oo(t){return t}function Ao(t){return De(we(t,!0))}function Co(t,e){return Ue(t,we(e,!0))}function To(t,e,n){if(null==n){var r=Ii(e),i=r?Uu(e):M,o=i&&i.length?je(e,i):M;(o?o.length:r)||(o=!1,n=e,e=t,t=this)}o||(o=je(e,Uu(e)));var a=!0,u=-1,s=ji(t),c=o.length;n===!1?a=!1:Ii(n)&&"chain"in n&&(a=n.chain);for(;++u<c;){var f=o[u],l=e[f];t[f]=l,s&&(t.prototype[f]=function(e){return function(){var n=this.__chain__;if(a||n){var r=t(this.__wrapped__),i=r.__actions__=te(this.__actions__);return i.push({func:e,args:arguments,thisArg:t}),r.__chain__=n,r}return e.apply(t,ce([this.value()],arguments))}}(l))}return t}function Ro(){return re._=ia,this}function jo(){}function Io(t){return tr(t)?Ye(t):He(t)}function Fo(t){return function(e){return Ie(t,hr(e),e+"")}}function Lo(t,e,n){n&&Zn(t,e,n)&&(e=n=M),t=+t||0,n=null==n?1:+n||0,null==e?(e=t,t=0):e=+e||0;for(var r=-1,i=xa(ya((e-t)/(n||1)),0),o=zo(i);++r<i;)o[r]=t,t+=n;return o}function No(t,e,n){if(t=ma(t),t<1||!ba(t))return[];var r=-1,i=zo(Ea(t,Aa));for(e=an(e,n,1);++r<t;)r<Aa?i[r]=e(r):e(r);return i}function Bo(t){var e=++na;return c(t)+e}function Do(t,e){return(+t||0)+(+e||0)}function Uo(t,e,n){return n&&Zn(t,e,n)&&(e=M),e=zn(e,n,3),1==e.length?pe(Au(t)?t:fr(t),e):Ke(t,e)}t=t?ie.defaults(re.Object(),t,ie.pick(re,qt)):re;var zo=t.Array,qo=t.Date,Yo=t.Error,Ho=t.Function,Vo=t.Math,Go=t.Number,Wo=t.Object,Xo=t.RegExp,$o=t.String,Qo=t.TypeError,Jo=zo.prototype,Ko=Wo.prototype,Zo=$o.prototype,ta=Ho.prototype.toString,ea=Ko.hasOwnProperty,na=0,ra=Ko.toString,ia=re._,oa=Xo("^"+ta.call(ea).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),aa=t.ArrayBuffer,ua=t.clearTimeout,sa=t.parseFloat,ca=Vo.pow,fa=Ko.propertyIsEnumerable,la=Vn(t,"Set"),ha=t.setTimeout,pa=Jo.splice,da=t.Uint8Array,va=Vn(t,"WeakMap"),ya=Vo.ceil,ga=Vn(Wo,"create"),ma=Vo.floor,_a=Vn(zo,"isArray"),ba=t.isFinite,wa=Vn(Wo,"keys"),xa=Vo.max,Ea=Vo.min,ka=Vn(qo,"now"),Pa=t.parseInt,Sa=Vo.random,Ma=Go.NEGATIVE_INFINITY,Oa=Go.POSITIVE_INFINITY,Aa=4294967295,Ca=Aa-1,Ta=Aa>>>1,Ra=9007199254740991,ja=va&&new va,Ia={};e.support={};e.templateSettings={escape:Et,evaluate:kt,interpolate:Pt,variable:"",imports:{_:e}};var Fa=function(){function t(){}return function(e){if(Ii(e)){t.prototype=e;var n=new t;t.prototype=M}return n||{}}}(),La=hn(Te),Na=hn(Re,!0),Ba=pn(),Da=pn(!0),Ua=ja?function(t,e){return ja.set(t,e),t}:Oo,za=ja?function(t){return ja.get(t)}:jo,qa=Ye("length"),Ya=function(){var t=0,e=0;return function(n,r){var i=vu(),o=z-(i-e);if(e=i,o>0){if(++t>=U)return n}else t=0;return Ua(n,r)}}(),Ha=gi(function(t,e){return _(t)&&Jn(t)?Ee(t,Ae(e,!1,!0)):[]}),Va=xn(),Ga=xn(!0),Wa=gi(function(t){for(var e=t.length,n=e,r=zo(l),i=Yn(),o=i==u,a=[];n--;){var s=t[n]=Jn(s=t[n])?s:[];r[n]=o&&s.length>=120?vn(n&&s):null}var c=t[0],f=-1,l=c?c.length:0,h=r[0];t:for(;++f<l;)if(s=c[f],(h?Jt(h,s):i(a,s,0))<0){for(var n=e;--n;){var p=r[n];if((p?Jt(p,s):i(t[n],s,0))<0)continue t}h&&h.push(s),a.push(s)}return a}),Xa=gi(function(t,e){e=Ae(e);var n=me(t,e);return Ve(t,e.sort(o)),n}),$a=Ln(),Qa=Ln(!0),Ja=gi(function(t){return Ze(Ae(t,!1,!0))}),Ka=gi(function(t,e){return Jn(t)?Ee(t,e):[]}),Za=gi(Nr),tu=gi(function(t){var e=t.length,n=e>2?t[e-2]:M,r=e>1?t[e-1]:M;return e>2&&"function"==typeof n?e-=2:(n=e>1&&"function"==typeof r?(--e,r):M,r=M),t.length=e,Br(t,n,r)}),eu=gi(function(t){return t=Ae(t),this.thru(function(e){return Zt(Au(e)?e:[lr(e)],t)})}),nu=gi(function(t,e){return me(t,Ae(e))}),ru=fn(function(t,e,n){ea.call(t,n)?++t[n]:t[n]=1}),iu=wn(La),ou=wn(Na,!0),au=Pn(ee,La),uu=Pn(ne,Na),su=fn(function(t,e,n){ea.call(t,n)?t[n].push(e):t[n]=[e]}),cu=fn(function(t,e,n){t[n]=e}),fu=gi(function(t,e,n){var r=-1,i="function"==typeof e,o=tr(e),a=Jn(t)?zo(t.length):[];return La(t,function(t){var u=i?e:o&&null!=t?t[e]:M;a[++r]=u?u.apply(t,n):Qn(t,e,n)}),a}),lu=fn(function(t,e,n){t[n?0:1].push(e)},function(){return[[],[]]}),hu=Tn(fe,La),pu=Tn(le,Na),du=gi(function(t,e){if(null==t)return[];var n=e[2];return n&&Zn(e[0],e[1],n)&&(e.length=1),Je(t,Ae(e),[])}),vu=ka||function(){return(new qo).getTime()},yu=gi(function(t,e,n){var r=A;if(n.length){var i=w(n,yu.placeholder);r|=I}return Nn(t,r,e,n,i)}),gu=gi(function(t,e){e=e.length?Ae(e):Qi(t);for(var n=-1,r=e.length;++n<r;){var i=e[n];t[i]=Nn(t[i],A,t)}return t}),mu=gi(function(t,e,n){var r=A|C;if(n.length){var i=w(n,mu.placeholder);r|=I}return Nn(e,r,t,n,i)}),_u=mn(R),bu=mn(j),wu=gi(function(t,e){return xe(t,1,e)}),xu=gi(function(t,e,n){return xe(t,e,n)}),Eu=kn(),ku=kn(!0),Pu=gi(function(t,e){if(e=Ae(e),"function"!=typeof t||!oe(e,s))throw new Qo(V);var n=e.length;return gi(function(r){for(var i=Ea(r.length,n);i--;)r[i]=e[i](r[i]);return t.apply(this,r)})}),Su=Cn(I),Mu=Cn(F),Ou=gi(function(t,e){return Nn(t,N,M,M,M,Ae(e))}),Au=_a||function(t){return _(t)&&nr(t.length)&&ra.call(t)==X},Cu=ln(ze),Tu=ln(function(t,e,n){return n?ye(t,e,n):ge(t,e)}),Ru=_n(Tu,de),ju=_n(Cu,or),Iu=En(Te),Fu=En(Re),Lu=Sn(Ba),Nu=Sn(Da),Bu=Mn(Te),Du=Mn(Re),Uu=wa?function(t){var e=null==t?M:t.constructor;return"function"==typeof e&&e.prototype===t||"function"!=typeof t&&Jn(t)?cr(t):Ii(t)?wa(t):[]}:cr,zu=On(!0),qu=On(),Yu=gi(function(t,e){if(null==t)return{};if("function"!=typeof e[0]){var e=se(Ae(e),$o);return ar(t,Ee(to(t),e))}var n=an(e[0],e[1],3);return ur(t,function(t,e,r){return!n(t,e,r)})}),Hu=gi(function(t,e){return null==t?{}:"function"==typeof e[0]?ur(t,an(e[0],e[1],3)):ar(t,Ae(e))}),Vu=yn(function(t,e,n){return e=e.toLowerCase(),t+(n?e.charAt(0).toUpperCase()+e.slice(1):e)}),Gu=yn(function(t,e,n){return t+(n?"-":"")+e.toLowerCase()}),Wu=An(),Xu=An(!0),$u=yn(function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}),Qu=yn(function(t,e,n){return t+(n?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),Ju=gi(function(t,e){try{return t.apply(M,e)}catch(t){return Ti(t)?t:new Yo(t)}}),Ku=gi(function(t,e){return function(n){return Qn(n,t,e)}}),Zu=gi(function(t,e){return function(n){return Qn(t,n,e)}}),ts=Fn("ceil"),es=Fn("floor"),ns=bn(Ei,Ma),rs=bn(Vi,Oa),is=Fn("round");return e.prototype=n.prototype,r.prototype=Fa(n.prototype),r.prototype.constructor=r,i.prototype=Fa(n.prototype),i.prototype.constructor=i,ot.prototype.delete=Gt,ot.prototype.get=Wt,ot.prototype.has=Xt,ot.prototype.set=$t,Qt.prototype.push=Kt,di.Cache=ot,e.after=fi,e.ary=li,e.assign=Tu,e.at=nu,e.before=hi,e.bind=yu,e.bindAll=gu,e.bindKey=mu,e.callback=So,e.chain=zr,e.chunk=dr,e.compact=vr,e.constant=Mo,e.countBy=ru,e.create=$i,e.curry=_u,e.curryRight=bu,e.debounce=pi,e.defaults=Ru,e.defaultsDeep=ju,e.defer=wu,e.delay=xu,e.difference=Ha,e.drop=yr,e.dropRight=gr,e.dropRightWhile=mr,e.dropWhile=_r,e.fill=br,e.filter=Jr,e.flatten=xr,e.flattenDeep=Er,e.flow=Eu,e.flowRight=ku,e.forEach=au,e.forEachRight=uu,e.forIn=Lu,e.forInRight=Nu,e.forOwn=Bu,e.forOwnRight=Du,e.functions=Qi,e.groupBy=su,e.indexBy=cu,e.initial=Pr,e.intersection=Wa,e.invert=Zi,e.invoke=fu,e.keys=Uu,e.keysIn=to,e.map=ti,e.mapKeys=zu,e.mapValues=qu,e.matches=Ao,e.matchesProperty=Co,e.memoize=di,e.merge=Cu,e.method=Ku,e.methodOf=Zu,e.mixin=To,e.modArgs=Pu,e.negate=vi,e.omit=Yu,e.once=yi,e.pairs=eo,e.partial=Su,e.partialRight=Mu,e.partition=lu,e.pick=Hu,e.pluck=ei,e.property=Io,e.propertyOf=Fo,e.pull=Or,e.pullAt=Xa,e.range=Lo,e.rearg=Ou,e.reject=ni,e.remove=Ar,e.rest=Cr,e.restParam=gi,e.set=ro,e.shuffle=ii,e.slice=Tr,e.sortBy=ui,e.sortByAll=du,e.sortByOrder=si,e.spread=mi,e.take=Rr,e.takeRight=jr,e.takeRightWhile=Ir,e.takeWhile=Fr,e.tap=qr,e.throttle=_i,e.thru=Yr,e.times=No,e.toArray=Wi,e.toPlainObject=Xi,e.transform=io,e.union=Ja,e.uniq=Lr,e.unzip=Nr,e.unzipWith=Br,e.values=oo,e.valuesIn=ao,e.where=ci,e.without=Ka,e.wrap=bi,e.xor=Dr,e.zip=Za,e.zipObject=Ur,e.zipWith=tu,e.backflow=ku,e.collect=ti,e.compose=ku,e.each=au,e.eachRight=uu,e.extend=Tu,e.iteratee=So,e.methods=Qi,e.object=Ur,e.select=Jr,e.tail=Cr,e.unique=Lr,To(e,e),e.add=Do,e.attempt=Ju,e.camelCase=Vu,e.capitalize=co,e.ceil=ts,e.clone=wi,e.cloneDeep=xi,e.deburr=fo,e.endsWith=lo,e.escape=ho,e.escapeRegExp=po,e.every=Qr,e.find=iu,e.findIndex=Va,e.findKey=Iu,e.findLast=ou,e.findLastIndex=Ga,e.findLastKey=Fu,e.findWhere=Kr,e.first=wr,e.floor=es,e.get=Ji,e.gt=Ei,e.gte=ki,e.has=Ki,e.identity=Oo,e.includes=Zr,e.indexOf=kr,e.inRange=uo,e.isArguments=Pi,e.isArray=Au,e.isBoolean=Si,e.isDate=Mi,e.isElement=Oi,e.isEmpty=Ai,e.isEqual=Ci,e.isError=Ti,e.isFinite=Ri,e.isFunction=ji,e.isMatch=Fi,e.isNaN=Li,e.isNative=Ni,e.isNull=Bi,e.isNumber=Di,e.isObject=Ii,e.isPlainObject=Ui,e.isRegExp=zi,e.isString=qi,e.isTypedArray=Yi,e.isUndefined=Hi,e.kebabCase=Gu,e.last=Sr,e.lastIndexOf=Mr,e.lt=Vi,e.lte=Gi,e.max=ns,e.min=rs,e.noConflict=Ro,e.noop=jo,e.now=vu,e.pad=vo,e.padLeft=Wu,e.padRight=Xu,e.parseInt=yo,e.random=so,e.reduce=hu,e.reduceRight=pu,e.repeat=go,e.result=no,e.round=is,e.runInContext=S,e.size=oi,e.snakeCase=$u,e.some=ai,e.sortedIndex=$a,e.sortedLastIndex=Qa,e.startCase=Qu,e.startsWith=mo,e.sum=Uo,e.template=_o,e.trim=bo,e.trimLeft=wo,e.trimRight=xo,e.trunc=Eo,e.unescape=ko,e.uniqueId=Bo,e.words=Po,e.all=Qr,e.any=ai,e.contains=Zr,e.eq=Ci,e.detect=iu,e.foldl=hu,e.foldr=pu,e.head=wr,e.include=Zr,e.inject=hu,To(e,function(){var t={};return Te(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.sample=ri,e.prototype.sample=function(t){return this.__chain__||null!=t?this.thru(function(e){return ri(e,t)}):ri(this.value())},e.VERSION=O,ee(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){e[t].placeholder=e}),ee(["drop","take"],function(t,e){i.prototype[t]=function(n){var r=this.__filtered__;if(r&&!e)return new i(this);n=null==n?1:xa(ma(n)||0,0);var o=this.clone();return r?o.__takeCount__=Ea(o.__takeCount__,n):o.__views__.push({size:n,type:t+(o.__dir__<0?"Right":"")}),o},i.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),ee(["filter","map","takeWhile"],function(t,e){var n=e+1,r=n!=H;i.prototype[t]=function(t,e){var i=this.clone();return i.__iteratees__.push({iteratee:zn(t,e,1),type:n}),i.__filtered__=i.__filtered__||r,i}}),ee(["first","last"],function(t,e){var n="take"+(e?"Right":"");i.prototype[t]=function(){return this[n](1).value()[0]}}),ee(["initial","rest"],function(t,e){var n="drop"+(e?"":"Right");i.prototype[t]=function(){return this.__filtered__?new i(this):this[n](1)}}),ee(["pluck","where"],function(t,e){var n=e?"filter":"map",r=e?De:Io;i.prototype[t]=function(t){return this[n](r(t))}}),i.prototype.compact=function(){return this.filter(Oo)},i.prototype.reject=function(t,e){return t=zn(t,e,1),this.filter(function(e){return!t(e)})},i.prototype.slice=function(t,e){t=null==t?0:+t||0;var n=this;return n.__filtered__&&(t>0||e<0)?new i(n):(t<0?n=n.takeRight(-t):t&&(n=n.drop(t)),e!==M&&(e=+e||0,n=e<0?n.dropRight(-e):n.take(e-t)),n)},i.prototype.takeRightWhile=function(t,e){return this.reverse().takeWhile(t,e).reverse()},i.prototype.toArray=function(){return this.take(Oa)},Te(i.prototype,function(t,n){var o=/^(?:filter|map|reject)|While$/.test(n),a=/^(?:first|last)$/.test(n),u=e[a?"take"+("last"==n?"Right":""):n];u&&(e.prototype[n]=function(){var e=a?[1]:arguments,n=this.__chain__,s=this.__wrapped__,c=!!this.__actions__.length,f=s instanceof i,l=e[0],h=f||Au(s);h&&o&&"function"==typeof l&&1!=l.length&&(f=h=!1);var p=function(t){return a&&n?u(t,1)[0]:u.apply(M,ce([t],e))},d={func:Yr,args:[p],thisArg:M},v=f&&!c;if(a&&!n)return v?(s=s.clone(),s.__actions__.push(d),t.call(s)):u.call(M,this.value())[0];if(!a&&h){s=v?s:new i(this);var y=t.apply(s,e);return y.__actions__.push(d),new r(y,n)}return this.thru(p)})}),ee(["join","pop","push","replace","shift","sort","splice","split","unshift"],function(t){var n=(/^(?:replace|split)$/.test(t)?Zo:Jo)[t],r=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",i=/^(?:join|pop|replace|shift)$/.test(t);e.prototype[t]=function(){var t=arguments;return i&&!this.__chain__?n.apply(this.value(),t):this[r](function(e){return n.apply(e,t)})}}),Te(i.prototype,function(t,n){var r=e[n];if(r){var i=r.name,o=Ia[i]||(Ia[i]=[]);o.push({name:n,func:r})}}),Ia[Rn(M,C).name]=[{name:"wrapper",func:M}],i.prototype.clone=b,i.prototype.reverse=Z,i.prototype.value=rt,e.prototype.chain=Hr,e.prototype.commit=Vr,e.prototype.concat=eu,e.prototype.plant=Gr,e.prototype.reverse=Wr,e.prototype.toString=Xr,e.prototype.run=e.prototype.toJSON=e.prototype.valueOf=e.prototype.value=$r,e.prototype.collect=e.prototype.map,e.prototype.head=e.prototype.first,e.prototype.select=e.prototype.filter,e.prototype.tail=e.prototype.rest,e}var M,O="3.10.1",A=1,C=2,T=4,R=8,j=16,I=32,F=64,L=128,N=256,B=30,D="...",U=150,z=16,q=200,Y=1,H=2,V="Expected a function",G="__lodash_placeholder__",W="[object Arguments]",X="[object Array]",$="[object Boolean]",Q="[object Date]",J="[object Error]",K="[object Function]",Z="[object Map]",tt="[object Number]",et="[object Object]",nt="[object RegExp]",rt="[object Set]",it="[object String]",ot="[object WeakMap]",at="[object ArrayBuffer]",ut="[object Float32Array]",st="[object Float64Array]",ct="[object Int8Array]",ft="[object Int16Array]",lt="[object Int32Array]",ht="[object Uint8Array]",pt="[object Uint8ClampedArray]",dt="[object Uint16Array]",vt="[object Uint32Array]",yt=/\b__p \+= '';/g,gt=/\b(__p \+=) '' \+/g,mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_t=/&(?:amp|lt|gt|quot|#39|#96);/g,bt=/[&<>"'`]/g,wt=RegExp(_t.source),xt=RegExp(bt.source),Et=/<%-([\s\S]+?)%>/g,kt=/<%([\s\S]+?)%>/g,Pt=/<%=([\s\S]+?)%>/g,St=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\n\\]|\\.)*?\1)\]/,Mt=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g,At=/^[:!,]|[\\^$.*+?()[\]{}|\/]|(^[0-9a-fA-Fnrtuvx])|([\n\r\u2028\u2029])/g,Ct=RegExp(At.source),Tt=/[\u0300-\u036f\ufe20-\ufe23]/g,Rt=/\\(\\)?/g,jt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,It=/\w*$/,Ft=/^0[xX]/,Lt=/^\[object .+?Constructor\]$/,Nt=/^\d+$/,Bt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Dt=/($^)/,Ut=/['\n\r\u2028\u2029\\]/g,zt=function(){var t="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(t+"+(?="+t+e+")|"+t+"?"+e+"|"+t+"+|[0-9]+","g")}(),qt=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","isFinite","parseFloat","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap"],Yt=-1,Ht={};Ht[ut]=Ht[st]=Ht[ct]=Ht[ft]=Ht[lt]=Ht[ht]=Ht[pt]=Ht[dt]=Ht[vt]=!0,Ht[W]=Ht[X]=Ht[at]=Ht[$]=Ht[Q]=Ht[J]=Ht[K]=Ht[Z]=Ht[tt]=Ht[et]=Ht[nt]=Ht[rt]=Ht[it]=Ht[ot]=!1;var Vt={};Vt[W]=Vt[X]=Vt[at]=Vt[$]=Vt[Q]=Vt[ut]=Vt[st]=Vt[ct]=Vt[ft]=Vt[lt]=Vt[tt]=Vt[et]=Vt[nt]=Vt[it]=Vt[ht]=Vt[pt]=Vt[dt]=Vt[vt]=!0,Vt[J]=Vt[K]=Vt[Z]=Vt[rt]=Vt[ot]=!1;var Gt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Xt={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},$t={function:!0,object:!0},Qt={0:"x30",1:"x31",2:"x32",3:"x33",4:"x34",5:"x35",6:"x36",7:"x37",8:"x38",9:"x39",A:"x41",B:"x42",C:"x43",D:"x44",E:"x45",F:"x46",a:"x61",b:"x62",c:"x63",d:"x64",e:"x65",f:"x66",n:"x6e",r:"x72",t:"x74",u:"x75",v:"x76",x:"x78"},Jt={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Kt=$t[typeof e]&&e&&!e.nodeType&&e,Zt=$t[typeof t]&&t&&!t.nodeType&&t,te=Kt&&Zt&&"object"==typeof i&&i&&i.Object&&i,ee=$t[typeof self]&&self&&self.Object&&self,ne=$t[typeof window]&&window&&window.Object&&window,re=(Zt&&Zt.exports===Kt&&Kt,te||ne!==(this&&this.window)&&ne||ee||this),ie=S();re._=ie,r=function(){return ie}.call(e,n,e,t),!(r!==M&&(t.exports=r))}).call(this)}).call(e,n(373)(t),function(){return this}())},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.BrushFactory=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=(n(375),n(370)),a=n(376),u={"local://color":a.LocalColor,"local://ramp":a.LocalRamp,"local://field-color":a.LocalFieldColor,"remote://imagery":a.RemoteImagery};e.BrushFactory=function(){function t(){r(this,t)}return i(t,null,[{key:"createBrush",value:function(t){var e=(0,o.parseBrushSpec)(t),n=e.scheme,r=e.name,i=e.params,a=n+"://"+r,s=u[a];if(!s)throw new Error("Unrecognized brush spec: "+a);return new s(t,n,r,i)}},{key:"serializeBrushes",value:function(t){return t.map(function(t){return t?{s:t.brushSpec,p:t.serialize()}:null})}},{key:"deserializeBrushes",value:function(e){return e.map(function(e){if(!e)return null;if(!e.s)throw new Error("Invalid object to deserialize, a brushes being deserialized must be serialized with the serializer function.");var n=t.createBrush(e.s);return n.deserialize(e.p),n})}},{key:"registerBrush",value:function(t,e,n){var r=t+"://"+e;u[r]=n}},{key:"deregisterBrush",value:function(t,e){var n=t+"://"+e;delete u[n]}},{key:"availableBrushes",value:function(){return Object.keys(u)}},{key:"beginTransferForBrushes",value:function(t,e){for(var n=[],r=[],i=0,o=e.length;i<o;i++){var a=e[i];if(a){var u=a.beginTransfer(t);r.push({brushSpec:a.brushSpec,params:u.params}),n=n.concat(u.transferList||[])}}return{params:r,transferList:n}}},{key:"endTransferForBrushes",value:function(e,n){return n.map(function(n){if(!n)return null;var r=t.createBrush(n.brushSpec);return r.endTransfer(e,n.params),r})}},{key:"endTransferOntoBrushes",value:function(t,e,n){return n.map(function(n,r){return n?(e[r].endTransfer(t,n.params),e[r]):null})}}]),t}()},function(t,e){"use strict";function n(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.NodeSelectionStrategy=Object.freeze({NONE:0,ALL:1,ANCESTORS:2}),e.ClampSelector=Object.freeze({NONE:0,COLOR_RANGE:1,Z_RANGE:2,INTENSITY_RANGE:3}),e.TransferDirection=Object.freeze({MAIN_TO_WORKER:0,WORKER_TO_MAIN:1}),e.BaseBrush=function(){function t(e,n,i,o){r(this,t),this.brushScheme=n,this.brushName=i,this.brushSpec=e,this.brushParams=o}return i(t,[{key:"serialize",value:function(){throw new Error("Not implemented")}},{key:"deserialize",value:function(t){throw new Error("Not implemented")}},{key:"beginTransfer",value:function(t){throw new Error("Not implemented")}},{key:"endTransfer",value:function(t,e){throw new Error("Not implemented")}},{key:"prepare",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function t(e,n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented");case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"stagingAttributes",value:function(t,e,n){
throw new Error("Not implemented")}},{key:"nodeSelectionStrategy",value:function(t){throw new Error("Not implemented")}},{key:"bufferNeedsRecolor",value:function(t,e,n){throw new Error("Not implemented")}},{key:"unprepare",value:function(){function t(t){return e.apply(this,arguments)}var e=n(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:throw new Error("Not implemented");case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"colorPoint",value:function(t,e){throw new Error("Not implemented")}},{key:"requiredSchemaFields",value:function(){throw new Error("Not implemented")}},{key:"rampConfiguration",value:function(){throw new Error("Not implemented")}}]),t}()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(377);Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return r[t]}})});var i=n(378);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var o=n(379);Object.keys(o).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return o[t]}})});var a=n(380);Object.keys(a).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return a[t]}})})},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LocalColor=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(375);e.LocalColor=function(t){function e(t,n,r,a){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,a))}return a(e,t),u(e,[{key:"serialize",value:function(){return{}}},{key:"deserialize",value:function(t){}},{key:"beginTransfer",value:function(t){return{params:{needScale:this.needScale,scalef:this.scalef},transferList:[]}}},{key:"endTransfer",value:function(t,e){this.needScale=e.needScale,this.scalef=e.scalef}},{key:"prepare",value:function(){function t(t,e,r){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function t(n,r,i){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.needScale=e._is16bit(n),console.log("-- -- -- -- ",this.needScale),this.scalef=this.needScale?1/256:1;case 3:case"end":return t.stop()}},t,this)}));return t}()},{key:"stagingAttributes",value:function(t,n,r){return{is16bit:e._is16bit(t)}}},{key:"nodeSelectionStrategy",value:function(t){return{strategy:s.NodeSelectionStrategy.ALL,params:{is16bit:e._is16bit(t)}}}},{key:"bufferNeedsRecolor",value:function(t,e,n){return e.is16bit!==n.is16bit}},{key:"unprepare",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:delete this.needScale,delete this.scalef;case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"colorPoint",value:function(t,e){this.needScale?(t[0]=Math.floor(e.red*this.scalef),t[1]=Math.floor(e.green*this.scalef),t[2]=Math.floor(e.blue*this.scalef)):(t[0]=e.red,t[1]=e.green,t[2]=e.blue)}},{key:"requiredSchemaFields",value:function(){return["Red","Green","Blue"]}},{key:"rampConfiguration",value:function(){return{selector:s.ClampSelector.NONE}}}],[{key:"_is16bit",value:function(t){var e=t.pointCloudBufferStats;if(e.red){var n=!0,r=!1,i=void 0;try{for(var o,a=e.red.keys()[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var u=o.value;if(u>256)return!0}}catch(t){r=!0,i=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw i}}}return!1}}]),e}(s.BaseBrush)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LocalRamp=void 0;var u=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(375),f=n(370),l={z:c.ClampSelector.Z_RANGE,intensity:c.ClampSelector.INTENSITY_RANGE};e.LocalRamp=function(t){function e(t,n,r,a){i(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,a));return u.field=(0,f.checkParam)(a,"field"),u.step=parseInt((0,f.checkParam)(a,"step","1")),0==u.step&&(u.step=1),u.field=u.field.toLowerCase(),u.readField="z"==u.field.toLowerCase()?"y":u.field,u.rampStartColor=(0,f.parseColor)(a.start)||[0,0,0],u.rampEndColor=(0,f.parseColor)(a.end)||[1,1,1],u.selector=(0,f.checkParam)(l,u.field),u}return a(e,t),s(e,[{key:"serialize",value:function(){return{}}},{key:"deserialize",value:function(t){}},{key:"beginTransfer",value:function(t){return{params:{noColor:this.noColor,min:this.min,max:this.max,scalef:this.scalef,readField:this.readField},transferList:[]}}},{key:"endTransfer",value:function(t,e){this.noColor=e.noColor,this.min=e.min,this.max=e.max,this.scalef=e.scalef,this.readField=e.readField}},{key:"_statsToFieldRange",value:function(t){var e=t.pointCloudBufferStats,n=e[this.field];return n?this._minmax(n.keys()):[0,1]}},{key:"_minmax",value:function(t){var e=Number.MAX_SAFE_INTEGER,n=Number.MIN_SAFE_INTEGER,r=null,i=!0,o=!1,a=void 0;try{for(var u,s=t[Symbol.iterator]();!(i=(u=s.next()).done);i=!0)r=u.value,e>r&&(e=r),n<r&&(n=r)}catch(t){o=!0,a=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw a}}return[e,n]}},{key:"prepare",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r){var i,o,a,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=this._statsToFieldRange(e),o=u(i,2),a=o[0],s=o[1],a>=s?this.noColor=!0:(this.min=a,this.max=s,this.scalef=255/(this.step*(s-a)));case 2:case"end":return t.stop()}},t,this)}));return t}()},{key:"stagingAttributes",value:function(t,e,n){return this.noColor?{}:{min:this.min,max:this.max}}},{key:"nodeSelectionStrategy",value:function(t){var e=this._statsToFieldRange(t),n=u(e,2),r=n[0],i=n[1];return r>=i?{strategy:c.NodeSelectionStrategy.NONE}:{strategy:c.NodeSelectionStrategy.ALL,params:[r,i]}}},{key:"bufferNeedsRecolor",value:function(t,e,n){var r=n.min,i=n.max,o=u(e,2),a=o[0],s=o[1];return r!==a||i!==s}},{key:"unprepare",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:delete this.min,delete this.max,delete this.scalef,delete this.noColor;case 4:case"end":return t.stop()}},t,this)}));return t}()},{key:"colorPoint",value:function(t,e){if(this.noColor)t[0]=t[1]=t[2]=0;else{var n=Math.floor(this.scalef*(e[this.readField]-this.min))*this.step;t[0]=n,t[1]=n,t[2]=n}}},{key:"requiredSchemaFields",value:function(){return[this.field]}},{key:"rampConfiguration",value:function(){return{selector:this.selector,start:this.rampStartColor,end:this.rampEndColor}}}]),e}(c.BaseBrush)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LocalFieldColor=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(375),c=n(370);e.LocalFieldColor=function(t){function e(t,n,r,a){i(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,a));return u.field=(0,c.checkParam)(a,"field"),u.saturation=parseFloat((0,c.checkParam)(a,"saturation","0.5")),u.lightness=parseFloat((0,c.checkParam)(a,"lightness","0.5")),u.scale=parseFloat((0,c.checkParam)(a,"scale",1e3)),u.field=u.field.toLowerCase(),u.readField="z"==u.field?"y":"y"==u.field?"z":u.field,u}return a(e,t),u(e,[{key:"serialize",value:function(){return{}}},{key:"deserialize",value:function(t){}},{key:"beginTransfer",value:function(t){return{params:{readField:this.readField,scale:this.scale,saturation:this.saturation,lightness:this.lightness},transferList:[]}}},{key:"endTransfer",value:function(t,e){this.readField=e.readField,this.scale=e.scale,this.saturation=e.saturation,this.lightness=e.lightness}},{key:"prepare",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return t}()},{key:"stagingAttributes",value:function(t,e,n){return{}}},{key:"nodeSelectionStrategy",value:function(t){return{strategy:s.NodeSelectionStrategy.NONE}}},{key:"bufferNeedsRecolor",value:function(t,e,n){return!1}},{key:"unprepare",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return t}()},{key:"colorPoint",value:function(t,e){var n=e[this.readField];(0,c.hslToRgb)(Math.floor(Math.abs(n)*this.scale%360)/360,this.saturation,this.lightness,t)}},{key:"requiredSchemaFields",value:function(){return[this.field]}},{key:"rampConfiguration",value:function(){return{selector:s.ClampSelector.NONE}}}]),e}(s.BaseBrush)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.RemoteImagery=void 0;var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(375),c=n(381),f=n(370);n(385),e.RemoteImagery=function(t){function e(t,n,r,a){i(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,a));if(u.url=(0,f.checkParam)(a,"url"),u.url.indexOf("{{x}}")==-1||u.url.indexOf("{{y}}")==-1||u.url.indexOf("{{z}}")==-1)throw new Error("The url parameter needs to have placeholders for {{x}}, {{y}} and {{z}} variables.");return u.scheme=(0,f.checkParam)(a,"scheme","tms"),u.quality=parseInt((0,f.checkParam)(a,"quality","1")),u}return a(e,t),u(e,[{key:"serialize",value:function(){return{}}},{key:"deserialize",value:function(t){}},{key:"beginTransfer",value:function(t){return{params:{imageData:this.imageData,bounds:this.bounds,w:this.w,h:this.h},transferList:[this.imageData.buffer]}}},{key:"endTransfer",value:function(t,e){this.bounds=e.bounds,this.imageData=e.imageData,this.w=e.w,this.h=e.h}},{key:"prepare",value:function(){function t(t,n,r){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r){var i,o,a,u,s,l,h,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.geoTransform,o=e.renderSpaceBounds,a=e.treePath,u=e.lastStagedAttributes,s=i.transform(o,"render","geo"),l=[s[0],s[1],s[3],s[4]],!u||!u.image){t.next=7;break}this.image=u.image,t.next=14;break;case 7:if(!(8==r.length||1==r.length&&(0,f.equalBounds)(o,r[0].renderSpaceBounds))){t.next=11;break}this.image=c.TileLoader.emptyCanvas(),t.next=14;break;case 11:return t.next=13,c.TileLoader.loadImage(this.url,l,this.quality,this.scheme);case 13:this.image=t.sent;case 14:h=this.image.width,p=this.image.height,this._splatChildImagery(this.image,o,r),this.imageData=this.image.getContext("2d").getImageData(0,0,h,p).data,this.bounds=o,this.w=h,this.h=p;case 20:case"end":return t.stop()}},t,this)}));return t}()},{key:"stagingAttributes",value:function(t,e,n){return{image:this.image,renderSpaceBounds:t.renderSpaceBounds.slice(0)}}},{key:"nodeSelectionStrategy",value:function(t){return{strategy:s.NodeSelectionStrategy.ANCESTORS}}},{key:"bufferNeedsRecolor",value:function(t,e,n){return!0}},{key:"unprepare",value:function(){function t(t){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.bounds=this.imageData=this.image=this.w=this.h=null,delete this.bounds,delete this.imageData,delete this.image,delete this.w,delete this.h;case 6:case"end":return t.stop()}},t,this)}));return t}()},{key:"colorPoint",value:function(t,e){var n=e.x,r=e.z,i=this.w,o=this.h,a=this.bounds,u=this.imageData,s=Math.floor((0,f.maprange)(a[0],a[3],n,i,0)),c=Math.floor((0,f.maprange)(a[2],a[5],r,o,0)),l=4*(c*i+s);t[0]=u[l],t[1]=u[l+1],t[2]=u[l+2]}},{key:"requiredSchemaFields",value:function(){return["X","Y","Z"]}},{key:"rampConfiguration",value:function(){return{selector:s.ClampSelector.NONE}}},{key:"_splatChildImagery",value:function(t,e,n){for(var r=t.width,i=t.height,o=t.getContext("2d"),a=0,u=n.length;a<u;a++){var s=n[a].renderSpaceBounds,c=Math.floor((0,f.maprange)(e[0],e[3],s[0],0,r)),l=Math.floor((0,f.maprange)(e[2],e[5],s[2],0,i)),h=r/2-c,p=i/2-l;n[a].image&&o.drawImage(n[a].image,h,p,r/2,i/2)}}}]),e}(s.BaseBrush)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new u.Promise(function(t,n){function r(i,o){try{var a=e[i](o),s=a.value}catch(t){return void n(t)}return a.done?void t(s):u.Promise.resolve(s).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.TileLoader=void 0;var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(330),s=n(382),c=n(370),f=n(383),l=n(384),h=256,p=[[15,5],[18,10],[21,25]],d=new l(s.Device.caps().imageryCacheSize);e.TileLoader=function(){function t(){i(this,t)}return a(t,null,[{key:"loadImage",value:function(){function e(t,e,r,i){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function e(n,r,i,o){var a,u,s,c,l,h,v,y,g,m,_;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r,u=n,s=o,c=t._cacheKey(a,u,i,s),l=d.get(c),!l){e.next=7;break}return e.abrupt("return",l);case 7:return h=p[i],v=new f,y=t._tilesForRegion(v,h,a),e.next=12,t._loadAllTiles(y,u);case 12:return g=e.sent,m=t.emptyCanvas(),_=m.getContext("2d"),t._drawTilesToCanvas(_,a,g),d.set(c,m),e.abrupt("return",m);case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"emptyCanvas",value:function(){var t=document.createElement("canvas");return t.width=h,t.height=h,t}},{key:"_detailLevel",value:function(t,e,n){for(var r=n.slice(0,2),i=n.slice(2),a=t.inverse(r).concat(t.inverse(i)),u=o(e,2),s=u[0],c=u[1],f=s,l=null;f>0;){l=t.xyz(a,f);var h=(l.maxX-l.minX+1)*(l.maxY-l.minY+1);if(h<c)break;f--}return{region:a,zoom:f,range:l}}},{key:"_forwardBBoxCenter",value:function(t,e){var n=t.forward(e.slice(0,2)).concat(t.forward(e.slice(2,4)));return[[n[0]+(n[2]-n[0])/2,n[1]+(n[3]-n[1])/2],n]}},{key:"_tilesForRegion",value:function(e,n,r){for(var i=t._detailLevel(e,n,r),a=i.zoom,u=i.range,s=i.region,c=t._forwardBBoxCenter(e,s),f=o(c,2),l=f[0],h=(f[1],[]),p=u.minY;p<=u.maxY;p++)for(var d=u.minX;d<=u.maxX;d++){var v=e.bbox(d,p,a),y=t._forwardBBoxCenter(e,v),g=o(y,2),m=g[0],_=g[1];h.push({center:m,bbox:_,x:d,y:p,zoom:a,offset:[l[0]-m[0],l[1]-m[1]]})}return h}},{key:"_fetchTile",value:function(){function t(t,n){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new u.Promise(function(t,r){var i=n.replace("{{x}}",e.x.toString()).replace("{{y}}",e.y.toString()).replace("{{z}}",e.zoom.toString()),o=new Image;o.crossOrigin="",o.onerror=function(){r(new Error("Image tile failed to load"))},o.onload=function(){t({tile:e,image:o})},o.src=(0,c.pickOne)(i)}));case 1:case"end":return t.stop()}},t,this)}));return t}()},{key:"_loadAllTiles",value:function(){function e(t,e){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function e(n,r){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.Promise.all(n.map(function(e){return t._fetchTile(e,r)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"_drawTilesToCanvas",value:function(t,e,n){for(var r=e[2]-e[0],i=e[3]-e[1],o=h/r,a=h/i,u=0,s=n.length;u<s;u++){var c=n[u],f=(c.tile.bbox[2]-c.tile.bbox[0])*o,l=(c.tile.bbox[3]-c.tile.bbox[1])*a,p=-c.tile.offset[0]*o,d=c.tile.offset[1]*a,v=128+p-f/2,y=128+d-l/2;t.drawImage(c.image,v,y,f,l)}}},{key:"_cacheKey",value:function(t,e,n,r){return t.map(function(t){return t.toFixed(3)}).join(":")+e+n+r}}]),t}()},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.Device=function(){function t(){n(this,t)}return r(t,null,[{key:"__getCaps",value:function(){return t.__caps||(t.__caps={loaderCount:5,imageryCacheSize:200,nodeRejectionRatio:.35}),t.__caps}},{key:"deviceSupportsPlasio",value:function(){return!(!1 in Window)}},{key:"caps",value:function(){return t.__getCaps()}},{key:"overrideProperty",value:function(e,n){var r=t.caps();r[e]=n}}]),t}()},function(t,e,n){var r=function(){function t(t){if(t=t||{},this.size=t.size||256,!e[this.size]){var n=this.size,r=e[this.size]={};r.Bc=[],r.Cc=[],r.zc=[],r.Ac=[];for(var i=0;i<30;i++)r.Bc.push(n/360),r.Cc.push(n/(2*Math.PI)),r.zc.push(n/2),r.Ac.push(n),n*=2}this.Bc=e[this.size].Bc,this.Cc=e[this.size].Cc,this.zc=e[this.size].zc,this.Ac=e[this.size].Ac}var e={},n=Math.PI/180,r=180/Math.PI,i=6378137,o=20037508.342789244;return t.prototype.px=function(t,e){var r=this.zc[e],i=Math.min(Math.max(Math.sin(n*t[1]),-.9999),.9999),o=Math.round(r+t[0]*this.Bc[e]),a=Math.round(r+.5*Math.log((1+i)/(1-i))*-this.Cc[e]);return o>this.Ac[e]&&(o=this.Ac[e]),a>this.Ac[e]&&(a=this.Ac[e]),[o,a]},t.prototype.ll=function(t,e){var n=(t[1]-this.zc[e])/-this.Cc[e],i=(t[0]-this.zc[e])/this.Bc[e],o=r*(2*Math.atan(Math.exp(n))-.5*Math.PI);return[i,o]},t.prototype.bbox=function(t,e,n,r,i){r&&(e=Math.pow(2,n)-1-e);var o=[t*this.size,(+e+1)*this.size],a=[(+t+1)*this.size,e*this.size],u=this.ll(o,n).concat(this.ll(a,n));return"900913"===i?this.convert(u,"900913"):u},t.prototype.xyz=function(t,e,n,r){"900913"===r&&(t=this.convert(t,"WGS84"));var i=[t[0],t[1]],o=[t[2],t[3]],a=this.px(i,e),u=this.px(o,e),s=[Math.floor(a[0]/this.size),Math.floor((u[0]-1)/this.size)],c=[Math.floor(u[1]/this.size),Math.floor((a[1]-1)/this.size)],f={minX:Math.min.apply(Math,s)<0?0:Math.min.apply(Math,s),minY:Math.min.apply(Math,c)<0?0:Math.min.apply(Math,c),maxX:Math.max.apply(Math,s),maxY:Math.max.apply(Math,c)};if(n){var l={minY:Math.pow(2,e)-1-f.maxY,maxY:Math.pow(2,e)-1-f.minY};f.minY=l.minY,f.maxY=l.maxY}return f},t.prototype.convert=function(t,e){return"900913"===e?this.forward(t.slice(0,2)).concat(this.forward(t.slice(2,4))):this.inverse(t.slice(0,2)).concat(this.inverse(t.slice(2,4)))},t.prototype.forward=function(t){var e=[i*t[0]*n,i*Math.log(Math.tan(.25*Math.PI+.5*t[1]*n))];return e[0]>o&&(e[0]=o),e[0]<-o&&(e[0]=-o),e[1]>o&&(e[1]=o),e[1]<-o&&(e[1]=-o),e},t.prototype.inverse=function(t){return[t[0]*r/i,(.5*Math.PI-2*Math.atan(Math.exp(-t[1]/i)))*r]},t}();t.exports=e=r},function(t,e){!function(){function e(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function n(){return 1}function r(t){h||"string"==typeof t||"number"==typeof t||(h=!0,console.error(new TypeError("LRU: key must be a string or number. Almost certainly a bug! "+typeof t).stack))}function i(t){return this instanceof i?("number"==typeof t&&(t={max:t}),t||(t={}),this._max=t.max,(!this._max||"number"!=typeof this._max||this._max<=0)&&(this._max=1/0),this._lengthCalculator=t.length||n,"function"!=typeof this._lengthCalculator&&(this._lengthCalculator=n),this._allowStale=t.stale||!1,this._maxAge=t.maxAge||null,this._dispose=t.dispose,void this.reset()):new i(t)}function o(t,e,n){r(e);var i=t._cache[e];return i&&(a(t,i)?(f(t,i),t._allowStale||(i=void 0)):n&&u(t,i),i&&(i=i.value)),i}function a(t,e){if(!e||!e.maxAge&&!t._maxAge)return!1;var n=!1,r=Date.now()-e.now;return n=e.maxAge?r>e.maxAge:t._maxAge&&r>t._maxAge}function u(t,e){c(t,e),e.lu=t._mru++,t._lruList[e.lu]=e}function s(t){for(;t._lru<t._mru&&t._length>t._max;)f(t,t._lruList[t._lru])}function c(t,e){for(delete t._lruList[e.lu];t._lru<t._mru&&!t._lruList[t._lru];)t._lru++}function f(t,e){e&&(t._dispose&&t._dispose(e.key,e.value),t._length-=e.length,t._itemCount--,delete t._cache[e.key],c(t,e))}function l(t,e,n,r,i,o){this.key=t,this.value=e,this.lu=n,this.length=r,this.now=i,o&&(this.maxAge=o)}"object"==typeof t&&t.exports?t.exports=i:this.LRUCache=i;var h=!1;Object.defineProperty(i.prototype,"max",{set:function(t){(!t||"number"!=typeof t||t<=0)&&(t=1/0),this._max=t,this._length>this._max&&s(this)},get:function(){return this._max},enumerable:!0}),Object.defineProperty(i.prototype,"lengthCalculator",{set:function(t){if("function"!=typeof t){this._lengthCalculator=n,this._length=this._itemCount;for(var e in this._cache)this._cache[e].length=1}else{this._lengthCalculator=t,this._length=0;for(var e in this._cache)this._cache[e].length=this._lengthCalculator(this._cache[e].value),this._length+=this._cache[e].length}this._length>this._max&&s(this)},get:function(){return this._lengthCalculator},enumerable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this._length},enumerable:!0}),Object.defineProperty(i.prototype,"itemCount",{get:function(){return this._itemCount},enumerable:!0}),i.prototype.forEach=function(t,e){e=e||this;for(var n=0,r=this._itemCount,i=this._mru-1;i>=0&&n<r;i--)if(this._lruList[i]){n++;var o=this._lruList[i];a(this,o)&&(f(this,o),this._allowStale||(o=void 0)),o&&t.call(e,o.value,o.key,this)}},i.prototype.keys=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.key}return t},i.prototype.values=function(){for(var t=new Array(this._itemCount),e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];t[e++]=r.value}return t},i.prototype.reset=function(){if(this._dispose&&this._cache)for(var t in this._cache)this._dispose(t,this._cache[t].value);this._cache=Object.create(null),this._lruList=Object.create(null),this._mru=0,this._lru=0,this._length=0,this._itemCount=0},i.prototype.dump=function(){for(var t=[],e=0,n=this._mru-1;n>=0&&e<this._itemCount;n--)if(this._lruList[n]){var r=this._lruList[n];a(this,r)||(++e,t.push({k:r.key,v:r.value,e:r.now+(r.maxAge||0)}))}return t},i.prototype.dumpLru=function(){return this._lruList},i.prototype.set=function(t,n,i){i=i||this._maxAge,r(t);var o=i?Date.now():0,a=this._lengthCalculator(n);if(e(this._cache,t))return a>this._max?(f(this,this._cache[t]),!1):(this._dispose&&this._dispose(t,this._cache[t].value),this._cache[t].now=o,this._cache[t].maxAge=i,this._cache[t].value=n,this._length+=a-this._cache[t].length,this._cache[t].length=a,this.get(t),this._length>this._max&&s(this),!0);var u=new l(t,n,this._mru++,a,o,i);return u.length>this._max?(this._dispose&&this._dispose(t,n),!1):(this._length+=u.length,this._lruList[u.lu]=this._cache[t]=u,this._itemCount++,this._length>this._max&&s(this),!0)},i.prototype.has=function(t){if(r(t),!e(this._cache,t))return!1;var n=this._cache[t];return!a(this,n)},i.prototype.get=function(t){return r(t),o(this,t,!0)},i.prototype.peek=function(t){return r(t),o(this,t,!1)},i.prototype.pop=function(){var t=this._lruList[this._lru];return f(this,t),t||null},i.prototype.del=function(t){r(t),f(this,this._cache[t])},i.prototype.load=function(t){this.reset();for(var e=Date.now(),n=t.length-1;n>=0;n--){var i=t[n];r(i.k);var o=i.e||0;if(0===o)this.set(i.k,i.v);else{var a=o-e;a>0&&this.set(i.k,i.v,a)}}}}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorWorkerManager=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(386);e.ColorWorkerManager=function(t){function e(t){return r(this,e),i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"color-worker",t,window.PLASIO_COLOR_WORKER_PATH||"lib/dist/plasio.color.webworker.js"))}return o(e,t),a(e,[{key:"handleNewRequest",value:function(t){return t}},{key:"handleResponse",value:function(t,e,n){e(t)}}]),e}(u.GenericWorkerQueue)},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(370);e.GenericWorkerQueue=function(){function t(e,n,i){r(this,t),this.queueName=e,this.loaderCount=n,this.webWorkerPath=i,this.loaders=[];for(var o=0;o<this.loaderCount;o++)this.loaders.push(this._newWorker(o))}return i(t,[{key:"push",value:function(t){var e=this.loaders.sort(function(t,e){return Object.keys(t.processQueue).length-Object.keys(e.processQueue).length})[0],n=o.randomId(),r=this.handleNewRequest(t),i=r.params,a=r.transferList;return new Promise(function(t,r){e.processQueue[n]={resolve:t,reject:r,worker:e},e.postMessage({id:n,task:i},a)})}},{key:"handleResponse",value:function(t,e,n){throw new Error("Not Implemented")}},{key:"handleNewRequest",value:function(t){throw new Error("Not Implemented")}},{key:"_newWorker",value:function(t){var e=this,n=new Worker(this.webWorkerPath);return n.id=t,n.processQueue={},n.onmessage=function(t){e._processResponse(n,t.data)},n.onerror=function(t){console.log(e.queueName+": Worker crashed!",n),console.error(t),e._handleError(n)},console.log(this.queueName+": worker instantiated."),n}},{key:"_processResponse",value:function(t,e){var n=e.id,r=t.processQueue[n],i=r.resolve,o=r.reject;return i&&o?(delete t.processQueue[n],console.log(this.queueName+": worker "+t.id+" queue now has: "+Object.keys(t.processQueue).length+" items."),void this.handleResponse(e,i,o)):console.log(this.queueName+": WARNING: Got a response from a webworker for request which has no associated completion promise")}},{key:"_handleError",value:function(t){var e=t.id;this.loaders=this.loaders.filter(function(t){return t.id!==e}),console.log(this.queueName+": WARNING: Worker with id",e,"was decomissioned")}}]),t}()},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0;
}function r(t){return"function"==typeof t}function i(t){return"number"==typeof t}function o(t){return"object"==typeof t&&null!==t}function a(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!i(t)||t<0||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,i,u,s,c;if(this._events||(this._events={}),"error"===t&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;var f=new Error('Uncaught, unspecified "error" event. ('+e+")");throw f.context=e,f}if(n=this._events[t],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:u=Array.prototype.slice.call(arguments,1),n.apply(this,u)}else if(o(n))for(u=Array.prototype.slice.call(arguments,1),c=n.slice(),i=c.length,s=0;s<i;s++)c[s].apply(this,u);return!0},n.prototype.addListener=function(t,e){var i;if(!r(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,r(e.listener)?e.listener:e),this._events[t]?o(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,o(this._events[t])&&!this._events[t].warned&&(i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[t].length>i&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),i||(i=!0,e.apply(this,arguments))}if(!r(e))throw TypeError("listener must be a function");var i=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,i,a,u;if(!r(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],a=n.length,i=-1,n===e||r(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(o(n)){for(u=a;u-- >0;)if(n[u]===e||n[u].listener&&n[u].listener===e){i=u;break}if(i<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],r(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?r(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(r(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e,n){var r=void 0,i=void 0;if(e)if(e.length&&3===e.length)r=e;else{if("number"!=typeof e)throw new Error("Invalid scale specified:"+e);r=[e,e,e]}else r=[.01,.01,.01];if(n){if(!n.length||3!==n.length)throw new Error("Invalid offset specified:"+n);i=n}else i=b.boundsCenter(t);return[r,i]}Object.defineProperty(e,"__esModule",{value:!0}),e.PointCloudViewer=void 0;var c=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(389);var l=n(387),h=n(372),p=(r(h),n(329)),d=n(390),v=n(393),y=n(394),g=n(392),m=n(382),_=n(370),b=r(_),w=n(369);e.PointCloudViewer=function(t){function e(t,n){if(o(this,e),!e.canRunPlasio())throw new Error("Current device is not capable of running Plasio.");if(!window.renderer)throw new Error("Global object renderer is not available, make sure the correct renderer script is included.");var r=a(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return r.server=b.checkParam(n,"server",null),r.resource=b.checkParam(n,"resource"),r.resource=b.parseResources(Array.isArray(r.resource)?r.resource:[r.resource],r.server),r.brushes=b.checkParam(n,"brushes"),r.rendererOptions=Object.assign({},b.checkParam(n,"rendererOptions",{})),r.initialCameraParams=b.checkParam(n,"initialCameraParams",null),r.filter=b.checkParam(n,"filter",null),r.cameraChangeCallbackFn=b.checkParam(n,"cameraChangeCallbackFn",null),r.allowGreyhoundCredentials=b.checkParam(n,"allowGreyhoundCredentials",!1),r.baseDepth=b.checkParam(n,"baseDepth",8),r.disableSplitLimiting=b.checkParam(n,"disableSplitLimiting",!1),r.targetElement=t,r.renderer=renderer.core.createRenderer(r.targetElement),r._setupRenderer(),r}return u(e,t),f(e,[{key:"_baseUrl",value:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];return b.joinPath.apply(null,[b.pickOne(t),"resource",e].concat(r))}},{key:"_setupRenderer",value:function(){var t=this,e=function(){var e=t.targetElement.getBoundingClientRect();t.renderer.setRenderViewSize(e.width,e.height)};window.addEventListener("resize",e),e(),this.renderer.setClearColor(this.rendererOptions.clearColor||[.1,.1,0]);var n=Object.assign({},this.rendererOptions);delete n.clearColor,this.renderer.setRenderOptions(n)}},{key:"_readResourceConfig",value:function(){function t(t){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(e){var n,r,i,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.server,r=e.resource,t.next=3,fetch(this._baseUrl(n,r,"info"),this.allowGreyhoundCredentials?{credentials:"include"}:{});case 3:if(i=t.sent,i.ok){t.next=6;break}throw Error("Failed to load resource config, server responded with:"+i.status);case 6:return t.next=8,i.json();case 8:return o=t.sent,o.server=n,o.resource=r,t.abrupt("return",o);case 12:case"end":return t.stop()}},t,this)}));return t}()},{key:"start",value:function(){function t(){return e.apply(this,arguments)}var e=i(regeneratorRuntime.mark(function t(){var e,n,r,i,o,a,u,f,l,h,m,_,x=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all(this.resource.map(function(t){return x._readResourceConfig(t)}));case 2:return e=t.sent,console.log(e),this.emit("info",e),console.log("Startup parameters:"),console.log("... brushes:",this.brushes),console.log("... filter:",JSON.stringify(this.filter)),console.log("... camera change callback:",this.cameraChangeCallbackFn?"YES":"NO"),console.log("... allow credentials:",this.allowGreyhoundCredentials?"YES":"NO"),console.log("... split limiting:",this.disableSplitLimiting?"NO":"YES"),console.log("mode parameters:"),console.log("... initial camera options:",this.initialCameraParams),n=b.joinBounds(e.map(function(t){return t.boundsConforming})),console.log("All configs bounds:",n),r=b.boundsCenter(n),console.log("All configs offset:",r),i=new g.GeoTransform(n,[1,1,1],r),this.geoTransform=i,this.configState=[],e.forEach(function(t){var e={};e.config=t,e.geoBounds=t.bounds;var n=s(e.geoBounds,t.scale,t.offset),r=c(n,2),o=r[0],a=r[1];e.schema=t.schema,e.scale=o,e.offset=a,e.numPoints=t.numPoints,e.treeNativeBounds=e.geoBounds.map(function(t,e){return(t-a[e%3])/o[e%3]}),e.geoTransform=new g.GeoTransform(e.geoBounds,e.scale,e.offset),e.worldBounds=e.geoTransform.transform(e.geoBounds,"geo","render"),e.numPoints=t.numPoints;var u=x.disableSplitLimiting?Number.MAX_SAFE_INTEGER:e.numPoints?Math.ceil(Math.log(e.numPoints)/Math.log(4)*1.1):16,f=Math.floor(1.5*u),l=i.transform(e.offset,"geo","render");l[0]=-l[0],l[1]=-l[1],l[2]=-l[2];var h=b.randomId("resource");console.log("resource parameters ("+t.resource+"@"+t.server+"): "),console.log("... schema:",e.schema),console.log("... tree-native bounds:",e.treeNativeBounds),console.log("... world bounds:",e.worldBounds),console.log("... geo bounds:",e.geoBounds),console.log("... numPoints:",e.numPoints),console.log("... scale:",e.scale),console.log("... offset:",e.offset),console.log("... geo-transform:",e.geoTransform),console.log("... numPoints:",e.numPoints),console.log("... baseDepth:",e.baseDepth),console.log("... stopSplitDepth:",u),console.log("... hardStopDepth:",f),console.log("... render space render offset:",l),console.log("... assigned key:",h);var y=new d.GreyhoundPipelineLoader(e.config.server,e.config.resource,e.schema,{brushes:x.brushes,allowGreyhoundCredentials:x.allowGreyhoundCredentials,filter:x.filter,key:h}),m=new p.FrustumLODNodePolicy("base",[y,new v.TransformLoader({offset:l})],x.renderer,{geoTransform:e.geoTransform,stopSplitDepth:u,hardStopDepth:f,baseDepth:e.baseDepth,offset:l});e.pipelineLoader=y,e.policy=m,e.key=h,e.visible=!0,x.configState.push(e)}),w.PointBufferCache.getInstance().setRenderRequestFn(function(){return x.renderer.forceUpdate()}),o=new y.ModeManager(this.targetElement,this.renderer,i,{},function(t,e,n,r){x.renderer.setEyeTargetPosition(t,e),x.cameraChangeCallbackFn&&x.cameraChangeCallbackFn(t,e,n,r)},this.initialCameraParams),this.modeManager=o,a=i.coordinateSpaceRange("render"),u=c(a,3),f=u[0],l=u[1],h=u[2],this.initialCameraParams||o.propagateDataRangeHint(f,l,h),m=2*Math.sqrt(f*f+l*l),this.renderer.updateCamera(0,{far:m}),_=function(){var t=o.activeCamera.serialize();x.emit("view-changed",t)},this.configState.forEach(function(t){t.policy.on("view-changed",_),t.policy.start()}),t.abrupt("return",e);case 31:case"end":return t.stop()}},t,this)}));return t}()},{key:"getRenderer",value:function(){return this.renderer}},{key:"getModeManager",value:function(){return this.modeManager}},{key:"getGeoTransform",value:function(){return this.geoTransform}},{key:"setFilter",value:function(t){var e=this;this.filter=t,this.configState.forEach(function(t){t.policy.hookedReload(function(){t.pipelineLoader.setFilter(e.filter)})})}},{key:"setColorChannelBrushes",value:function(t){if(t.length>4)throw new Error("Cannot specify more than 4 brush specs");this.brushes=t,this.configState.forEach(function(e){e.policy.hookedReload(function(){for(var n=0;n<4;n++)e.pipelineLoader.setColorChannelBrush(n,t[n])})})}},{key:"getLoadedResources",value:function(){return this.configState}},{key:"setResourceVisibility",value:function(t,e){this.renderer.setResourceVisibility(t,e);for(var n=0,r=this.configState.length;n<r;n++)if(this.configState[n].key===t){this.configState[n].visible=e;break}}}],[{key:"canRunPlasio",value:function(){return m.Device.deviceSupportsPlasio()}}]),e}(l.EventEmitter)},function(t,e){!function(t){"use strict";function e(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function n(t){return"string"!=typeof t&&(t=String(t)),t}function r(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return g.iterable&&(e[Symbol.iterator]=function(){return e}),e}function i(t){this.map={},t instanceof i?t.forEach(function(t,e){this.append(e,t)},this):Array.isArray(t)?t.forEach(function(t){this.append(t[0],t[1])},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function o(t){return t.bodyUsed?Promise.reject(new TypeError("Already read")):void(t.bodyUsed=!0)}function a(t){return new Promise(function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}})}function u(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function s(t){var e=new FileReader,n=a(e);return e.readAsText(t),n}function c(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}function f(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function l(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t,t)if("string"==typeof t)this._bodyText=t;else if(g.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(g.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(g.arrayBuffer&&g.blob&&_(t))this._bodyArrayBuffer=f(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!g.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=f(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(u)}),this.text=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return s(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(c(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(d)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t){var e=t.toUpperCase();return w.indexOf(e)>-1?e:t}function p(t,e){e=e||{};var n=e.body;if(t instanceof p){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new i(t.headers)),this.method=t.method,this.mode=t.mode,n||null==t._bodyInit||(n=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new i(e.headers)),this.method=h(e.method||this.method||"GET"),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function d(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(i))}}),e}function v(t){var e=new i;return t.split(/\r?\n/).forEach(function(t){var n=t.split(":"),r=n.shift().trim();if(r){var i=n.join(":").trim();e.append(r,i)}}),e}function y(t,e){e||(e={}),this.type="default",this.status="status"in e?e.status:200,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new i(e.headers),this.url=e.url||"",this._initBody(t)}if(!t.fetch){var g={searchParams:"URLSearchParams"in t,iterable:"Symbol"in t&&"iterator"in Symbol,blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t};if(g.arrayBuffer)var m=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],_=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&m.indexOf(Object.prototype.toString.call(t))>-1};i.prototype.append=function(t,r){t=e(t),r=n(r);var i=this.map[t];this.map[t]=i?i+","+r:r},i.prototype.delete=function(t){delete this.map[e(t)]},i.prototype.get=function(t){return t=e(t),this.has(t)?this.map[t]:null},i.prototype.has=function(t){return this.map.hasOwnProperty(e(t))},i.prototype.set=function(t,r){this.map[e(t)]=n(r)},i.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},i.prototype.keys=function(){var t=[];return this.forEach(function(e,n){t.push(n)}),r(t)},i.prototype.values=function(){var t=[];return this.forEach(function(e){t.push(e)}),r(t)},i.prototype.entries=function(){var t=[];return this.forEach(function(e,n){t.push([n,e])}),r(t)},g.iterable&&(i.prototype[Symbol.iterator]=i.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];p.prototype.clone=function(){return new p(this,{body:this._bodyInit})},l.call(p.prototype),l.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new i(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var x=[301,302,303,307,308];y.redirect=function(t,e){if(x.indexOf(e)===-1)throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},t.Headers=i,t.Request=p,t.Response=y,t.fetch=function(t,e){return new Promise(function(n,r){var i=new p(t,e),o=new XMLHttpRequest;o.onload=function(){var t={status:o.status,statusText:o.statusText,headers:v(o.getAllResponseHeaders()||"")};t.url="responseURL"in o?o.responseURL:t.headers.get("X-Request-URL");var e="response"in o?o.response:o.responseText;n(new y(e,t))},o.onerror=function(){r(new TypeError("Network request failed"))},o.ontimeout=function(){r(new TypeError("Network request failed"))},o.open(i.method,i.url,!0),"include"===i.credentials&&(o.withCredentials=!0),"responseType"in o&&g.blob&&(o.responseType="blob"),i.headers.forEach(function(t,e){o.setRequestHeader(e,t)}),o.send("undefined"==typeof i._bodyInit?null:i._bodyInit)})},t.fetch.polyfill=!0}}("undefined"!=typeof self?self:this)},function(t,e,n){"use strict";function r(t){return function(){var e=t.apply(this,arguments);return new c.Promise(function(t,n){function r(i,o){try{var a=e[i](o),u=a.value}catch(t){return void n(t)}return a.done?void t(u):c.Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)})}return r("next")})}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.GreyhoundPipelineLoader=void 0;var u=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=n(330),f=n(391),l=n(392),h=n(375),p=n(374),d=n(369),v=n(386),y=n(382),g=n(370),m=n(372),_=function(t){function e(t){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"buffer-loader",t,window.PLASIO_WEB_WORKER_PATH||"lib/dist/plasio.webworker.js"))}return a(e,t),s(e,[{key:"handleResponse",value:function(t,e,n){var r=t.success,i=t.buffer,o=t.numPoints,a=t.stats;r?e({buffer:i,stats:a,numPoints:o}):n(new Error("Could not decompress buffer"))}},{key:"handleNewRequest",value:function(t){return g.checkParam(t,"server"),g.checkParam(t,"resource"),g.checkParam(t,"bounds"),g.checkParam(t,"fullGeoBounds"),g.checkParam(t,"scale"),g.checkParam(t,"offset"),g.checkParam(t,"allowCreds"),g.checkParam(t,"schema"),g.checkParam(t,"weight"),g.checkParam(t,"depthBegin"),g.checkParam(t,"depthEnd"),{params:t,transferList:[]}}}]),e}(v.GenericWorkerQueue),w=[0,0,0],x=new _(y.Device.caps().loaderCount),E={};e.GreyhoundPipelineLoader=function(t){function e(t,n,r,a){i(this,e);var u=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this)),s=g.checkParam(a,"brushes"),c=g.checkParam(a,"allowGreyhoundCredentials",!1),f=g.checkParam(a,"filter",null),l=g.checkParam(a,"key");if(u.server=t,u.resource=n,u.brushes=[null,null,null,null],u.compressed=!0,u.sourceSchema=r,u.allowGreyhoundCreds=c,u.filter=f,u.key=l,s.map(function(t,e){u.setColorChannelBrush(e,t)}),u.compressed&&console.log("Compressed buffers have been requested, make sure laz-perf is available, or you'd see errors."),!u.compressed)throw new Error("Uncompressed buffers are not supported.");return u}return a(e,t),s(e,null,[{key:"key",get:function(){return"greyhound"}},{key:"provides",get:function(){return"point-buffer"}}]),s(e,[{key:"queryFor",value:function(t){var n=g.checkParam(t,"renderSpaceBounds"),r=g.checkParam(t,"geoTransform"),i=g.checkParam(t,"depthBegin"),o=g.checkParam(t,"depthEnd"),a=g.checkParam(t,"treePath"),u=e._buildSchema(this.sourceSchema,this.brushes),s=p.BrushFactory.serializeBrushes(this.brushes),c={server:this.server,resource:this.resource,depthBegin:i,depthEnd:o,renderSpaceBounds:n,schema:u,brushes:s,fullGeoBounds:r.fullGeoBounds,scale:r.scale,offset:r.offset,treePath:a,key:this.key,creds:1==this.allowGreyhoundCreds};return this.filter&&(c.filter=this.filter),c}},{key:"loadHierarchyInfo",value:function(){function t(t,n,r,i){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r,i){var o,a,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=n.transform(e,"render","tree"),a="bounds="+encodeURIComponent(JSON.stringify(o))+"&depthBegin="+r+"&depthEnd="+i+"&scale="+encodeURIComponent(JSON.stringify(n.scale))+"&offset="+encodeURIComponent(JSON.stringify(n.offset)),this.filter&&(a=a+"&filter="+encodeURIComponent(JSON.stringify(this.filter))),u=g.joinPath(g.pickOne(this.server),"resource",this.resource,"hierarchy")+"?"+a,t.next=6,g.getJson(u,{creds:this.allowGreyhoundCreds});case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"setColorChannelBrush",value:function(t,e){if(t>=4)throw new Error("Index needs to be less than 4 when setting color channel");this.brushes[t]=null==e?null:p.BrushFactory.createBrush(e)}},{key:"setFilter",value:function(t){this.filter=t}}],[{key:"_buildSchema",value:function(t,e){var n=new Map(t.map(function(t){return[t.name.toLowerCase(),t]})),r=new Set(["x","y","z"]);return e.forEach(function(t){if(null!=t){var e=t.requiredSchemaFields();e.every(function(t){return n.has(t.toLowerCase())})&&e.forEach(function(t){return r.add(t.toLowerCase())})}}),Array.from(r).map(function(t){var e=Object.assign({},n.get(t));return 8==e.size&&(e.size=4),e})}},{key:"_schemaHasColor",value:function(t){var e=new Set(t.map(function(t){return t.name.toLowerCase()}));return e.has("red")&&e.has("green")&&e.has("blue")}},{key:"_decomposePoint",value:function(t,e,n){var r={};return n.forEach(function(n,i){r[n.name.toLowerCase()]=t[e+i]}),r}},{key:"_createPointDecomposer",value:function(t){var e={},n=[];t.forEach(function(t,e){var r=t.name.toLowerCase(),i=e;n.push([r,i])});var r=t.length;return function(t,i){for(var o=0;o<r;o++)e[n[o][0]]=t[i+n[o][1]];return e}}},{key:"_colorizeBufferWithTasks",value:function(){function t(t,n,r,i,o){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r,i,o){var a,u,s,f,l,h,p,d,v,y,_;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(0!==r){t.next=2;break}return t.abrupt("return",b);case 2:if(a=i/4,u=m.size(o),s=3+u,f=new Float32Array(r*s),l=this._createPointDecomposer(n),h=function(t,n){return new c.Promise(function(r){for(var i=a*t,c=s*t,h=t;h<n;h++){var p=l(e,i);f[c]=p.x,f[c+1]=p.y,f[c+2]=p.z;for(var d=0;d<u;d++){var v=o[d],y=null==v?w:v.colorPoint(p);f[c+3+d]=g.compressColor(y)}c+=s,i+=a}r()})},p=1e4,!(r<p)){t.next=12;break}return h(0,r),t.abrupt("return",f);case 12:for(d=[],v=0;v<r;v+=p)y=v,_=Math.min(v+p,r),d.push(h(y,_));return t.next=16,c.Promise.all(d);case 16:return t.abrupt("return",f);case 17:case"end":return t.stop()}},t,this)}));return t}()},{key:"_colorizeBuffer",value:function(){function t(t,n,r,i,o,a,u,s){return e.apply(this,arguments)}var e=r(regeneratorRuntime.mark(function t(e,n,r,i,o,a,u,s){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.Promise.all(a.map(function(t){return t.prep({currentParams:u,stats:s,renderSpaceBounds:o})}));case 2:if(0!==a.length){t.next=4;break}return t.abrupt("return",n);case 4:return t.next=6,this._colorizeBufferWithTasks(n,e,r,i,a);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}},t,this)}));return t}()},{key:"_imageryToAvailableColors",value:function(t){for(var e=[],n=t.filter(function(t){return null!=t}).length,r=0;r<4;r++)e.push(r<n?1:0);return e}},{key:"_internalLoad",value:function(){function t(t,e){return n.apply(this,arguments)}var n=r(regeneratorRuntime.mark(function t(n,r){var i,o,a,s,c,f,v,y,m,_,b,w,k,P,S,M,O,A,C,T,R,j,I,F,L,N,B,D,U,z,q,Y,H,V,G,W;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=g.checkParam(n,"server"),o=g.checkParam(n,"resource"),a=g.checkParam(n,"key"),s=g.checkParam(n,"schema"),c=g.checkParam(n,"depthBegin"),f=g.checkParam(n,"depthEnd"),v=g.checkParam(n,"renderSpaceBounds"),y=g.checkParam(n,"fullGeoBounds"),m=g.checkParam(n,"scale"),_=g.checkParam(n,"offset"),b=g.checkParam(n,"brushes"),w=g.checkParam(n,"treePath"),k=new l.GeoTransform(y,m,_),P=k.transform(v,"render","tree"),S=k.coordinateSpaceRange("geo"),M=u(S,1),O=M[0],A=g.checkParam(r,"weight"),C=4*s.length,T={server:i,resource:o,bounds:P,depthBegin:c,depthEnd:f,fullGeoBounds:y,scale:m,offset:_,allowCreds:n.creds,schema:s,weight:A},n.filter&&(T.filter=n.filter),t.next=21,x.push(T);case 21:if(R=t.sent,j=R.buffer,I=R.numPoints,F=R.stats,0!==I){t.next=27;break}return t.abrupt("return",{totalPoints:0});case 27:for(E=g.accumulateStats(E,F),L=[["position",0,3]],N=3,B=b.filter(function(t){return null!=t}).length,D=0;D<B;D++)L.push(["color"+D,N,1]),N+=1;return U=p.BrushFactory.deserializeBrushes(b),z={key:a,data:j,totalPoints:I,renderSpaceBounds:v,bufferStats:F,pointCloudBufferStats:E,treePath:w,schema:s,geoTransform:k},t.next=36,d.PointBufferCache.getInstance().push(z,U);case 36:return q=t.sent,Y=U.filter(function(t){return null!=t}),H=[],V=[0,0,0,0],G=[],Y.forEach(function(t,e){var n=t.rampConfiguration(),r=n.selector,i=n.start,o=n.end;if(r!==h.ClampSelector.NONE){var a=[0,0,0,0];a[r-1]=1,H.push(["channelClampsPick"+e,new Float32Array(a)]),G.push(["channelColorRamp"+e+"Start",new Float32Array(i||[0,0,0])]),G.push(["channelColorRamp"+e+"End",new Float32Array(o||[1,1,1])]),V[e]=1}}),W={key:a,pointStride:4*(3+B),displayImportance:w.length,totalPoints:I,attributes:L,uniforms:[["availableColors",new Float32Array(e._imageryToAvailableColors(b))]].concat(H).concat(G).concat([["channelRampContribution",new Float32Array(V)]]),data:q,stats:F},t.abrupt("return",W);case 44:case"end":return t.stop()}},t,this)}));return t}()},{key:"load",value:function(t,n,r){return e._internalLoad(t,n).then(function(t){return r&&r(null,t),t}).catch(function(e){if(console.log("buffer load failed with params:",t,n,e),!r)throw e;r(e)})}}]),e}(f.BaseLoader)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});e.BaseLoader=function t(){n(this,t)}},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.GeoTransform=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(372),u=r(a);e.GeoTransform=function(){function t(e,n,r){if(i(this,t),!u.isArray(e)&&6!=u.size(e))throw new Error("fullGeoBounds need to be an array with 6 items");if(!u.isArray(n)&&3!=u.size(n))throw new Error("scale need to be an array with 3 items");if(!u.isArray(r)&&3!=u.size(r))throw new Error("offset need to be an array with 3 items");this.fullGeoBounds=e,this.scale=n,this.offset=r}return o(t,[{key:"transform",value:function(t,e,n){var r=["geo","tree","render"];if(!r.includes(e))throw new Error("sourceTransform is not recognized, specified: "+e+", accepted: "+r.join(", "));if(!r.includes(n))throw new Error("destinationTransform is not recognized, specified: "+n+", accepted: "+r.join(", "));if(!u.isArray(t)&&(3!=u.size(t)||6!=u.size(t)))throw new Error("arg needs to be an array of size 3 or 6, specified: "+t.toString());var i=(this.fullGeoBounds,this.scale),o=this.offset,a=null;if("tree"===e)a=t.slice(0);else if("geo"===e)a=t.map(function(t,e){return(t-o[e%3])/i[e%3]});else{var s=[i[0],i[2],i[1]],c=t.map(function(t,e){return t/s[e%3]});a=3===c.length?[-c[0],c[2],c[1]]:[-c[3],c[2],c[1],-c[0],c[5],c[4]]}var f=null;if("tree"===n)f=a.slice(0);else if("geo"===n)f=a.map(function(t,e){return t*i[e%3]+o[e%3]});else{var l=a;l=3===l.length?[-l[0],l[2],l[1]]:[-l[3],l[2],l[1],-l[0],l[5],l[4]];var h=[i[0],i[2],i[1]];f=l.map(function(t,e){return t*h[e%3]})}return f}},{key:"coordinateSpaceRange",value:function(t){var e=this.transform(this.fullGeoBounds,"geo",t);return[e[3]-e[0],e[4]-e[1],e[5]-e[2]];
}},{key:"coordinateSpaceCenter",value:function(t){var e=this.transform(this.fullGeoBounds,"geo",t);return[e[0]+.5*(e[3]-e[0]),e[1]+.5*(e[4]-e[1]),e[2]+.5*(e[5]-e[2])]}},{key:"coordinateSpaceBounds",value:function(t){var e=this.transform(this.fullGeoBounds,"geo",t);return e}}]),t}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(370),u=r(a),s=n(371).vec3,c=function(){function t(e){i(this,t),this.offset=u.checkParam(e||{},"offset",[0,0,0])}return o(t,[{key:"queryFor",value:function(t){var e=u.checkParam(t,"renderSpaceBounds"),n=u.boundsCenter(e);return{position:n,offset:s.add([0,0,0],n,this.offset),mins:e.slice(0,3),maxs:e.slice(3),normalize:!0}}}],[{key:"load",value:function(t,e,n){return new Promise(function(e,r){n&&n(null,t),e(t)})}},{key:"key",get:function(){return"transform"}},{key:"provides",get:function(){return"transform"}}]),t}();t.exports={TransformLoader:c}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ModeManager=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(370),a=n(395),u=n(397),s=n(399);e.ModeManager=function(){function t(e,n,i,c,f,l){var h=this;r(this,t),this.e=e,this.r=n,this.geoTransform=i,this.appc=c,this.currentMode=null,this.dragging=!1,this.active=null,this.lastHoveredEntity=null,this.lockedMode=null,this.actionListeners=[],this.synthClickEventInfo={},this.camera=new a.OrbitalCamera(e,n,this.geoTransform,f,l),this.currentMode=this.camera,this.entityManagers={point:new u.PointPicker(this,e,n),line:new s.LinePicker(this,e,n)};var p=function(t){if(t)return h.entityManagers[t.type]};this.mouseMoveHandler=function(t){t.preventDefault();var e=(0,o.getxy)(t),n=(0,o.getxyScreen)(t);return h.lockedMode?h.lockedMode.invokeHandler("mouse-move",{event:t,pos:e,screenPos:n}):void(h.dragging&&h.active&&h.active.owner.invokeHandler("dragging",{event:t,entity:h.active.entity,pos:e,screenPos:n}))},this.mouseUpHandler=function(t){var e=(0,o.getxy)(t),n=(0,o.getxyScreen)(t);if(h.lockedMode)return h.lockedMode.invokeHandler("mouse-up",{event:t,pos:e,screenPos:n});if(h.active){if(h.active.owner.invokeHandler("mouse-up",{event:t,entity:h.active.entity}),null!=h.synthClickEventInfo){var r=h.synthClickEventInfo.ts,i=h.synthClickEventInfo.pos,a=vec2.dist(i,n),u=Date.now()-r;a<5&&u<500&&h.active.owner.invokeHandler("synthetic-click",{pos:e,screenPos:n}),h.synthClickEventInfo={}}h.active=null}h.dragging=!1,document.removeEventListener("mousemove",h.mouseMoveHandler),document.removeEventListener("mouseup",h.mouseUpHandler)},this.mouseDownHandler=function(t){t.preventDefault();var e=(0,o.getxy)(t),r=(0,o.getxyScreen)(t);if(h.lockedMode)return h.lockedMode.invokeHandler("mouse-down",{event:t,pos:e,screenPos:r});var i=(0,o.pickUIPoint)(n,e),a=p(i);a?(h.active={owner:a,entity:i},a.invokeHandler("mouse-down-on-entity",{event:t,entity:i,pos:e,screenPos:r})):(h.active={owner:h.currentMode},h.currentMode.invokeHandler("mouse-down",{event:t,pos:e,screenPos:r}),h.synthClickEventInfo={pos:r,ts:Date.now()}),h.lockedMode||(h.dragging=!0),document.addEventListener("mousemove",h.mouseMoveHandler,!0),document.addEventListener("mouseup",h.mouseUpHandler,!0)};var d=function(t){return function(e){e.preventDefault();var r=(0,o.getxy)(e),i=(0,o.getxyScreen)(e),a=(0,o.pickUIPoint)(n,r),u=p(a);if(h.lockedMode)return h.lockedMode.invokeHandler(t,{event:e,pos:r,screenPos:i});var s=!1;u&&(s=u.hasHandler(t)),s?u.invokeHandler(t,{event:e,entity:a,pos:r,screenPos:i}):h.currentMode.invokeHandler(t,{event:e,pos:r,screenPos:i})}};this.doubleClickHandler=d("double-click"),this.clickHandler=d("click"),this.mouseWheelHandler=d("mouse-wheel"),this.contextMenuHandler=function(t){t.preventDefault();var e=(0,o.getxy)(t),r=(0,o.getxyScreen)(t),i=(0,o.pickUIPoint)(n,e),a=p(i);if(!h.lockedMode){var u=null;if(u=a?a.invokeHandler("context-menu-on-entity",{event:t,entity:i,pos:e,screenPos:r}):h.currentMode.invokeHandler("context-menu",{event:t,pos:e,screenPos:r}),h.actionListeners.length>0){var s=u||{};h.actionListeners.forEach(function(t){t.call(h,s,{pos:e,screenPos:r})})}}};var v=e?e:document;v.addEventListener("mousedown",this.mouseDownHandler),v.addEventListener("dblclick",this.doubleClickHandler),v.addEventListener("click",this.clickHandler),v.addEventListener("contextmenu",this.contextMenuHandler),v.addEventListener("mousewheel",this.mouseWheelHandler),v.addEventListener("DOMMouseScroll",this.mouseWheelHandler)}return i(t,[{key:"addActionListener",value:function(t){this.actionListeners.push(t)}},{key:"isSameEntity",value:function(t,e){if(null===t&&null===e)return!0;if(null===t&&null!==e||null===e&&null!==t)return!1;if(t.type===e.type){var n=this.entityManagers[t.type];return!!n&&n.isSameEntity(t,e)}return!1}},{key:"propagateDataRangeHint",value:function(t,e,n){var r={rx:t,ry:e,rz:n},i=Object.values(this.entityManagers).concat([this.camera]);i.forEach(function(t){t.invokeHandler("hint-data-range",r)})}},{key:"lockMode",value:function(){this.lockedMode=this.currentMode,console.log("mode manager lock is ON",this.lockedMode)}},{key:"unlockMode",value:function(){console.log("mode manager lock is OFF",this.lockedMode),this.lockedMode=null}},{key:"activeCamera",get:function(){return this.camera}},{key:"applicationConfig",get:function(){return this.appc}},{key:"activeMode",set:function(t){if(t&&"camera"!==t){var e=this.entityManagers[t];if(!e)throw new Error("Don't recognize the mode you're trying to set: "+t);this.currentMode=e}else this.currentMode=this.camera}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.OrbitalCamera=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(396),c=n(370),f=function(){return(new Date).getTime()},l=function(t){return Math.PI*t/180},h=function(t){return t<.5?2*t*t:-1+(4-2*t)*t};e.OrbitalCamera=function(t){function e(t,n,o,a,s){r(this,e);var f=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,"OrbitalCamera"));f.elem=t,f.f=a,f.geoTransform=o,s=s||{};var l=function(t,e){return s&&s[t]?s[t]:e};f.renderer=n,f.maxDistance=l("maxDistance",400),f.distance=l("distance",f.maxDistance),f.elevation=l("elevation",40),f.azimuth=l("azimuth",0),s.target?f.target=f.geoTransform.transform(s.target,"geo","render"):f.target=[0,0,0],f.minDistance=1,f.animFrameId=null,f.headingAnimFrameId=null,f.nextUpdateOverrides=null,f.isWaitingUpdate=!1;var h=f;setTimeout(function(){h._emitCameraProps(null,!0)}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"double-click",function(t){var e=t.pos,r=(0,c.pickPoint)(n,e);r&&f._transitionTargetTo(r)}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"synthetic-click",function(t){var e=t.pos,r=(0,c.pickPoint)(n,e);r&&f.invokeHandler("synthetic-click-on-point",{pos:e,pointPos:r})}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"hint-data-range",function(t){var e=t.rx,n=t.ry,r=(t.rz,Math.sqrt(e/2*(e/2)+n/2*(n/2)));f.distance=r,f.target=[0,0,0],f.maxDistance=4*f.distance,setTimeout(function(){f._emitCameraProps(null,!0)},0)});var p={};u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"mouse-down",function(t){var e=t.event,r=t.pos,i=e.which||e.button;if(p.ispanning=3===i,p.ispanning){p.start_target=f.target,p.start_pos=(0,c.pickPoint)(n,r);var o=f._cameraProps(),a=o[0],u=o[1],s=vec3.subtract([],a,u);vec3.normalize(s,s);var l=vec3.cross([],[0,1,0],s),h=vec3.cross([],l,[0,1,0]);p.lr=l,p.fb=h,p.distance=f.distance}else p.start_e=f.elevation,p.start_a=f.azimuth;p.active=!0,p.x=r[0],p.y=r[1],p.wasMoved=!1}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"dragging",function(t){var e=(t.event,t.pos);if(!p.active)throw new Error("Got dragging event when I am not dragging?");p.wasMoved=!0;var n=e[0]-p.x,r=e[1]-p.y;if(p.ispanning){var i=Math.max(.01,f._att()*f._range()*.001),o=vec3.add([],vec3.scale([],p.lr,-n*i),vec3.scale([],p.fb,-r*i));vec3.add(o,o,p.start_target),f._emitCameraProps({target:o}),p.last_position=o}else{var a=.01,u=n*a*(n*a)*(n<0?-1:1),s=r*a*(r*a)*(r<0?-1:1),c=p.start_e+s,l=p.start_a-u;c=Math.max(1,Math.min(80,c)),f._emitCameraProps({elevation:c,azimuth:l}),p.last_e=c,p.last_a=l}});var d=function(t){return t>180&&(t-=360),t<-180&&(t+=360),t};return u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"mouse-up",function(t){t.event,t.pos;p.active=!1,p.wasMoved&&(p.ispanning?f.target=p.last_position:(f.azimuth=d(p.last_a),f.elevation=p.last_e),f._emitCameraProps(null,!0))}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",f).call(f,"mouse-wheel",function(t){var e=t.event,n=(t.pos,e.wheelDelta||-120*e.detail),r=f._range()/100,i=1;((0,c.isLinux)()||(0,c.isWindows)())&&(0,c.isChrome)()&&(i=5),f.distance-=.01*i*n*r*(f.distance/f.maxDistance),f.distance=Math.min(Math.max(f.minDistance,f.distance),f.maxDistance),null===f.animFrameId&&null===f.headingAnimFrameId&&f._emitCameraProps(null,!0)}),f}return o(e,t),a(e,[{key:"serialize",value:function(){return{distance:this.distance,maxDistance:this.maxDistance,target:this.geoTransform.transform(this.target,"render","geo"),elevation:this.elevation,azimuth:this.azimuth}}},{key:"deserialize",value:function(t){t=t||{};var e=this,n=function(n){return null==t[n]||void 0==t[n]?e[n]:t[n]};this.distance=n("distance"),this.maxDistance=n("maxDistance"),this.elevation=n("elevation"),this.azimuth=n("azimuth"),t.target&&(this.target=this.geoTransform.transform(t.target,"geo","render")),setTimeout(function(){e._emitCameraProps(null,!0,!0)})}},{key:"_att",value:function(){var t=(this.distance-this.minDistance)/(this.maxDistance-this.minDistance);return t}},{key:"_range",value:function(){return this.maxDistance-this.minDistance}},{key:"_cameraProps",value:function(t){var e=vec3.create(),n=quat.create(),r=quat.create(),i=quat.create(),o=[0,1,0],a=[0,0,1],u=[0,0,0],s=[0,0,0];t=t||{};var c=t.elevation||this.elevation,f=t.azimuth||this.azimuth,h=t.distance||this.distance,p=t.target||this.target;return vec3.cross(e,a,o),quat.setAxisAngle(n,e,l(c)),quat.setAxisAngle(r,o,l(f+180)),quat.multiply(i,r,n),u[2]=h,vec3.transformQuat(s,u,i),[vec3.add(s,p,s),p]}},{key:"_emitCameraProps",value:function(t,e,n){if(this.nextUpdateOverrides=t,!this.isWaitingUpdate){this.isWaitingUpdate=!0;var r=this;requestAnimationFrame(function(){var t=r._cameraProps(r.nextUpdateOverrides);r.isWaitingUpdate=!1,r.f(t[0],t[1],e,n)})}}},{key:"_transitionTargetTo",value:function(t,e){null!==this.animFrameId&&(cancelAnimationFrame(this.animFrameId),this.animFrameId=null),e=e||500;var n=this.target,r=t,i=f(),o=this,a=function a(){var u=f();if(u>=i+e)o.target=t,o.animFrameId=null,o._emitCameraProps(null,!0);else{var s=(u-i)/e;s=h(s);var c=n[0]+(r[0]-n[0])*s,l=n[1]+(r[1]-n[1])*s,p=n[2]+(r[2]-n[2])*s;o._emitCameraProps({target:[c,l,p]}),o.animFrameId=requestAnimationFrame(a)}};a()}},{key:"setHeading",value:function(t,e){null!==this.headingAnimFrameId&&(cancelAnimationFrame(this.headingAnimFrameId),this.headingAnimFrameId=null),e=e||500;var n=this.azimuth,r=t,i=f(),o=this,a=function a(){var u=f();if(u>=i+e){for(o.azimuth=t;o.azimuth>360;)o.azimuth-=360;for(;o.azimuth<0;)o.azimuth+=360;o.headingAnimFrameId=null,o._emitCameraProps(null,!0)}else{var s=(u-i)/e;s=h(s);var c=n+(r-n)*s;o._emitCameraProps({azimuth:c}),o.headingAnimFrameId=requestAnimationFrame(a)}};a()}},{key:"transitionTo",value:function(t,e,n){var r=[t||this.target[0],e||this.target[1],n||this.target[2]];this._transitionTargetTo(r)}}]),e}(s.BaseMode)},function(t,e){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();e.BaseMode=function(){function t(e,r){n(this,t),this.modeManager=e,this.name=r,this.handlers={}}return r(t,[{key:"hasHandler",value:function(t){return!!this.handlers[t]}},{key:"invokeHandler",value:function(t,e){var n=this.handlers[t];return n?n.call(this,e):null}},{key:"isSameEntity",value:function(t,e){return console.warn("Unimplemented isSameEntity for",this.name,"going to return false"),!1}},{key:"registerHandler",value:function(t,e){this.handlers[t]=e}},{key:"unregisterHandler",value:function(t){delete this.handlers[t]}},{key:"lockMode",value:function(){this.modeManager.lockMode()}},{key:"unlockMode",value:function(){this.modeManager.unlockMode()}}]),t}()},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.PointPicker=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},s=n(396),c=n(370),f=n(398);e.PointPicker=function(t){function e(t,n,o){r(this,e);var a=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"PointPicker"));return a.attachments={},u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",a).call(a,"mouse-enter",function(t){var e=(t.event,t.entity);if(e&&e.entity&&e.entity[0]){var n=e.entity[0];o.updatePoint(n,null,"hover")}}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",a).call(a,"mouse-leave",function(t){var e=(t.event,t.entity);if(e&&e.entity&&e.entity[0]){var n=e.entity[0];o.updatePoint(n,null,"normal")}}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",a).call(a,"mouse-down",function(t){var e=t.event,n=t.pos;if(0===e.button){var r=(0,c.randomId)("point"),i=(0,c.pickPoint)(o,n);console.log("adding new point with id:",r,"and location:",i),i&&o.addPoint(r,i,"hover")}}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",a).call(a,"dragging",function(t){var e=(t.event,t.entity),n=t.pos;if(e&&e.entity&&e.entity[0]){var r=e.entity[0],i=(0,c.pickPoint)(o,n);i&&o.updatePoint(r,i)}}),u(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"registerHandler",a).call(a,"context-menu-on-entity",function(t){var e=t.entity;if(e&&e.entity&&e.entity[0]){var n=e.entity[0],r=function(){var t=a.attachments[n];t&&(delete a.attachments[n],t.resetState())},i={delete:["Delete",function(){r(),o.removePoint(n)}],los:["LoS",function(){var t=e.entity[1],r=[t[0],t[1]+2,t[2]],i=512,u=a.attachments[n];if(u)u.go(r,i);else{var s=new f.LineOfSight(o);console.log("Adding a LOS overlay at:",r),s.go(r,i),a.attachments[n]=s}}]};return a.attachments[n]&&(i["remove-los"]=["Remove LoS",function(){var t=a.attachments[n];delete a.attachments[n],t.resetState()}]),i}}),a}return o(e,t),a(e,[{key:"isSameEntity",value:function(t,e){return t.entity[0]===e.entity[0]}}]),e}(s.BaseMode)},function(t,e,n){"use strict";var r=n(370),i=(n(371).mat4,n(371).vec3,function(t){this.renderer=t,this.id=(0,r.randomId)("los")}),o=function(t,e){var n=document.createElement("canvas");n.width=e,n.height=e;for(var r=n.getContext("2d"),i=r.createImageData(e,e),o=0,a=0;a<t.length;a++){var u=t[a]?0:200;i.data[o]=0,i.data[o+1]=0,i.data[o+2]=0,i.data[o+3]=u,o+=4}return r.putImageData(i,0,0),n.toDataURL("image/png")};i.prototype.getHeightMap=function(t,e,n){var i=new r.HeightmapCapture(this.renderer);return i.captureForRadius(n,t,e),i};var a=function(t,e,n){return e*n+t},u=function(t,e,n,r,i){return{x:i.x+t*n+n/2,y:i.y+e*r+r/2}},s=function(t,e,n,r,i,o,s,c){for(var f,l,h,p,d,v,y,g,m,_,b,w,x=2*o,E=r>0?o:o-1,k=i>0?o:o-1,P=x*r/n,S=x*i/n,M=k;Math.abs(M-k)<o;M+=i)for(var O=E;Math.abs(O-E)<o;O+=r)if(p=a(O,M,x),m=Math.abs(O-E),_=Math.abs(M-k),h=u(m,_,P,S,t),f=e[p]-t.z,l=f/Math.sqrt(Math.pow(h.x-t.x,2)+Math.pow(h.y-t.y,2)),M!=k){if(d=s[a(O!=E?O-r:O,M-i,x)],b=Math.abs(O-E),w=Math.abs(M-k),b>w){v=s[a(O-r,M,x)],y=m*(_-i)/_%1;var A=Math.max(d,v);g=A!=Number.NEGATIVE_INFINITY?Math.min(d,v)!=Number.NEGATIVE_INFINITY?d+(v-d)*y:A:Number.NEGATIVE_INFINITY}else if(b<w){v=s[a(O,M-i,x)],y=m*(m-r)/_%1;var A=Math.max(d,v);g=A!=Number.NEGATIVE_INFINITY?Math.min(d,v)!=Number.NEGATIVE_INFINITY?d+(v-d)*y:A:Number.NEGATIVE_INFINITY}else g=d;Math.abs(e[p])<1e-5?(l=Number.NEGATIVE_INFINITY,c[p]=b==w?c[a(O-r,M-i,x)]:b>w?c[a(O-r,M,x)]:c[a(O,M-i,x)]):c[p]=l>=g,s[p]=Math.max(l,g)}else O!=E?Math.abs(e[p])>1e-5?(d=s[a(O-r,M,x)],c[p]=l>=d,s[p]=Math.max(l,d)):(s[p]=s[a(O-r,M,x)],c[p]=c[a(O-r,M,x)]):(s[p]=Math.abs(e[p])>1e-5?l:Number.NEGATIVE_INFINITY,c[p]=1)};i.prototype.go=function(t,e){for(var n={x:t[0],z:t[1],y:t[2]},r=2*e,i=r,a=this.getHeightMap(t,e,i),u=new ArrayBuffer(i*i*4),c=new Float32Array(u),f=new ArrayBuffer(i*i),l=new Int8Array(f),h=-1;h<=1;h+=2)for(var p=-1;p<=1;p+=2)s(n,a.rawData,i,h,p,e,c,l);var d=[n.x-e,n.y-e,n.x+e,n.y+e];l=o(l,i);var v=new Image,y=this;v.onload=function(){y.renderer.addOverlay(y.id,d,v)},v.crossOrigin="",v.src=l},i.prototype.resetState=function(){this.renderer.removeOverlay(this.id)},t.exports={LineOfSight:i}},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.LinePicker=void 0;var a=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if("value"in i)return i.value;var a=i.get;if(void 0!==a)return a.call(r)},c=n(396),f=n(370),l=n(400),h=n(402);e.LinePicker=function(t){function e(t,n,o){r(this,e);var u=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,"LinePicker"));u.registerHandler("mouse-enter",function(t){var e=t.entity,n=e.entity.id;o.updateLineStripParams(n,{hover:!0})}),u.registerHandler("mouse-leave",function(t){var e=t.entity,n=e.entity.id;o.updateLineStripParams(n,{hover:!1})});var c=null,p=null,d=null,v=!1;return u.registerHandler("mouse-down",function(t){var n=t.event,r=t.pos;if(0===n.button){var i=(0,f.pickPoint)(o,r);if(!i)return;if(null===c){var a=(0,f.randomId)("point"),l=(0,f.randomId)("point");o.addPoint(a,i,"normal"),o.addPoint(l,i,"hover"),c=a,p=l;var h=(0,f.randomId)("line");o.createLineStrip(h,{}),o.pushLineStripPoint(h,a),o.pushLineStripPoint(h,l),d=h,v=!1,console.log("No last point, adding points:",a,l),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"lockMode",u).call(u)}else o.updatePoint(p,null,"normal"),c=p,p=(0,f.randomId)("point"),o.addPoint(p,i,"hover"),o.pushLineStripPoint(d,p),v=!0}}),u.registerHandler("mouse-move",function(t){var e=(t.event,t.pos);if(null!==p){var n=(0,f.pickPoint)(o,e);n&&o.updatePoint(p,n)}}),u.registerHandler("mouse-up",function(t){var n=t.event;t.pos;2===n.button&&null!==p&&(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"unlockMode",u).call(u),v?(o.removePoint(p),o.removeLineStripPoint(d,p)):(o.removePoint(p),o.removePoint(c),o.removeLineStrip(d)),p=c=d=null)}),u.registerHandler("context-menu-on-entity",function(e){var n=e.entity;if(console.log("++ ",n),n&&n.entity){var r=n.entity,i=r.id,u=function(){var t=[],e=r["all-points"];console.log(e);for(var n=0,i=e.length-1;n<i;n++){var o=e[n],a=e[n+1];t.push([o[1],a[1]])}return t},s={delete:["Delete",function(){o.removeLineStrip(i),r["all-points"].forEach(function(t){var e=a(t,2),n=e[0];e[1];return o.removePoint(n)})}],profile:["Profile",function(e){console.log("computing profile for line:",i);var n=t.applicationConfig.pointCloudBounds,r=new h.BBox(n.slice(0,3),n.slice(3,6));console.log("point cloud bounding box:",r);var a=u(),s=new l.Profiler(o,a,100,r);s.extractProfile(!0,function(t,n){console.log("extracted profile:",n),e&&e(null,n)})}]};return s}}),u}return o(e,t),u(e,[{key:"isSameEntity",value:function(t,e){return t.entity.id===e.entity.id}}]),e}(c.BaseMode)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.Profiler=void 0;var o=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(r=(a=u.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&u.return&&u.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(371),s=n(401),c=r(s),f=n(370),l=function(t){var e=[1/0,1/0,1/0],n=[-(1/0),-(1/0),-(1/0)],r=[0,0,0],i=0,o=function(t,e,n){return[t(e[0],n[0]),t(e[1],n[1]),t(e[2],n[2])]};return t.forEach(function(t){t.totalPoints>0&&(e=o(Math.min,e,t.mins),n=o(Math.max,n,t.maxs),r=o(Math.max,r,t.colorMaxs),i+=t.totalPoints)}),{buffer:(0,f.joinFloatBuffers)(t.map(function(t){return t.buffer})),mins:e,maxs:n,colorMaxs:r,totalPoints:i}};e.Profiler=function(){function t(e,n,r,o){i(this,t),this.renderer=e,this.segments=n,this.width=r,this.pointBBox=o}return a(t,[{key:"extractProfile",value:function(t,e){var n=this,r=this.renderer.getLoadedBuffers(),i=function(t,e){n._extractProfile(r,t,n.width,e)};c.default.map(this.segments,i,function(r,i){if(r)return e(r);if(!t)return e(null,i);var a=[];n.segments.reduce(function(t,e){var n=o(e,2),r=n[0],i=n[1];return a.push(t),t+u.vec3.length(r,i)},0);var s=i.map(function(t,e){return[t,n.segments[e],a[e]]});c.default.map(s,function(t,e){var r=o(t,3),i=r[0],a=r[1],u=r[2];n._lineupBuffer(i,a,u,e)},e)})}},{key:"_lineupBuffer",value:function(t,e,n,r){var i=o(e,2),a=i[0],s=i[1];if(console.log(t,a,s,n),console.log(t.mins.toString(),t.maxs.toString()),0===t.totalPoints)return r(null,t);var c=u.mat4.identity(u.mat4.create()),f=a;u.mat4.translate(c,c,[-f[0],-f[1],-f[2]]);var l=u.vec3.subtract(u.vec3.create(),s,a);u.vec3.normalize(l,l);var h=Math.acos(u.vec3.dot([1,0,0],l));l[2]<0&&(h=-h);var p=u.mat4.identity(u.mat4.create());u.mat4.rotateY(p,p,h);var d=u.mat4.identity(u.mat4.create());u.mat4.translate(d,d,[n,0,0]);for(var v=u.mat4.multiply(u.mat4.create(),u.mat4.multiply(u.mat4.create(),d,p),c),y=t.buffer,g=0,m=y.length/t.totalPoints,_=u.vec3.create(),b=[1/0,1/0,1/0],w=[-(1/0),-(1/0),-(1/0)],x=0,E=t.totalPoints;x<E;x++)u.vec3.set(_,y[g],y[g+1],y[g+2]),u.vec3.transformMat4(_,_,v),b[0]=Math.min(b[0],_[0]),b[1]=Math.min(b[1],_[1]),b[2]=Math.min(b[2],_[2]),w[0]=Math.max(w[0],_[0]),w[1]=Math.max(w[1],_[1]),w[2]=Math.max(w[2],_[2]),y[g]=_[0],y[g+1]=_[1],y[g+2]=_[2],g+=m;t.mins=b,t.maxs=w,console.log(t.mins.toString(),t.maxs.toString()),r(null,t)}},{key:"_extractProfile",value:function(t,e,n,r){var i=o(e,2),a=i[0],s=i[1],f=this,h=n,p=[0,1,0],d=u.vec3.subtract(u.vec3.create(),s,a),v=u.vec3.normalize(u.vec3.create(),d),y=u.vec3.cross(u.vec3.create(),v,p);console.log("start and end",a,s),console.log("up, dir, ndir, right",p,d,v,y);var g=[y[0],y[1],y[2],-u.vec3.dot(a,y)],m=u.vec3.lerp(u.vec3.create(),a,s,.5),_=[v[0],v[1],v[2],-u.vec3.dot(m,v)],b=.5*u.vec3.length(d);console.log(g,h,_,b);var w=function(t,e){f._extractInRangePointsFromBuffer(t,g,_,h,b,e)};c.default.map(t,w,function(t,e){if(t)return r(t);var n=l(e);r(null,n)})}},{key:"_isOfInterest",value:function(t,e,n,r,i,a){var s=function(n,r){var i=o(n,4),a=i[0],s=i[1],c=i[2],f=i[3],l=[t[0],t[1],t[2]];a>=0&&(l[0]=e[0]),s>=0&&(l[1]=e[1]),c>=0&&(l[2]=e[2]);var h=[e[0],e[1],e[2]];a>=0&&(h[0]=t[0]),s>=0&&(h[1]=t[1]),c>=0&&(h[2]=t[2]);var p=u.vec3.dot(n,l)+f;if(p<-r)return!1;var d=u.vec3.dot(n,h)+f;return!(d>r)};return s(n,i)&&s(r,a)}},{key:"_extractInRangePointsFromBuffer",value:function(t,e,n,r,i,a){var s=this._isOfInterest(t.mins,t.maxs,e,n,r,i);if(!s)return a(null,{mins:[1/0,1/0,1/0],maxs:[-(1/0),-(1/0),-(1/0)],colorMaxs:[0,0,0],totalPoints:0,buffer:new Float32Array(0)});var f=this.pointBBox?this.pointBBox.center():[0,0,0],h=function(t){var o=u.vec3.dot(e,t)+e[3];if(Math.abs(o)>r)return!1;var a=u.vec3.dot(n,t)+n[3];return Math.abs(a)<i},p=function(t,e,n,r){for(var i=t.data,o=t.stride/4,a=new Float32Array(i.length),u=0,s=o*e,c=[1/0,1/0,1/0],l=[-(1/0),-(1/0),-(1/0)],p=[0,0,0],d=0;d<n;d++){var v=i[s+0],y=i[s+1],g=i[s+2];if(t.normalized||(v-=f[0],y-=f[1],g-=f[2]),h([v,y,g])){c[0]=Math.min(c[0],v),c[1]=Math.min(c[1],y),c[2]=Math.min(c[2],g),l[0]=Math.max(l[0],v),l[1]=Math.max(l[1],y),l[2]=Math.max(l[2],g),p[0]=Math.max(p[0],i[s+3]),p[1]=Math.max(p[1],i[s+4]),p[2]=Math.max(p[2],i[s+5]);for(var m=0;m<o;m++)a[u+m]=i[s+m];u+=o}s+=o}var _=new Float32Array(u);_.set(a.subarray(0,u),0),r(null,{buffer:_,mins:c,maxs:l,totalPoints:_.length/o,colorMaxs:p})},d=function(e,n){for(var r=[],i=t.totalPoints,o=0;i>0;)r.push([o,Math.min(v,i)]),i-=v,o+=v;return r},v=1e4,y=d(t.totalPoints,v);console.log(t,y),c.default.map(y,function(e,n){var r=o(e,2),i=r[0],a=r[1];p(t,i,a,n)},function(t,e){var n=l(e);0===n.totalPoints&&console.warn("zero point fetch:",n,e),a(null,n)})}}]),t}()},function(t,e,n){var r,i;(function(n,o,a){/*!
	 * async
	 * https://github.com/caolan/async
	 *
	 * Copyright 2010-2014 Caolan McMahon
	 * Released under the MIT license
	 */
!function(){function u(){}function s(t){return t}function c(t){return!!t}function f(t){return!t}function l(t){return function(){if(null===t)throw new Error("Callback was already called.");t.apply(this,arguments),t=null}}function h(t){return function(){null!==t&&(t.apply(this,arguments),t=null)}}function p(t){return Y(t)||"number"==typeof t.length&&t.length>=0&&t.length%1===0}function d(t,e){for(var n=-1,r=t.length;++n<r;)e(t[n],n,t)}function v(t,e){for(var n=-1,r=t.length,i=Array(r);++n<r;)i[n]=e(t[n],n,t);return i}function y(t){return v(Array(t),function(t,e){return e})}function g(t,e,n){return d(t,function(t,r,i){n=e(n,t,r,i)}),n}function m(t,e){d(V(t),function(n){e(t[n],n)})}function _(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1}function b(t){var e,n,r=-1;return p(t)?(e=t.length,function(){return r++,r<e?r:null}):(n=V(t),e=n.length,function(){return r++,r<e?n[r]:null})}function w(t,e){return e=null==e?t.length-1:+e,function(){for(var n=Math.max(arguments.length-e,0),r=Array(n),i=0;i<n;i++)r[i]=arguments[i+e];switch(e){case 0:return t.call(this,r);case 1:return t.call(this,arguments[0],r)}}}function x(t){return function(e,n,r){return t(e,r)}}function E(t){return function(e,n,r){r=h(r||u),e=e||[];var i=b(e);if(t<=0)return r(null);var o=!1,a=0,s=!1;!function u(){if(o&&a<=0)return r(null);for(;a<t&&!s;){var c=i();if(null===c)return o=!0,void(a<=0&&r(null));a+=1,n(e[c],c,l(function(t){a-=1,t?(r(t),s=!0):u()}))}}()}}function k(t){return function(e,n,r){return t(U.eachOf,e,n,r)}}function P(t){return function(e,n,r,i){return t(E(n),e,r,i)}}function S(t){return function(e,n,r){return t(U.eachOfSeries,e,n,r)}}function M(t,e,n,r){r=h(r||u),e=e||[];var i=p(e)?[]:{};t(e,function(t,e,r){n(t,function(t,n){i[e]=n,r(t)})},function(t){r(t,i)})}function O(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(n){n&&i.push({index:e,value:t}),r()})},function(){r(v(i.sort(function(t,e){return t.index-e.index}),function(t){return t.value}))})}function A(t,e,n,r){O(t,e,function(t,e){n(t,function(t){e(!t)})},r)}function C(t,e,n){return function(r,i,o,a){function u(){a&&a(n(!1,void 0))}function s(t,r,i){return a?void o(t,function(r){a&&e(r)&&(a(n(!0,t)),a=o=!1),i()}):i()}arguments.length>3?t(r,i,s,u):(a=o,o=i,t(r,s,u))}}function T(t,e){return e}function R(t,e,n){n=n||u;var r=p(e)?[]:{};t(e,function(t,e,n){t(w(function(t,i){i.length<=1&&(i=i[0]),r[e]=i,n(t)}))},function(t){n(t,r)})}function j(t,e,n,r){var i=[];t(e,function(t,e,r){n(t,function(t,e){i=i.concat(e||[]),r(t)})},function(t){r(t,i)})}function I(t,e,n){function r(t,e,n,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");return t.started=!0,Y(e)||(e=[e]),0===e.length&&t.idle()?U.setImmediate(function(){t.drain()}):(d(e,function(e){var i={data:e,callback:r||u};n?t.tasks.unshift(i):t.tasks.push(i),t.tasks.length===t.concurrency&&t.saturated()}),void U.setImmediate(t.process))}function i(t,e){return function(){o-=1;var n=!1,r=arguments;d(e,function(t){d(a,function(e,r){e!==t||n||(a.splice(r,1),n=!0)}),t.callback.apply(t,r)}),t.tasks.length+o===0&&t.drain(),t.process()}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var o=0,a=[],s={tasks:[],concurrency:e,payload:n,saturated:u,empty:u,drain:u,started:!1,paused:!1,push:function(t,e){r(s,t,!1,e)},kill:function(){s.drain=u,s.tasks=[]},unshift:function(t,e){r(s,t,!0,e)},process:function(){for(;!s.paused&&o<s.concurrency&&s.tasks.length;){var e=s.payload?s.tasks.splice(0,s.payload):s.tasks.splice(0,s.tasks.length),n=v(e,function(t){return t.data});0===s.tasks.length&&s.empty(),o+=1,a.push(e[0]);var r=l(i(s,e));t(n,r)}},length:function(){return s.tasks.length},running:function(){return o},workersList:function(){return a},idle:function(){return s.tasks.length+o===0},pause:function(){s.paused=!0},resume:function(){if(s.paused!==!1){s.paused=!1;for(var t=Math.min(s.concurrency,s.tasks.length),e=1;e<=t;e++)U.setImmediate(s.process)}}};return s}function F(t){return w(function(e,n){e.apply(null,n.concat([w(function(e,n){"object"==typeof console&&(e?console.error&&console.error(e):console[t]&&d(n,function(e){console[t](e)}))})]))})}function L(t){return function(e,n,r){t(y(e),n,r)}}function N(t){return w(function(e,n){var r=w(function(n){var r=this,i=n.pop();return t(e,function(t,e,i){t.apply(r,n.concat([i]))},i)});return n.length?r.apply(this,n):r})}function B(t){return w(function(e){var n=e.pop();e.push(function(){var t=arguments;r?U.setImmediate(function(){n.apply(null,t)}):n.apply(null,t)});var r=!0;t.apply(this,e),r=!1})}var D,U={},z="object"==typeof self&&self.self===self&&self||"object"==typeof n&&n.global===n&&n||this;null!=z&&(D=z.async),U.noConflict=function(){return z.async=D,U};var q=Object.prototype.toString,Y=Array.isArray||function(t){return"[object Array]"===q.call(t)},H=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},V=Object.keys||function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e},G="function"==typeof o&&o,W=G?function(t){G(t)}:function(t){setTimeout(t,0)};"object"==typeof a&&"function"==typeof a.nextTick?U.nextTick=a.nextTick:U.nextTick=W,U.setImmediate=G?W:U.nextTick,U.forEach=U.each=function(t,e,n){return U.eachOf(t,x(e),n)},U.forEachSeries=U.eachSeries=function(t,e,n){return U.eachOfSeries(t,x(e),n)},U.forEachLimit=U.eachLimit=function(t,e,n,r){return E(e)(t,x(n),r)},U.forEachOf=U.eachOf=function(t,e,n){function r(t){a--,t?n(t):null===i&&a<=0&&n(null)}n=h(n||u),t=t||[];for(var i,o=b(t),a=0;null!=(i=o());)a+=1,e(t[i],i,l(r));0===a&&n(null)},U.forEachOfSeries=U.eachOfSeries=function(t,e,n){function r(){var a=!0;return null===o?n(null):(e(t[o],o,l(function(t){if(t)n(t);else{if(o=i(),null===o)return n(null);a?U.setImmediate(r):r()}})),void(a=!1))}n=h(n||u),t=t||[];var i=b(t),o=i();r()},U.forEachOfLimit=U.eachOfLimit=function(t,e,n,r){E(e)(t,n,r)},U.map=k(M),U.mapSeries=S(M),U.mapLimit=P(M),U.inject=U.foldl=U.reduce=function(t,e,n,r){U.eachOfSeries(t,function(t,r,i){n(e,t,function(t,n){e=n,i(t)})},function(t){r(t,e)})},U.foldr=U.reduceRight=function(t,e,n,r){var i=v(t,s).reverse();U.reduce(i,e,n,r)},U.transform=function(t,e,n,r){3===arguments.length&&(r=n,n=e,e=Y(t)?[]:{}),U.eachOf(t,function(t,r,i){n(e,t,r,i)},function(t){r(t,e)})},U.select=U.filter=k(O),U.selectLimit=U.filterLimit=P(O),U.selectSeries=U.filterSeries=S(O),U.reject=k(A),U.rejectLimit=P(A),U.rejectSeries=S(A),U.any=U.some=C(U.eachOf,c,s),U.someLimit=C(U.eachOfLimit,c,s),U.all=U.every=C(U.eachOf,f,f),U.everyLimit=C(U.eachOfLimit,f,f),U.detect=C(U.eachOf,s,T),U.detectSeries=C(U.eachOfSeries,s,T),U.detectLimit=C(U.eachOfLimit,s,T),U.sortBy=function(t,e,n){function r(t,e){var n=t.criteria,r=e.criteria;return n<r?-1:n>r?1:0}U.map(t,function(t,n){e(t,function(e,r){e?n(e):n(null,{value:t,criteria:r})})},function(t,e){return t?n(t):void n(null,v(e.sort(r),function(t){return t.value}))})},U.auto=function(t,e,n){function r(t){p.unshift(t)}function i(t){var e=_(p,t);e>=0&&p.splice(e,1)}function o(){s--,d(p.slice(0),function(t){t()})}"function"==typeof arguments[1]&&(n=e,e=null),n=h(n||u);var a=V(t),s=a.length;if(!s)return n(null);e||(e=s);var c={},f=0,l=!1,p=[];r(function(){s||n(null,c)}),d(a,function(a){function u(){return f<e&&g(v,function(t,e){return t&&c.hasOwnProperty(e)},!0)&&!c.hasOwnProperty(a)}function s(){u()&&(f++,i(s),p[p.length-1](d,c))}if(!l){for(var h,p=Y(t[a])?t[a]:[t[a]],d=w(function(t,e){if(f--,e.length<=1&&(e=e[0]),t){var r={};m(c,function(t,e){r[e]=t}),r[a]=e,l=!0,n(t,r)}else c[a]=e,U.setImmediate(o)}),v=p.slice(0,p.length-1),y=v.length;y--;){if(!(h=t[v[y]]))throw new Error("Has nonexistent dependency in "+v.join(", "));if(Y(h)&&_(h,a)>=0)throw new Error("Has cyclic dependencies")}u()?(f++,p[p.length-1](d,c)):r(s)}})},U.retry=function(t,e,n){function r(t,e){if("number"==typeof e)t.times=parseInt(e,10)||o;else{if("object"!=typeof e)throw new Error("Unsupported argument type for 'times': "+typeof e);t.times=parseInt(e.times,10)||o,t.interval=parseInt(e.interval,10)||a}}function i(t,e){function n(t,n){return function(r){t(function(t,e){r(!t||n,{err:t,result:e})},e)}}function r(t){return function(e){setTimeout(function(){e(null)},t)}}for(;s.times;){var i=!(s.times-=1);u.push(n(s.task,i)),!i&&s.interval>0&&u.push(r(s.interval))}U.series(u,function(e,n){n=n[n.length-1],(t||s.callback)(n.err,n.result)})}var o=5,a=0,u=[],s={times:o,interval:a},c=arguments.length;if(c<1||c>3)throw new Error("Invalid arguments - must be either (task), (task, callback), (times, task) or (times, task, callback)");return c<=2&&"function"==typeof t&&(n=e,e=t),"function"!=typeof t&&r(s,t),s.callback=n,s.task=e,s.callback?i():i},U.waterfall=function(t,e){function n(t){return w(function(r,i){if(r)e.apply(null,[r].concat(i));else{var o=t.next();o?i.push(n(o)):i.push(e),B(t).apply(null,i)}})}if(e=h(e||u),!Y(t)){var r=new Error("First argument to waterfall must be an array of functions");return e(r)}return t.length?void n(U.iterator(t))():e()},U.parallel=function(t,e){R(U.eachOf,t,e)},U.parallelLimit=function(t,e,n){R(E(e),t,n)},U.series=function(t,e){R(U.eachOfSeries,t,e)},U.iterator=function(t){function e(n){function r(){return t.length&&t[n].apply(null,arguments),r.next()}return r.next=function(){return n<t.length-1?e(n+1):null},r}return e(0)},U.apply=w(function(t,e){return w(function(n){return t.apply(null,e.concat(n))})}),U.concat=k(j),U.concatSeries=S(j),U.whilst=function(t,e,n){if(n=n||u,t()){var r=w(function(i,o){i?n(i):t.apply(this,o)?e(r):n.apply(null,[null].concat(o))});e(r)}else n(null)},U.doWhilst=function(t,e,n){var r=0;return U.whilst(function(){return++r<=1||e.apply(this,arguments)},t,n)},U.until=function(t,e,n){return U.whilst(function(){return!t.apply(this,arguments)},e,n)},U.doUntil=function(t,e,n){return U.doWhilst(t,function(){return!e.apply(this,arguments)},n)},U.during=function(t,e,n){n=n||u;var r=w(function(e,r){e?n(e):(r.push(i),t.apply(this,r))}),i=function(t,i){t?n(t):i?e(r):n(null)};t(i)},U.doDuring=function(t,e,n){var r=0;U.during(function(t){r++<1?t(null,!0):e.apply(this,arguments)},t,n)},U.queue=function(t,e){var n=I(function(e,n){t(e[0],n)},e,1);return n},U.priorityQueue=function(t,e){function n(t,e){return t.priority-e.priority}function r(t,e,n){for(var r=-1,i=t.length-1;r<i;){var o=r+(i-r+1>>>1);n(e,t[o])>=0?r=o:i=o-1}return r}function i(t,e,i,o){if(null!=o&&"function"!=typeof o)throw new Error("task callback must be a function");return t.started=!0,Y(e)||(e=[e]),0===e.length?U.setImmediate(function(){t.drain()}):void d(e,function(e){var a={data:e,priority:i,callback:"function"==typeof o?o:u};t.tasks.splice(r(t.tasks,a,n)+1,0,a),t.tasks.length===t.concurrency&&t.saturated(),U.setImmediate(t.process)})}var o=U.queue(t,e);return o.push=function(t,e,n){i(o,t,e,n)},delete o.unshift,o},U.cargo=function(t,e){return I(t,1,e)},U.log=F("log"),U.dir=F("dir"),U.memoize=function(t,e){var n={},r={},i=Object.prototype.hasOwnProperty;e=e||s;var o=w(function(o){var a=o.pop(),u=e.apply(null,o);i.call(n,u)?U.setImmediate(function(){a.apply(null,n[u])}):i.call(r,u)?r[u].push(a):(r[u]=[a],t.apply(null,o.concat([w(function(t){n[u]=t;var e=r[u];delete r[u];for(var i=0,o=e.length;i<o;i++)e[i].apply(null,t)})])))});return o.memo=n,o.unmemoized=t,o},U.unmemoize=function(t){return function(){return(t.unmemoized||t).apply(null,arguments)}},U.times=L(U.map),U.timesSeries=L(U.mapSeries),U.timesLimit=function(t,e,n,r){return U.mapLimit(y(t),e,n,r)},U.seq=function(){var t=arguments;return w(function(e){var n=this,r=e[e.length-1];"function"==typeof r?e.pop():r=u,U.reduce(t,e,function(t,e,r){e.apply(n,t.concat([w(function(t,e){r(t,e)})]))},function(t,e){r.apply(n,[t].concat(e))})})},U.compose=function(){return U.seq.apply(null,Array.prototype.reverse.call(arguments))},U.applyEach=N(U.eachOf),U.applyEachSeries=N(U.eachOfSeries),U.forever=function(t,e){function n(t){return t?r(t):void i(n)}var r=l(e||u),i=B(t);n()},U.ensureAsync=B,U.constant=w(function(t){var e=[null].concat(t);return function(t){return t.apply(this,e)}}),U.wrapSync=U.asyncify=function(t){return w(function(e){var n,r=e.pop();try{n=t.apply(this,e)}catch(t){return r(t)}H(n)&&"function"==typeof n.then?n.then(function(t){r(null,t)}).catch(function(t){r(t.message?t:new Error(t))}):r(null,n)})},"object"==typeof t&&t.exports?t.exports=U:(r=[],i=function(){return U}.apply(e,r),!(void 0!==i&&(t.exports=i)))}()}).call(e,function(){return this}(),n(337).setImmediate,n(332))},function(t,e,n){t.exports=n(403)},function(t,e,n){var r=n(404),i=n(405).Buffer,o=n(412),a=n(387).EventEmitter,u=function(){var t=[],e=function(e,n,r){return n=n||"floating",r=r||4,function(i,o){return i=i||n,o=o||r,t.push({name:e,type:i,size:o}),t}};return t.X=e("X"),t.Y=e("Y"),t.Z=e("Z"),t.Intensity=e("Intensity","unsigned",2),t.Red=e("Red","unsigned",2),t.Green=e("Green","unsigned",2),t.Blue=e("Blue","unsigned",2),t};u.standard=function(){return u().X().Y().Z().Intensity().Red().Green().Blue()},u.XYZ=function(){return u().X().Y().Z()};var s=function(t){var e=this;if(!t)throw new Error("Need root object");e.obj=t;var n={nonNegativeInteger:parseInt,float:parseFloat,double:parseFloat,string:function(t){return t},base64Binary:function(t){return new i(t,"base64")}},r=function(t,e){return o.reduce(e.split("/"),function(t,e){return t?t[e]:t},t)};e._as=function(t){if(o.isArray(t))return o.reduce(t,function(t,n){return t.concat([e._as(n)])},[]);var i=r(e.obj,t),a=o.has(i,"value")&&o.has(i,"type");return a&&n[i.type]?n[i.type](i.value):null}};s.prototype.get=function(t){return this._as(t)},s.prototype.mins=function(){return this.get(["X/minimum","Y/minimum","Z/minimum"])},s.prototype.maxs=function(){return this.get(["X/maximum","Y/maximum","Z/maximum"])},s.prototype.bbox=function(){return new c(this.mins(),this.maxs())};var c=function(t,e){if(3!=t.length||3!=e.length)throw new Error("Mins and Maxs should have 3 elements each");t.forEach(function(t,n){if(t>=e[n])throw new Error("All elements of maxs should be greater than mins")}),this.mins=t,this.maxs=e};c.prototype.splitQuad=function(){var t=this.splitH(),e=t[0].splitV(),n=t[1].splitV();return[e[0],e[1],n[0],n[1]]},c.prototype.splitV=function(){var t=this.mins,e=this.maxs,n=t[0]+(e[0]-t[0])/2;return[new c(t,[n,e[1],e[2]]),new c([n,t[1],t[2]],e)]},c.prototype.splitH=function(){var t=this.mins,e=this.maxs,n=t[1]+(e[1]-t[1])/2;return[new c(t,[e[0],n,e[2]]),new c([t[0],n,t[2]],e)]},c.prototype.inflate=function(t){if(o.isArray(t)||(t=[t,t,t]),3!==t.length)throw new Error("by should either be a single entity or an array of 3 entities");var e=this.mins,n=this.maxs;return new c([e[0]-t[0],e[1]-t[1],e[2]-t[2]],[n[0]+t[0],n[1]+t[1],n[2]+t[2]])},c.prototype.deflate=function(t){return t=o.isArray(t)?t.map(function(t){return-t}):-t,this.inflate(t)},c.prototype.offsetBy=function(t){if(!o.isArray(t)||3!==t.length)throw new Error("by should be an array of 3 entities");return new c(this.mins.map(function(e,n){return e-t[n]}),this.maxs.map(function(e,n){return e-t[n]}))},c.prototype.center=function(){var t=this.mins,e=this.maxs;return[t[0]+(e[0]-t[0])/2,t[1]+(e[1]-t[1])/2,t[2]+(e[2]-t[2])/2]};var f=function(t,e,n){if(!t)throw new Error("Invalid reader");if(!e)throw new Error("Invalid session id");this.reader=t,this.sessionId=e,this.schema=n||u.standard(),this.readQueue=[]};f.prototype.queue=function(t,e){this.readQueue.push([t,e]),this.readerWorking||this._processNextTask()},f.prototype.flush=function(){var t=this;t.to&&clearTimeout(t.to),t.to=void 0,this.readQueue.forEach(function(t){t[1](new Error("Reader queue was flushed"))}),this.readQueue=[]},f.prototype._processNextTask=function(){var t=this;if(t.to=void 0,0===this.readQueue.length)return void(t.readerWorking=!1);t.readerWorking=!0;var e=t.readQueue.shift(),n=e[0],r=e[1];n.schema||(n.schema=t.schema),t.reader.read(t.sessionId,n,function(e,n){return t.to=setTimeout(function(){t._processNextTask()}),e?r(e):void r(null,n)})};var l=function(t){if(!t)throw new Error("Need hostname to initialize reader");if(t.match(/^(\S+):\/\//))throw new Error("Protocol specified, need bare hostname");this.host=t;var e=this.host.match(/:(\d+)$/);null!==e?this.port=parseInt(e[1]):this.port=80;var n=this.host.match(/^(\S+):/);n&&(this.host=n[1])},h=function(t){setTimeout(t)};l.prototype.getHost=function(){return this.host},l.prototype.createSession=function(t,e){if(!t||"function"==typeof t)throw new Error("Invalid pipeline");this._withConn(function(n,r){return n?e(n):void r.cmd({command:"create",pipelineId:t},function(t,n){return t?e(t):void e(null,n.session)})})},l.prototype.read=function(t,e,n){if(!t||"function"==typeof t)throw new Error("Invalid session parameter");var r=function(t){return[t.mins[0],t.mins[1],t.maxs[0],t.maxs[1]]};"function"==typeof e&&(n=e,e={});var i=e.schema||u.standard(),o={command:"read",session:t,schema:i};e.bbox&&(o.bbox=r(e.bbox)),e.depthBegin&&(o.depthBegin=e.depthBegin),e.depthEnd&&(o.depthEnd=e.depthEnd);var s=new a;return this._withConn(function(t,e){return t?n(t):void e.cmd(o,function(t,r){return t?n(t):(s.emit("begin",r),void e.readBinary(r.numBytes,s,function(t,e){return t?n(t):(s.emit("end"),void n(null,{numPoints:r.numPoints,numBytes:r.numBytes,data:e}))}))})}),s},l.prototype.destroy=function(t,e){if(!t||"function"==typeof t)throw new Error("Invalid session parameter");this._withConn(function(n,r){return n?e(n):void r.cmd({command:"destroy",session:t},function(t,n){return t?e(t):void e()})})},l.prototype.getStats=function(t,e){if(!t||"string"!=typeof t)throw new Error("Invalid session parameter");this._withConn(function(n,r){return n?e(n):void r.cmd({command:"stats",session:t},function(t,n){if(t)return e(t);var r=JSON.parse(n.stats),i=r.stages["filters.stats"].statistic,a=o.zipObject(o.map(i,function(t){return t.name.value}),i);e(null,new s(a))})})},l.prototype.close=function(){this.conn=null,this.ws&&this.ws.close()},l.prototype.getPort=function(){return this.port},l.prototype._withConn=function(t){if(this.conn)return h(t.bind(null,null,this.conn));var e=this,n="ws://"+this.getHost()+":"+this.getPort()+"/",o=new r(n);o.binaryType="arraybuffer",this.binary=null,o.onopen=function(){e.ws=o,e.handlers={},e.conn={cmd:function(t,n){return t.command?(e.handlers[t.command]=n,void e.ws.send(JSON.stringify(t))):h(n.bind(null,new Error("No command parameter")))},readBinary:function(t,n,r){return 0===t?setTimeout(r.bind(null,null,new i(0))):void(e.binary={sofar:0,bytesLeft:t,dataBuffer:new i(t),cb:r,emitter:n})}},h(t.bind(null,null,e.conn))},o.onerror=function(){e.ws=null;for(var n in e.handlers)e.handlers[n](new Error("Connection error"));h(t.bind(null,new Error("Connection error")))},o.onclose=function(){e.ws=null},o.onmessage=function(t){if(t.data instanceof ArrayBuffer||i.isBuffer(t.data)){if(!e.binary)return;var n=i.isBuffer(t.data)?t.data:i._augment(new Uint8Array(t.data));if(n.copy(e.binary.dataBuffer,e.binary.sofar),e.binary.sofar+=n.length,e.binary.bytesLeft-=n.length,e.binary.emitter.emit("read",{sofar:e.binary.sofar,left:e.binary.bytesLeft}),e.binary.bytesLeft<=0){var r=e.binary.dataBuffer,o=e.binary.cb;e.binary=null,h(o.bind(null,null,r))}}else{var a=JSON.parse(t.data),u=a.command;if(!u)return;var s=e.handlers[u];if(s){if(delete e.handlers[u],1!==a.status)return h(s.bind(null,new Error(a.reason||"Unknown Error")));s(null,a)}}},this.ws=o},t.exports={Schema:u,Stats:s,BBox:c,ReadQueue:f,GreyhoundReader:l}},function(t,e){function n(t,e,n){var r;return r=e?new i(t,e):new i(t)}var r=function(){return this}(),i=r.WebSocket||r.MozWebSocket;t.exports=i?n:null,i&&(n.prototype=i.prototype)},function(t,e,n){(function(t){function t(e,n,r){if(!(this instanceof t))return new t(e,n,r);var i,o=typeof e;if("number"===o)i=e>0?e>>>0:0;else if("string"===o)"base64"===n&&(e=x(e)),i=t.byteLength(e,n);else{if("object"!==o||null===e)throw new TypeError("must start with number, buffer, array or string");"Buffer"===e.type&&I(e.data)&&(e=e.data),i=+e.length>0?Math.floor(+e.length):0}if(this.length>F)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+F.toString(16)+" bytes");var a;t.TYPED_ARRAY_SUPPORT?a=t._augment(new Uint8Array(i)):(a=this,a.length=i,a._isBuffer=!0);var u;if(t.TYPED_ARRAY_SUPPORT&&"number"==typeof e.byteLength)a._set(e);else if(k(e))if(t.isBuffer(e))for(u=0;u<i;u++)a[u]=e.readUInt8(u);else for(u=0;u<i;u++)a[u]=(e[u]%256+256)%256;else if("string"===o)a.write(e,0,n);else if("number"===o&&!t.TYPED_ARRAY_SUPPORT&&!r)for(u=0;u<i;u++)a[u]=0;return a}function r(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new Error("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;a++){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))throw new Error("Invalid hex string");t[n+a]=u}return a}function i(t,e,n,r){var i=C(S(e),t,n,r);return i}function o(t,e,n,r){var i=C(M(e),t,n,r);return i}function a(t,e,n,r){return o(t,e,n,r)}function u(t,e,n,r){var i=C(A(e),t,n,r);return i}function s(t,e,n,r){var i=C(O(e),t,n,r);return i}function c(t,e,n){return 0===e&&n===t.length?R.fromByteArray(t):R.fromByteArray(t.slice(e,n))}function f(t,e,n){var r="",i="";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=T(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return r+T(i)}function l(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function h(t,e,n){return l(t,e,n)}function p(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;o++)i+=P(t[o]);return i}function d(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function v(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function y(e,n,r,i,o,a){if(!t.isBuffer(e))throw new TypeError("buffer must be a Buffer instance");if(n>o||n<a)throw new TypeError("value is out of bounds");if(r+i>e.length)throw new TypeError("index out of range")}function g(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;i++)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function m(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;i++)t[n+i]=e>>>8*(r?i:3-i)&255}function _(t,e,n,r,i,o){if(e>i||e<o)throw new TypeError("value is out of bounds");if(n+r>t.length)throw new TypeError("index out of range")}function b(t,e,n,r,i){return i||_(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),j.write(t,e,n,r,23,4),n+4}function w(t,e,n,r,i){return i||_(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),j.write(t,e,n,r,52,8),n+8}function x(t){for(t=E(t).replace(N,"");t.length%4!==0;)t+="=";return t}function E(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function k(e){return I(e)||t.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function P(t){return t<16?"0"+t.toString(16):t.toString(16)}function S(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else{var i=n;r>=55296&&r<=57343&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split("%"),a=0;a<o.length;a++)e.push(parseInt(o[a],16))}}return e}function M(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function O(t){for(var e,n,r,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),n=e>>8,r=e%256,i.push(r),i.push(n);return i}function A(t){return R.toByteArray(t)}function C(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function T(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
var R=n(410),j=n(408),I=n(411);e.Buffer=t,e.SlowBuffer=t,e.INSPECT_MAX_BYTES=50,t.poolSize=8192;var F=1073741823;t.TYPED_ARRAY_SUPPORT=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray&&0===new Uint8Array(1).subarray(1,1).byteLength}catch(t){return!1}}(),t.isBuffer=function(t){return!(null==t||!t._isBuffer)},t.compare=function(e,n){if(!t.isBuffer(e)||!t.isBuffer(n))throw new TypeError("Arguments must be Buffers");for(var r=e.length,i=n.length,o=0,a=Math.min(r,i);o<a&&e[o]===n[o];o++);return o!==a&&(r=e[o],i=n[o]),r<i?-1:i<r?1:0},t.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},t.concat=function(e,n){if(!I(e))throw new TypeError("Usage: Buffer.concat(list[, length])");if(0===e.length)return new t(0);if(1===e.length)return e[0];var r;if(void 0===n)for(n=0,r=0;r<e.length;r++)n+=e[r].length;var i=new t(n),o=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(i,o),o+=a.length}return i},t.byteLength=function(t,e){var n;switch(t+="",e||"utf8"){case"ascii":case"binary":case"raw":n=t.length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":n=2*t.length;break;case"hex":n=t.length>>>1;break;case"utf8":case"utf-8":n=S(t).length;break;case"base64":n=A(t).length;break;default:n=t.length}return n},t.prototype.length=void 0,t.prototype.parent=void 0,t.prototype.toString=function(t,e,n){var r=!1;if(e>>>=0,n=void 0===n||n===1/0?this.length:n>>>0,t||(t="utf8"),e<0&&(e=0),n>this.length&&(n=this.length),n<=e)return"";for(;;)switch(t){case"hex":return p(this,e,n);case"utf8":case"utf-8":return f(this,e,n);case"ascii":return l(this,e,n);case"binary":return h(this,e,n);case"base64":return c(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return d(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}},t.prototype.equals=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return 0===t.compare(this,e)},t.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},t.prototype.compare=function(e){if(!t.isBuffer(e))throw new TypeError("Argument must be a Buffer");return t.compare(this,e)},t.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},t.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},t.prototype.write=function(t,e,n,c){if(isFinite(e))isFinite(n)||(c=n,n=void 0);else{var f=c;c=e,e=n,n=f}e=Number(e)||0;var l=this.length-e;n?(n=Number(n),n>l&&(n=l)):n=l,c=String(c||"utf8").toLowerCase();var h;switch(c){case"hex":h=r(this,t,e,n);break;case"utf8":case"utf-8":h=i(this,t,e,n);break;case"ascii":h=o(this,t,e,n);break;case"binary":h=a(this,t,e,n);break;case"base64":h=u(this,t,e,n);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=s(this,t,e,n);break;default:throw new TypeError("Unknown encoding: "+c)}return h},t.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},t.prototype.slice=function(e,n){var r=this.length;if(e=~~e,n=void 0===n?r:~~n,e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),n<0?(n+=r,n<0&&(n=0)):n>r&&(n=r),n<e&&(n=e),t.TYPED_ARRAY_SUPPORT)return t._augment(this.subarray(e,n));for(var i=n-e,o=new t(i,void 0,!0),a=0;a<i;a++)o[a]=this[a+e];return o},t.prototype.readUInt8=function(t,e){return e||v(t,1,this.length),this[t]},t.prototype.readUInt16LE=function(t,e){return e||v(t,2,this.length),this[t]|this[t+1]<<8},t.prototype.readUInt16BE=function(t,e){return e||v(t,2,this.length),this[t]<<8|this[t+1]},t.prototype.readUInt32LE=function(t,e){return e||v(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},t.prototype.readUInt32BE=function(t,e){return e||v(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},t.prototype.readInt8=function(t,e){return e||v(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},t.prototype.readInt16LE=function(t,e){e||v(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt16BE=function(t,e){e||v(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},t.prototype.readInt32LE=function(t,e){return e||v(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},t.prototype.readInt32BE=function(t,e){return e||v(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},t.prototype.readFloatLE=function(t,e){return e||v(t,4,this.length),j.read(this,t,!0,23,4)},t.prototype.readFloatBE=function(t,e){return e||v(t,4,this.length),j.read(this,t,!1,23,4)},t.prototype.readDoubleLE=function(t,e){return e||v(t,8,this.length),j.read(this,t,!0,52,8)},t.prototype.readDoubleBE=function(t,e){return e||v(t,8,this.length),j.read(this,t,!1,52,8)},t.prototype.writeUInt8=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,1,255,0),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[n]=e,n+1},t.prototype.writeUInt16LE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8):g(this,e,n,!0),n+2},t.prototype.writeUInt16BE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,2,65535,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e):g(this,e,n,!1),n+2},t.prototype.writeUInt32LE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n+3]=e>>>24,this[n+2]=e>>>16,this[n+1]=e>>>8,this[n]=e):m(this,e,n,!0),n+4},t.prototype.writeUInt32BE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,4,4294967295,0),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e):m(this,e,n,!1),n+4},t.prototype.writeInt8=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,1,127,-128),t.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[n]=e,n+1},t.prototype.writeInt16LE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8):g(this,e,n,!0),n+2},t.prototype.writeInt16BE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,2,32767,-32768),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>8,this[n+1]=e):g(this,e,n,!1),n+2},t.prototype.writeInt32LE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,4,2147483647,-2147483648),t.TYPED_ARRAY_SUPPORT?(this[n]=e,this[n+1]=e>>>8,this[n+2]=e>>>16,this[n+3]=e>>>24):m(this,e,n,!0),n+4},t.prototype.writeInt32BE=function(e,n,r){return e=+e,n>>>=0,r||y(this,e,n,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),t.TYPED_ARRAY_SUPPORT?(this[n]=e>>>24,this[n+1]=e>>>16,this[n+2]=e>>>8,this[n+3]=e):m(this,e,n,!1),n+4},t.prototype.writeFloatLE=function(t,e,n){return b(this,t,e,!0,n)},t.prototype.writeFloatBE=function(t,e,n){return b(this,t,e,!1,n)},t.prototype.writeDoubleLE=function(t,e,n){return w(this,t,e,!0,n)},t.prototype.writeDoubleBE=function(t,e,n){return w(this,t,e,!1,n)},t.prototype.copy=function(e,n,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),n||(n=0),i!==r&&0!==e.length&&0!==o.length){if(i<r)throw new TypeError("sourceEnd < sourceStart");if(n<0||n>=e.length)throw new TypeError("targetStart out of bounds");if(r<0||r>=o.length)throw new TypeError("sourceStart out of bounds");if(i<0||i>o.length)throw new TypeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-n<i-r&&(i=e.length-n+r);var a=i-r;if(a<100||!t.TYPED_ARRAY_SUPPORT)for(var u=0;u<a;u++)e[u+n]=this[u+r];else e._set(this.subarray(r,r+a),n)}},t.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),n<e)throw new TypeError("end < start");if(n!==e&&0!==this.length){if(e<0||e>=this.length)throw new TypeError("start out of bounds");if(n<0||n>this.length)throw new TypeError("end out of bounds");var r;if("number"==typeof t)for(r=e;r<n;r++)this[r]=t;else{var i=S(t.toString()),o=i.length;for(r=e;r<n;r++)this[r]=i[r%o]}return this}},t.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(t.TYPED_ARRAY_SUPPORT)return new t(this).buffer;for(var e=new Uint8Array(this.length),n=0,r=e.length;n<r;n+=1)e[n]=this[n];return e.buffer}throw new TypeError("Buffer.toArrayBuffer not supported in this browser")};var L=t.prototype;t._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=L.get,t.set=L.set,t.write=L.write,t.toString=L.toString,t.toLocaleString=L.toString,t.toJSON=L.toJSON,t.equals=L.equals,t.compare=L.compare,t.copy=L.copy,t.slice=L.slice,t.readUInt8=L.readUInt8,t.readUInt16LE=L.readUInt16LE,t.readUInt16BE=L.readUInt16BE,t.readUInt32LE=L.readUInt32LE,t.readUInt32BE=L.readUInt32BE,t.readInt8=L.readInt8,t.readInt16LE=L.readInt16LE,t.readInt16BE=L.readInt16BE,t.readInt32LE=L.readInt32LE,t.readInt32BE=L.readInt32BE,t.readFloatLE=L.readFloatLE,t.readFloatBE=L.readFloatBE,t.readDoubleLE=L.readDoubleLE,t.readDoubleBE=L.readDoubleBE,t.writeUInt8=L.writeUInt8,t.writeUInt16LE=L.writeUInt16LE,t.writeUInt16BE=L.writeUInt16BE,t.writeUInt32LE=L.writeUInt32LE,t.writeUInt32BE=L.writeUInt32BE,t.writeInt8=L.writeInt8,t.writeInt16LE=L.writeInt16LE,t.writeInt16BE=L.writeInt16BE,t.writeInt32LE=L.writeInt32LE,t.writeInt32BE=L.writeInt32BE,t.writeFloatLE=L.writeFloatLE,t.writeFloatBE=L.writeFloatBE,t.writeDoubleLE=L.writeDoubleLE,t.writeDoubleBE=L.writeDoubleBE,t.fill=L.fill,t.inspect=L.inspect,t.toArrayBuffer=L.toArrayBuffer,t};var N=/[^+\/0-9A-z]/g}).call(e,n(406).Buffer)},function(t,e,n){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function r(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function i(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function o(t,e){if(i()<e)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=a.prototype):(null===t&&(t=new a(e)),t.length=e),t}function a(t,e,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(t,e,n);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return f(this,t)}return u(this,t,e,n)}function u(t,e,n,r){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?p(t,e,n,r):"string"==typeof e?l(t,e,n):d(t,e)}function s(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function c(t,e,n,r){return s(e),e<=0?o(t,e):void 0!==n?"string"==typeof r?o(t,e).fill(n,r):o(t,e).fill(n):o(t,e)}function f(t,e){if(s(e),t=o(t,e<0?0:0|v(e)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<e;++n)t[n]=0;return t}function l(t,e,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(e,n);t=o(t,r);var i=t.write(e,n);return i!==r&&(t=t.slice(0,i)),t}function h(t,e){var n=e.length<0?0:0|v(e.length);t=o(t,n);for(var r=0;r<n;r+=1)t[r]=255&e[r];return t}function p(t,e,n,r){if(e.byteLength,n<0||e.byteLength<n)throw new RangeError("'offset' is out of bounds");if(e.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return e=void 0===n&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,n):new Uint8Array(e,n,r),a.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=a.prototype):t=h(t,e),t}function d(t,e){if(a.isBuffer(e)){var n=0|v(e.length);return t=o(t,n),0===t.length?t:(e.copy(t,0,0,n),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||Q(e.length)?o(t,0):h(t,e);if("Buffer"===e.type&&Z(e.data))return h(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function v(t){if(t>=i())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i().toString(16)+" bytes");return 0|t}function y(t){return+t!=t&&(t=0),a.alloc(+t)}function g(t,e){if(a.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return V(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return X(t).length;default:if(r)return V(t).length;e=(""+e).toLowerCase(),r=!0}}function m(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,e>>>=0,n<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return j(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return T(this,e,n);case"latin1":case"binary":return R(this,e,n);case"base64":return O(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,e,n);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function _(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function b(t,e,n,r,i){if(0===t.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(i)return-1;n=t.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof e&&(e=a.from(e,r)),a.isBuffer(e))return 0===e.length?-1:w(t,e,n,r,i);if("number"==typeof e)return e&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):w(t,[e],n,r,i);throw new TypeError("val must be string, number or Buffer")}function w(t,e,n,r,i){function o(t,e){return 1===a?t[e]:t.readUInt16BE(e*a)}var a=1,u=t.length,s=e.length;if(void 0!==r&&(r=String(r).toLowerCase(),"ucs2"===r||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;a=2,u/=2,s/=2,n/=2}var c;if(i){var f=-1;for(c=n;c<u;c++)if(o(t,c)===o(e,f===-1?0:c-f)){if(f===-1&&(f=c),c-f+1===s)return f*a}else f!==-1&&(c-=c-f),f=-1}else for(n+s>u&&(n=u-s),c=n;c>=0;c--){for(var l=!0,h=0;h<s;h++)if(o(t,c+h)!==o(e,h)){l=!1;break}if(l)return c}return-1}function x(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r),r>i&&(r=i)):r=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var a=0;a<r;++a){var u=parseInt(e.substr(2*a,2),16);if(isNaN(u))return a;t[n+a]=u}return a}function E(t,e,n,r){return $(V(e,t.length-n),t,n,r)}function k(t,e,n,r){return $(G(e),t,n,r)}function P(t,e,n,r){return k(t,e,n,r)}function S(t,e,n,r){return $(X(e),t,n,r)}function M(t,e,n,r){return $(W(e,t.length-n),t,n,r)}function O(t,e,n){return 0===e&&n===t.length?J.fromByteArray(t):J.fromByteArray(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],a=null,u=o>239?4:o>223?3:o>191?2:1;if(i+u<=n){var s,c,f,l;switch(u){case 1:o<128&&(a=o);break;case 2:s=t[i+1],128===(192&s)&&(l=(31&o)<<6|63&s,l>127&&(a=l));break;case 3:s=t[i+1],c=t[i+2],128===(192&s)&&128===(192&c)&&(l=(15&o)<<12|(63&s)<<6|63&c,l>2047&&(l<55296||l>57343)&&(a=l));break;case 4:s=t[i+1],c=t[i+2],f=t[i+3],128===(192&s)&&128===(192&c)&&128===(192&f)&&(l=(15&o)<<18|(63&s)<<12|(63&c)<<6|63&f,l>65535&&l<1114112&&(a=l))}}null===a?(a=65533,u=1):a>65535&&(a-=65536,r.push(a>>>10&1023|55296),a=56320|1023&a),r.push(a),i+=u}return C(r)}function C(t){var e=t.length;if(e<=tt)return String.fromCharCode.apply(String,t);for(var n="",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=tt));return n}function T(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function R(t,e,n){var r="";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function j(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i="",o=e;o<n;++o)i+=H(t[o]);return i}function I(t,e,n){for(var r=t.slice(e,n),i="",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function F(t,e,n){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,n,r,i,o){if(!a.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(n+r>t.length)throw new RangeError("Index out of range")}function N(t,e,n,r){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-n,2);i<o;++i)t[n+i]=(e&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function B(t,e,n,r){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-n,4);i<o;++i)t[n+i]=e>>>8*(r?i:3-i)&255}function D(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function U(t,e,n,r,i){return i||D(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),K.write(t,e,n,r,23,4),n+4}function z(t,e,n,r,i){return i||D(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),K.write(t,e,n,r,52,8),n+8}function q(t){if(t=Y(t).replace(et,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function Y(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function H(t){return t<16?"0"+t.toString(16):t.toString(16)}function V(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],a=0;a<r;++a){if(n=t.charCodeAt(a),n>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(a+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=(i-55296<<10|n-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function G(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function W(t,e){for(var n,r,i,o=[],a=0;a<t.length&&!((e-=2)<0);++a)n=t.charCodeAt(a),r=n>>8,i=n%256,o.push(i),o.push(r);return o}function X(t){return J.toByteArray(q(t))}function $(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function Q(t){return t!==t}var J=n(407),K=n(408),Z=n(409);e.Buffer=a,e.SlowBuffer=y,e.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:r(),e.kMaxLength=i(),a.poolSize=8192,a._augment=function(t){return t.__proto__=a.prototype,t},a.from=function(t,e,n){return u(null,t,e,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(t,e,n){return c(null,t,e,n)},a.allocUnsafe=function(t){return f(null,t)},a.allocUnsafeSlow=function(t){return f(null,t)},a.isBuffer=function(t){return!(null==t||!t._isBuffer)},a.compare=function(t,e){if(!a.isBuffer(t)||!a.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var n=t.length,r=e.length,i=0,o=Math.min(n,r);i<o;++i)if(t[i]!==e[i]){n=t[i],r=e[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(t,e){if(!Z(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return a.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=a.allocUnsafe(e),i=0;for(n=0;n<t.length;++n){var o=t[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=g,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)_(this,e,e+1);return this},a.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)_(this,e,e+3),_(this,e+1,e+2);return this},a.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)_(this,e,e+7),_(this,e+1,e+6),_(this,e+2,e+5),_(this,e+3,e+4);return this},a.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?A(this,0,t):m.apply(this,arguments)},a.prototype.equals=function(t){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===a.compare(this,t)},a.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(t+=" ... ")),"<Buffer "+t+">"},a.prototype.compare=function(t,e,n,r,i){if(!a.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),e<0||n>t.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&e>=n)return 0;if(r>=i)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,i>>>=0,this===t)return 0;for(var o=i-r,u=n-e,s=Math.min(o,u),c=this.slice(r,i),f=t.slice(e,n),l=0;l<s;++l)if(c[l]!==f[l]){o=c[l],u=f[l];break}return o<u?-1:u<o?1:0},a.prototype.includes=function(t,e,n){return this.indexOf(t,e,n)!==-1},a.prototype.indexOf=function(t,e,n){return b(this,t,e,n,!0)},a.prototype.lastIndexOf=function(t,e,n){return b(this,t,e,n,!1)},a.prototype.write=function(t,e,n,r){if(void 0===e)r="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return x(this,t,e,n);case"utf8":case"utf-8":return E(this,t,e,n);case"ascii":return k(this,t,e,n);case"latin1":case"binary":return P(this,t,e,n);case"base64":return S(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var tt=4096;a.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),e<t&&(e=t);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(t,e),r.__proto__=a.prototype;else{var i=e-t;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+t]}return r},a.prototype.readUIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},a.prototype.readUIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},a.prototype.readUInt8=function(t,e){return e||F(t,1,this.length),this[t]},a.prototype.readUInt16LE=function(t,e){return e||F(t,2,this.length),this[t]|this[t+1]<<8},a.prototype.readUInt16BE=function(t,e){return e||F(t,2,this.length),this[t]<<8|this[t+1]},a.prototype.readUInt32LE=function(t,e){return e||F(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},a.prototype.readUInt32BE=function(t,e){return e||F(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},a.prototype.readIntLE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},a.prototype.readIntBE=function(t,e,n){t|=0,e|=0,n||F(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},a.prototype.readInt8=function(t,e){return e||F(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},a.prototype.readInt16LE=function(t,e){e||F(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(t,e){e||F(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(t,e){return e||F(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},a.prototype.readInt32BE=function(t,e){return e||F(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},a.prototype.readFloatLE=function(t,e){return e||F(t,4,this.length),K.read(this,t,!0,23,4)},a.prototype.readFloatBE=function(t,e){return e||F(t,4,this.length),K.read(this,t,!1,23,4)},a.prototype.readDoubleLE=function(t,e){return e||F(t,8,this.length),K.read(this,t,!0,52,8)},a.prototype.readDoubleBE=function(t,e){return e||F(t,8,this.length),K.read(this,t,!1,52,8)},a.prototype.writeUIntLE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,t,e,n,i,0)}var o=1,a=0;for(this[e]=255&t;++a<n&&(o*=256);)this[e+a]=t/o&255;return e+n},a.prototype.writeUIntBE=function(t,e,n,r){if(t=+t,e|=0,n|=0,!r){var i=Math.pow(2,8*n)-1;L(this,t,e,n,i,0)}var o=n-1,a=1;for(this[e+o]=255&t;--o>=0&&(a*=256);)this[e+o]=t/a&255;return e+n},a.prototype.writeUInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,255,0),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},a.prototype.writeUInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},a.prototype.writeUInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},a.prototype.writeUInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):B(this,t,e,!0),e+4},a.prototype.writeUInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},a.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var o=0,a=1,u=0;for(this[e]=255&t;++o<n&&(a*=256);)t<0&&0===u&&0!==this[e+o-1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},a.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e|=0,!r){var i=Math.pow(2,8*n-1);L(this,t,e,n,i-1,-i)}var o=n-1,a=1,u=0;for(this[e+o]=255&t;--o>=0&&(a*=256);)t<0&&0===u&&0!==this[e+o+1]&&(u=1),this[e+o]=(t/a>>0)-u&255;return e+n},a.prototype.writeInt8=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,1,127,-128),a.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},a.prototype.writeInt16LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):N(this,t,e,!0),e+2},a.prototype.writeInt16BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):N(this,t,e,!1),e+2},a.prototype.writeInt32LE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):B(this,t,e,!0),e+4},a.prototype.writeInt32BE=function(t,e,n){return t=+t,e|=0,n||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),a.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):B(this,t,e,!1),e+4},a.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},a.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},a.prototype.writeDoubleLE=function(t,e,n){return z(this,t,e,!0,n)},a.prototype.writeDoubleBE=function(t,e,n){return z(this,t,e,!1,n)},a.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},a.prototype.fill=function(t,e,n,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<n;++o)this[o]=t;else{var u=a.isBuffer(t)?t:V(new a(t,r).toString()),s=u.length;for(o=0;o<n-e;++o)this[o+e]=u[o%s]}return this};var et=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){"use strict";function n(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function r(t){return 3*t.length/4-n(t)}function i(t){var e,r,i,o,a,u=t.length;o=n(t),a=new f(3*u/4-o),r=o>0?u-4:u;var s=0;for(e=0;e<r;e+=4)i=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],a[s++]=i>>16&255,a[s++]=i>>8&255,a[s++]=255&i;return 2===o?(i=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,a[s++]=255&i):1===o&&(i=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,a[s++]=i>>8&255,a[s++]=255&i),a}function o(t){return s[t>>18&63]+s[t>>12&63]+s[t>>6&63]+s[63&t]}function a(t,e,n){for(var r,i=[],a=e;a<n;a+=3)r=(t[a]<<16)+(t[a+1]<<8)+t[a+2],i.push(o(r));return i.join("")}function u(t){for(var e,n=t.length,r=n%3,i="",o=[],u=16383,c=0,f=n-r;c<f;c+=u)o.push(a(t,c,c+u>f?f:c+u));return 1===r?(e=t[n-1],i+=s[e>>2],i+=s[e<<4&63],i+="=="):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=s[e>>10],i+=s[e>>4&63],i+=s[e<<2&63],i+="="),o.push(i),o.join("")}e.byteLength=r,e.toByteArray=i,e.fromByteArray=u;for(var s=[],c=[],f="undefined"!=typeof Uint8Array?Uint8Array:Array,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,p=l.length;h<p;++h)s[h]=l[h],c[l.charCodeAt(h)]=h;c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,n,r,i){var o,a,u=8*i-r-1,s=(1<<u)-1,c=s>>1,f=-7,l=n?i-1:0,h=n?-1:1,p=t[e+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=u;f>0;o=256*o+t[e+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=r;f>0;a=256*a+t[e+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===s)return a?NaN:(p?-1:1)*(1/0);a+=Math.pow(2,r),o-=c}return(p?-1:1)*a*Math.pow(2,o-r)},e.write=function(t,e,n,r,i,o){var a,u,s,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,d=r?1:-1,v=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,a=f):(a=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-a))<1&&(a--,s*=2),e+=a+l>=1?h/s:h*Math.pow(2,1-l),e*s>=2&&(a++,s/=2),a+l>=f?(u=0,a=f):a+l>=1?(u=(e*s-1)*Math.pow(2,i),a+=l):(u=e*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;t[n+p]=255&u,p+=d,u/=256,i-=8);for(a=a<<i|u,c+=i;c>0;t[n+p]=255&a,p+=d,a/=256,c-=8);t[n+p-d]|=128*v}},function(t,e){var n={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},function(t,e,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(t){"use strict";function e(t){var e=t.charCodeAt(0);return e===a?62:e===u?63:e<s?-1:e<s+10?e-s+26+26:e<f+26?e-f:e<c+26?e-c+26:void 0}function n(t){function n(t){c[l++]=t}var r,i,a,u,s,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;s="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-s),a=s>0?t.length-4:t.length;var l=0;for(r=0,i=0;r<a;r+=4,i+=3)u=e(t.charAt(r))<<18|e(t.charAt(r+1))<<12|e(t.charAt(r+2))<<6|e(t.charAt(r+3)),n((16711680&u)>>16),n((65280&u)>>8),n(255&u);return 2===s?(u=e(t.charAt(r))<<2|e(t.charAt(r+1))>>4,n(255&u)):1===s&&(u=e(t.charAt(r))<<10|e(t.charAt(r+1))<<4|e(t.charAt(r+2))>>2,n(u>>8&255),n(255&u)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,a,u=t.length%3,s="";for(i=0,a=t.length-u;i<a;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],s+=n(o);switch(u){case 1:o=t[t.length-1],s+=e(o>>2),s+=e(o<<4&63),s+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],s+=e(o>>10),s+=e(o>>4&63),s+=e(o<<2&63),s+="="}return s}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="+".charCodeAt(0),u="/".charCodeAt(0),s="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0);t.toByteArray=n,t.fromByteArray=i}(e)},function(t,e){var n=Array.isArray,r=Object.prototype.toString;t.exports=n||function(t){return!!t&&"[object Array]"==r.call(t)}},function(t,e,n){var r;(function(t,i){(function(){function o(t,e,n){for(var r=(n||0)-1,i=t?t.length:0;++r<i;)if(t[r]===e)return r;return-1}function a(t,e){var n=typeof e;if(t=t.cache,"boolean"==n||null==e)return t[e]?0:-1;"number"!=n&&"string"!=n&&(n="object");var r="number"==n?e:P+e;return t=(t=t[n])&&t[r],"object"==n?t&&o(t,e)>-1?0:-1:t?0:-1}function u(t){var e=this.cache,n=typeof t;if("boolean"==n||null==t)e[t]=!0;else{"number"!=n&&"string"!=n&&(n="object");var r="number"==n?t:P+t,i=e[n]||(e[n]={});"object"==n?(i[r]||(i[r]=[])).push(t):i[r]=!0}}function s(t){return t.charCodeAt(0)}function c(t,e){for(var n=t.criteria,r=e.criteria,i=-1,o=n.length;++i<o;){var a=n[i],u=r[i];if(a!==u){if(a>u||"undefined"==typeof a)return 1;if(a<u||"undefined"==typeof u)return-1}}return t.index-e.index}function f(t){var e=-1,n=t.length,r=t[0],i=t[n/2|0],o=t[n-1];if(r&&"object"==typeof r&&i&&"object"==typeof i&&o&&"object"==typeof o)return!1;var a=p();a.false=a.null=a.true=a.undefined=!1;var s=p();for(s.array=t,s.cache=a,s.push=u;++e<n;)s.push(t[e]);return s}function l(t){return"\\"+it[t]}function h(){return b.pop()||[]}function p(){return w.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function d(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}function v(t){t.length=0,b.length<M&&b.push(t)}function y(t){var e=t.cache;e&&y(e),t.array=t.cache=t.criteria=t.object=t.number=t.string=t.value=null,w.length<M&&w.push(t)}function g(t,e,n){e||(e=0),"undefined"==typeof n&&(n=t?t.length:0);for(var r=-1,i=n-e||0,o=Array(i<0?0:i);++r<i;)o[r]=t[e+r];return o}function m(t){function e(t){return t&&"object"==typeof t&&!lr(t)&&Hn.call(t,"__wrapped__")?t:new n(t)}function n(t,e){this.__chain__=!!e,this.__wrapped__=t}function r(t){function e(){if(r){var t=g(r);Vn.apply(t,arguments)}if(this instanceof e){var o=u(n.prototype),a=n.apply(o,t||arguments);return Nt(a)?a:o}return n.apply(i,t||arguments)}var n=t[0],r=t[2],i=t[4];return fr(e,t),e}function i(t,e,n,r,o){if(n){var a=n(t);if("undefined"!=typeof a)return a}var u=Nt(t);if(!u)return t;var s=Nn.call(t);if(!Z[s]||!sr.nodeClass&&d(t))return t;var c=ar[s];switch(s){case V:case G:return new c(+t);case $:case K:return new c(t);case J:return a=c(t.source,j.exec(t)),a.lastIndex=t.lastIndex,a}var f=lr(t);if(e){var l=!r;r||(r=h()),o||(o=h());for(var p=r.length;p--;)if(r[p]==t)return o[p];a=f?c(t.length):{}}else a=f?g(t):xr({},t);return f&&(Hn.call(t,"index")&&(a.index=t.index),Hn.call(t,"input")&&(a.input=t.input)),e?(r.push(t),o.push(a),(f?wr:Pr)(t,function(t,u){a[u]=i(t,e,n,r,o)}),l&&(v(r),v(o)),a):a}function u(t,e){return Nt(t)?Jn(t):{}}function b(t,e,n){if("function"!=typeof t)return on;if("undefined"==typeof e||!("prototype"in t))return t;var r=t.__bindData__;if("undefined"==typeof r&&(sr.funcNames&&(r=!t.name),r=r||!sr.funcDecomp,!r)){var i=qn.call(t);sr.funcNames||(r=!I.test(i)),r||(r=B.test(i),fr(t,r))}if(r===!1||r!==!0&&1&r[1])return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,i){return t.call(e,n,r,i)};case 4:return function(n,r,i,o){return t.call(e,n,r,i,o)}}return ze(t,e)}function w(t){function e(){var t=c?a:this;if(i){var d=g(i);Vn.apply(d,arguments)}if((o||l)&&(d||(d=g(arguments)),o&&Vn.apply(d,o),l&&d.length<s))return r|=16,w([n,h?r:r&-4,d,null,a,s]);if(d||(d=arguments),f&&(n=t[p]),this instanceof e){t=u(n.prototype);var v=n.apply(t,d);return Nt(v)?v:t}return n.apply(t,d)}var n=t[0],r=t[1],i=t[2],o=t[3],a=t[4],s=t[5],c=1&r,f=2&r,l=4&r,h=8&r,p=n;return fr(e,t),e}function M(t,e){var n=-1,r=vt(),i=t?t.length:0,u=i>=S&&r===o,s=[];if(u){var c=f(e);c?(r=a,e=c):u=!1}for(;++n<i;){var l=t[n];r(e,l)<0&&s.push(l)}return u&&y(e),s}function it(t,e,n,r){for(var i=(r||0)-1,o=t?t.length:0,a=[];++i<o;){var u=t[i];if(u&&"object"==typeof u&&"number"==typeof u.length&&(lr(u)||_t(u))){e||(u=it(u,e,n));var s=-1,c=u.length,f=a.length;for(a.length+=c;++s<c;)a[f++]=u[s]}else n||a.push(u)}return a}function at(t,e,n,r,i,o){if(n){var a=n(t,e);if("undefined"!=typeof a)return!!a}if(t===e)return 0!==t||1/t==1/e;var u=typeof t,s=typeof e;if(!(t!==t||t&&rt[u]||e&&rt[s]))return!1;if(null==t||null==e)return t===e;var c=Nn.call(t),f=Nn.call(e);if(c==Y&&(c=Q),f==Y&&(f=Q),c!=f)return!1;switch(c){case V:case G:return+t==+e;case $:return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case J:case K:return t==Cn(e)}var l=c==H;if(!l){var p=Hn.call(t,"__wrapped__"),y=Hn.call(e,"__wrapped__");if(p||y)return at(p?t.__wrapped__:t,y?e.__wrapped__:e,n,r,i,o);if(c!=Q||!sr.nodeClass&&(d(t)||d(e)))return!1;var g=!sr.argsObject&&_t(t)?On:t.constructor,m=!sr.argsObject&&_t(e)?On:e.constructor;if(g!=m&&!(Lt(g)&&g instanceof g&&Lt(m)&&m instanceof m)&&"constructor"in t&&"constructor"in e)return!1}var _=!i;i||(i=h()),o||(o=h());for(var b=i.length;b--;)if(i[b]==t)return o[b]==e;var w=0;if(a=!0,i.push(t),o.push(e),l){if(b=t.length,w=e.length,a=w==b,a||r)for(;w--;){var x=b,E=e[w];if(r)for(;x--&&!(a=at(t[x],E,n,r,i,o)););else if(!(a=at(t[w],E,n,r,i,o)))break}}else kr(e,function(e,u,s){if(Hn.call(s,u))return w++,a=Hn.call(t,u)&&at(t[u],e,n,r,i,o)}),a&&!r&&kr(t,function(t,e,n){if(Hn.call(n,e))return a=--w>-1});return i.pop(),o.pop(),_&&(v(i),v(o)),a}function ut(t,e,n,r,i){(lr(e)?re:Pr)(e,function(e,o){var a,u,s=e,c=t[o];if(e&&((u=lr(e))||Sr(e))){for(var f=r.length;f--;)if(a=r[f]==e){c=i[f];break}if(!a){var l;n&&(s=n(c,e),(l="undefined"!=typeof s)&&(c=s)),l||(c=u?lr(c)?c:[]:Sr(c)?c:{}),r.push(e),i.push(c),l||ut(c,e,n,r,i)}}else n&&(s=n(c,e),"undefined"==typeof s&&(s=e)),"undefined"!=typeof s&&(c=s);t[o]=c})}function st(t,e){return t+zn(or()*(e-t+1))}function ft(t,e,n){var r=-1,i=vt(),u=t?t.length:0,s=[],c=!e&&u>=S&&i===o,l=n||c?h():s;if(c){var p=f(l);i=a,l=p}for(;++r<u;){var d=t[r],g=n?n(d,r,t):d;(e?!r||l[l.length-1]!==g:i(l,g)<0)&&((n||c)&&l.push(g),s.push(d))}return c?(v(l.array),y(l)):n&&v(l),s}function lt(t){return function(n,r,i){var o={};if(r=e.createCallback(r,i,3),lr(n))for(var a=-1,u=n.length;++a<u;){var s=n[a];t(o,s,r(s,a,n),n)}else wr(n,function(e,n,i){t(o,e,r(e,n,i),i)});return o}}function ht(t,e,n,i,o,a){var u=1&e,s=2&e,c=4&e,f=16&e,l=32&e;if(!s&&!Lt(t))throw new Tn;f&&!n.length&&(e&=-17,f=n=!1),l&&!i.length&&(e&=-33,l=i=!1);var h=t&&t.__bindData__;if(h&&h!==!0)return h=g(h),h[2]&&(h[2]=g(h[2])),h[3]&&(h[3]=g(h[3])),!u||1&h[1]||(h[4]=o),!u&&1&h[1]&&(e|=8),!c||4&h[1]||(h[5]=a),f&&Vn.apply(h[2]||(h[2]=[]),n),l&&$n.apply(h[3]||(h[3]=[]),i),h[1]|=e,ht.apply(null,h);var p=1==e||17===e?r:w;return p([t,e,n,i,o,a])}function pt(){nt.shadowedProps=z,nt.array=nt.bottom=nt.loop=nt.top="",nt.init="iterable",nt.useHas=!0;for(var t,e=0;t=arguments[e];e++)for(var n in t)nt[n]=t[n];var r=nt.args;nt.firstArg=/^[^,]+/.exec(r)[0];var i=Pn("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+r+") {\n"+cr(nt)+"\n}");return i(b,W,jn,Hn,E,_t,lr,qt,nt.keys,In,rt,ur,K,Fn,Nn)}function dt(t){return gr[t]}function vt(){var t=(t=e.indexOf)===ke?o:t;return t}function yt(t){return"function"==typeof t&&Bn.test(t)}function gt(t){var e,n;return!(!(t&&Nn.call(t)==Q&&(e=t.constructor,!Lt(e)||e instanceof e))||!sr.argsClass&&_t(t)||!sr.nodeClass&&d(t))&&(sr.ownLast?(kr(t,function(t,e,r){return n=Hn.call(r,e),!1}),n!==!1):(kr(t,function(t,e){n=e}),"undefined"==typeof n||Hn.call(t,n)))}function mt(t){return mr[t]}function _t(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Nn.call(t)==Y||!1}function bt(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n=e,e=!1),i(t,e,"function"==typeof n&&b(n,r,1))}function wt(t,e,n){return i(t,!0,"function"==typeof e&&b(e,n,1))}function xt(t,e){var n=u(t);return e?xr(n,e):n}function Et(t,n,r){var i;return n=e.createCallback(n,r,3),Pr(t,function(t,e,r){if(n(t,e,r))return i=e,!1}),i}function kt(t,n,r){var i;return n=e.createCallback(n,r,3),St(t,function(t,e,r){if(n(t,e,r))return i=e,!1}),i}function Pt(t,e,n){var r=[];kr(t,function(t,e){r.push(e,t)});var i=r.length;for(e=b(e,n,3);i--&&e(r[i--],r[i],t)!==!1;);return t}function St(t,e,n){var r=pr(t),i=r.length;for(e=b(e,n,3);i--;){var o=r[i];
if(e(t[o],o,t)===!1)break}return t}function Mt(t){var e=[];return kr(t,function(t,n){Lt(t)&&e.push(n)}),e.sort()}function Ot(t,e){return!!t&&Hn.call(t,e)}function At(t){for(var e=-1,n=pr(t),r=n.length,i={};++e<r;){var o=n[e];i[t[o]]=o}return i}function Ct(t){return t===!0||t===!1||t&&"object"==typeof t&&Nn.call(t)==V||!1}function Tt(t){return t&&"object"==typeof t&&Nn.call(t)==G||!1}function Rt(t){return t&&1===t.nodeType||!1}function jt(t){var e=!0;if(!t)return e;var n=Nn.call(t),r=t.length;return n==H||n==K||(sr.argsClass?n==Y:_t(t))||n==Q&&"number"==typeof r&&Lt(t.splice)?!r:(Pr(t,function(){return e=!1}),e)}function It(t,e,n,r){return at(t,e,"function"==typeof n&&b(n,r,2))}function Ft(t){return Zn(t)&&!tr(parseFloat(t))}function Lt(t){return"function"==typeof t}function Nt(t){return!(!t||!rt[typeof t])}function Bt(t){return Ut(t)&&t!=+t}function Dt(t){return null===t}function Ut(t){return"number"==typeof t||t&&"object"==typeof t&&Nn.call(t)==$||!1}function zt(t){return t&&rt[typeof t]&&Nn.call(t)==J||!1}function qt(t){return"string"==typeof t||t&&"object"==typeof t&&Nn.call(t)==K||!1}function Yt(t){return"undefined"==typeof t}function Ht(t,n,r){var i={};return n=e.createCallback(n,r,3),Pr(t,function(t,e,r){i[e]=n(t,e,r)}),i}function Vt(t){var e=arguments,n=2;if(!Nt(t))return t;if("number"!=typeof e[2]&&(n=e.length),n>3&&"function"==typeof e[n-2])var r=b(e[--n-1],e[n--],2);else n>2&&"function"==typeof e[n-1]&&(r=e[--n]);for(var i=g(arguments,1,n),o=-1,a=h(),u=h();++o<n;)ut(t,i[o],r,a,u);return v(a),v(u),t}function Gt(t,n,r){var i={};if("function"!=typeof n){var o=[];kr(t,function(t,e){o.push(e)}),o=M(o,it(arguments,!0,!1,1));for(var a=-1,u=o.length;++a<u;){var s=o[a];i[s]=t[s]}}else n=e.createCallback(n,r,3),kr(t,function(t,e,r){n(t,e,r)||(i[e]=t)});return i}function Wt(t){for(var e=-1,n=pr(t),r=n.length,i=wn(r);++e<r;){var o=n[e];i[e]=[o,t[o]]}return i}function Xt(t,n,r){var i={};if("function"!=typeof n)for(var o=-1,a=it(arguments,!0,!1,1),u=Nt(t)?a.length:0;++o<u;){var s=a[o];s in t&&(i[s]=t[s])}else n=e.createCallback(n,r,3),kr(t,function(t,e,r){n(t,e,r)&&(i[e]=t)});return i}function $t(t,n,r,i){var o=lr(t);if(null==r)if(o)r=[];else{var a=t&&t.constructor,s=a&&a.prototype;r=u(s)}return n&&(n=e.createCallback(n,i,4),(o?wr:Pr)(t,function(t,e,i){return n(r,t,e,i)})),r}function Qt(t){for(var e=-1,n=pr(t),r=n.length,i=wn(r);++e<r;)i[e]=t[n[e]];return i}function Jt(t){var e=arguments,n=-1,r=it(e,!0,!1,1),i=e[2]&&e[2][e[1]]===t?1:r.length,o=wn(i);for(sr.unindexedChars&&qt(t)&&(t=t.split(""));++n<i;)o[n]=t[r[n]];return o}function Kt(t,e,n){var r=-1,i=vt(),o=t?t.length:0,a=!1;return n=(n<0?nr(0,o+n):n)||0,lr(t)?a=i(t,e,n)>-1:"number"==typeof o?a=(qt(t)?t.indexOf(e,n):i(t,e,n))>-1:wr(t,function(t){if(++r>=n)return!(a=t===e)}),a}function Zt(t,n,r){var i=!0;if(n=e.createCallback(n,r,3),lr(t))for(var o=-1,a=t.length;++o<a&&(i=!!n(t[o],o,t)););else wr(t,function(t,e,r){return i=!!n(t,e,r)});return i}function te(t,n,r){var i=[];if(n=e.createCallback(n,r,3),lr(t))for(var o=-1,a=t.length;++o<a;){var u=t[o];n(u,o,t)&&i.push(u)}else wr(t,function(t,e,r){n(t,e,r)&&i.push(t)});return i}function ee(t,n,r){if(n=e.createCallback(n,r,3),!lr(t)){var i;return wr(t,function(t,e,r){if(n(t,e,r))return i=t,!1}),i}for(var o=-1,a=t.length;++o<a;){var u=t[o];if(n(u,o,t))return u}}function ne(t,n,r){var i;return n=e.createCallback(n,r,3),ie(t,function(t,e,r){if(n(t,e,r))return i=t,!1}),i}function re(t,e,n){if(e&&"undefined"==typeof n&&lr(t))for(var r=-1,i=t.length;++r<i&&e(t[r],r,t)!==!1;);else wr(t,e,n);return t}function ie(t,e,n){var r=t,i=t?t.length:0;if(e=e&&"undefined"==typeof n?e:b(e,n,3),lr(t))for(;i--&&e(t[i],i,t)!==!1;);else{if("number"!=typeof i){var o=pr(t);i=o.length}else sr.unindexedChars&&qt(t)&&(r=t.split(""));wr(t,function(t,n,a){return n=o?o[--i]:--i,e(r[n],n,a)})}return t}function oe(t,e){var n=g(arguments,2),r=-1,i="function"==typeof e,o=t?t.length:0,a=wn("number"==typeof o?o:0);return re(t,function(t){a[++r]=(i?e:t[e]).apply(t,n)}),a}function ae(t,n,r){var i=-1,o=t?t.length:0,a=wn("number"==typeof o?o:0);if(n=e.createCallback(n,r,3),lr(t))for(;++i<o;)a[i]=n(t[i],i,t);else wr(t,function(t,e,r){a[++i]=n(t,e,r)});return a}function ue(t,n,r){var i=-(1/0),o=i;if("function"!=typeof n&&r&&r[n]===t&&(n=null),null==n&&lr(t))for(var a=-1,u=t.length;++a<u;){var c=t[a];c>o&&(o=c)}else n=null==n&&qt(t)?s:e.createCallback(n,r,3),wr(t,function(t,e,r){var a=n(t,e,r);a>i&&(i=a,o=t)});return o}function se(t,n,r){var i=1/0,o=i;if("function"!=typeof n&&r&&r[n]===t&&(n=null),null==n&&lr(t))for(var a=-1,u=t.length;++a<u;){var c=t[a];c<o&&(o=c)}else n=null==n&&qt(t)?s:e.createCallback(n,r,3),wr(t,function(t,e,r){var a=n(t,e,r);a<i&&(i=a,o=t)});return o}function ce(t,n,r,i){var o=arguments.length<3;if(n=e.createCallback(n,i,4),lr(t)){var a=-1,u=t.length;for(o&&(r=t[++a]);++a<u;)r=n(r,t[a],a,t)}else wr(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)});return r}function fe(t,n,r,i){var o=arguments.length<3;return n=e.createCallback(n,i,4),ie(t,function(t,e,i){r=o?(o=!1,t):n(r,t,e,i)}),r}function le(t,n,r){return n=e.createCallback(n,r,3),te(t,function(t,e,r){return!n(t,e,r)})}function he(t,e,n){if(t&&"number"!=typeof t.length?t=Qt(t):sr.unindexedChars&&qt(t)&&(t=t.split("")),null==e||n)return t?t[st(0,t.length-1)]:_;var r=pe(t);return r.length=rr(nr(0,e),r.length),r}function pe(t){var e=-1,n=t?t.length:0,r=wn("number"==typeof n?n:0);return re(t,function(t){var n=st(0,++e);r[e]=r[n],r[n]=t}),r}function de(t){var e=t?t.length:0;return"number"==typeof e?e:pr(t).length}function ve(t,n,r){var i;if(n=e.createCallback(n,r,3),lr(t))for(var o=-1,a=t.length;++o<a&&!(i=n(t[o],o,t)););else wr(t,function(t,e,r){return!(i=n(t,e,r))});return!!i}function ye(t,n,r){var i=-1,o=lr(n),a=t?t.length:0,u=wn("number"==typeof a?a:0);for(o||(n=e.createCallback(n,r,3)),re(t,function(t,e,r){var a=u[++i]=p();o?a.criteria=ae(n,function(e){return t[e]}):(a.criteria=h())[0]=n(t,e,r),a.index=i,a.value=t}),a=u.length,u.sort(c);a--;){var s=u[a];u[a]=s.value,o||v(s.criteria),y(s)}return u}function ge(t){return t&&"number"==typeof t.length?sr.unindexedChars&&qt(t)?t.split(""):g(t):Qt(t)}function me(t){for(var e=-1,n=t?t.length:0,r=[];++e<n;){var i=t[e];i&&r.push(i)}return r}function _e(t){return M(t,it(arguments,!0,!0,1))}function be(t,n,r){var i=-1,o=t?t.length:0;for(n=e.createCallback(n,r,3);++i<o;)if(n(t[i],i,t))return i;return-1}function we(t,n,r){var i=t?t.length:0;for(n=e.createCallback(n,r,3);i--;)if(n(t[i],i,t))return i;return-1}function xe(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=-1;for(n=e.createCallback(n,r,3);++a<o&&n(t[a],a,t);)i++}else if(i=n,null==i||r)return t?t[0]:_;return g(t,0,rr(nr(0,i),o))}function Ee(t,e,n,r){return"boolean"!=typeof e&&null!=e&&(r=n,n="function"!=typeof e&&r&&r[e]===t?null:e,e=!1),null!=n&&(t=ae(t,n,r)),it(t,e)}function ke(t,e,n){if("number"==typeof n){var r=t?t.length:0;n=n<0?nr(0,r+n):n||0}else if(n){var i=je(t,e);return t[i]===e?i:-1}return o(t,e,n)}function Pe(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=e.createCallback(n,r,3);a--&&n(t[a],a,t);)i++}else i=null==n||r?1:n||i;return g(t,0,rr(nr(0,o-i),o))}function Se(){for(var t=[],e=-1,n=arguments.length,r=h(),i=vt(),u=i===o,s=h();++e<n;){var c=arguments[e];(lr(c)||_t(c))&&(t.push(c),r.push(u&&c.length>=S&&f(e?t[e]:s)))}var l=t[0],p=-1,d=l?l.length:0,g=[];t:for(;++p<d;){var m=r[0];if(c=l[p],(m?a(m,c):i(s,c))<0){for(e=n,(m||s).push(c);--e;)if(m=r[e],(m?a(m,c):i(t[e],c))<0)continue t;g.push(c)}}for(;n--;)m=r[n],m&&y(m);return v(r),v(s),g}function Me(t,n,r){var i=0,o=t?t.length:0;if("number"!=typeof n&&null!=n){var a=o;for(n=e.createCallback(n,r,3);a--&&n(t[a],a,t);)i++}else if(i=n,null==i||r)return t?t[o-1]:_;return g(t,nr(0,o-i))}function Oe(t,e,n){var r=t?t.length:0;for("number"==typeof n&&(r=(n<0?nr(0,r+n):rr(n,r-1))+1);r--;)if(t[r]===e)return r;return-1}function Ae(t){for(var e=arguments,n=0,r=e.length,i=t?t.length:0;++n<r;)for(var o=-1,a=e[n];++o<i;)t[o]===a&&(Xn.call(t,o--,1),i--);return t}function Ce(t,e,n){t=+t||0,n="number"==typeof n?n:+n||1,null==e&&(e=t,t=0);for(var r=-1,i=nr(0,Dn((e-t)/(n||1))),o=wn(i);++r<i;)o[r]=t,t+=n;return o}function Te(t,n,r){var i=-1,o=t?t.length:0,a=[];for(n=e.createCallback(n,r,3);++i<o;){var u=t[i];n(u,i,t)&&(a.push(u),Xn.call(t,i--,1),o--)}return a}function Re(t,n,r){if("number"!=typeof n&&null!=n){var i=0,o=-1,a=t?t.length:0;for(n=e.createCallback(n,r,3);++o<a&&n(t[o],o,t);)i++}else i=null==n||r?1:nr(0,n);return g(t,i)}function je(t,n,r,i){var o=0,a=t?t.length:o;for(r=r?e.createCallback(r,i,1):on,n=r(n);o<a;){var u=o+a>>>1;r(t[u])<n?o=u+1:a=u}return o}function Ie(){return ft(it(arguments,!0,!0))}function Fe(t,n,r,i){return"boolean"!=typeof n&&null!=n&&(i=r,r="function"!=typeof n&&i&&i[n]===t?null:n,n=!1),null!=r&&(r=e.createCallback(r,i,3)),ft(t,n,r)}function Le(t){return M(t,g(arguments,1))}function Ne(){for(var t=-1,e=arguments.length;++t<e;){var n=arguments[t];if(lr(n)||_t(n))var r=r?ft(M(r,n).concat(M(n,r))):n}return r||[]}function Be(){for(var t=arguments.length>1?arguments:arguments[0],e=-1,n=t?ue(Cr(t,"length")):0,r=wn(n<0?0:n);++e<n;)r[e]=Cr(t,e);return r}function De(t,e){var n=-1,r=t?t.length:0,i={};for(e||!r||lr(t[0])||(e=[]);++n<r;){var o=t[n];e?i[o]=e[n]:o&&(i[o[0]]=o[1])}return i}function Ue(t,e){if(!Lt(e))throw new Tn;return function(){if(--t<1)return e.apply(this,arguments)}}function ze(t,e){return arguments.length>2?ht(t,17,g(arguments,2),null,e):ht(t,1,null,null,e)}function qe(t){for(var e=arguments.length>1?it(arguments,!0,!1,1):Mt(t),n=-1,r=e.length;++n<r;){var i=e[n];t[i]=ht(t[i],1,null,null,t)}return t}function Ye(t,e){return arguments.length>2?ht(e,19,g(arguments,2),null,t):ht(e,3,null,null,t)}function He(){for(var t=arguments,e=t.length;e--;)if(!Lt(t[e]))throw new Tn;return function(){for(var e=arguments,n=t.length;n--;)e=[t[n].apply(this,e)];return e[0]}}function Ve(t,e){return e="number"==typeof e?e:+e||t.length,ht(t,4,null,null,null,e)}function Ge(t,e,n){var r,i,o,a,u,s,c,f=0,l=!1,h=!0;if(!Lt(t))throw new Tn;if(e=nr(0,e)||0,n===!0){var p=!0;h=!1}else Nt(n)&&(p=n.leading,l="maxWait"in n&&(nr(e,n.maxWait)||0),h="trailing"in n?n.trailing:h);var d=function(){var n=e-(Rr()-a);if(n<=0){i&&Un(i);var l=c;i=s=c=_,l&&(f=Rr(),o=t.apply(u,r),s||i||(r=u=null))}else s=Wn(d,n)},v=function(){s&&Un(s),i=s=c=_,(h||l!==e)&&(f=Rr(),o=t.apply(u,r),s||i||(r=u=null))};return function(){if(r=arguments,a=Rr(),u=this,c=h&&(s||!p),l===!1)var n=p&&!s;else{i||p||(f=a);var y=l-(a-f),g=y<=0;g?(i&&(i=Un(i)),f=a,o=t.apply(u,r)):i||(i=Wn(v,y))}return g&&s?s=Un(s):s||e===l||(s=Wn(d,e)),n&&(g=!0,o=t.apply(u,r)),!g||s||i||(r=u=null),o}}function We(t){if(!Lt(t))throw new Tn;var e=g(arguments,1);return Wn(function(){t.apply(_,e)},1)}function Xe(t,e){if(!Lt(t))throw new Tn;var n=g(arguments,2);return Wn(function(){t.apply(_,n)},e)}function $e(t,e){if(!Lt(t))throw new Tn;var n=function(){var r=n.cache,i=e?e.apply(this,arguments):P+arguments[0];return Hn.call(r,i)?r[i]:r[i]=t.apply(this,arguments)};return n.cache={},n}function Qe(t){var e,n;if(!Lt(t))throw new Tn;return function(){return e?n:(e=!0,n=t.apply(this,arguments),t=null,n)}}function Je(t){return ht(t,16,g(arguments,1))}function Ke(t){return ht(t,32,null,g(arguments,1))}function Ze(t,e,n){var r=!0,i=!0;if(!Lt(t))throw new Tn;return n===!1?r=!1:Nt(n)&&(r="leading"in n?n.leading:r,i="trailing"in n?n.trailing:i),tt.leading=r,tt.maxWait=e,tt.trailing=i,Ge(t,e,tt)}function tn(t,e){return ht(e,16,[t])}function en(t){return function(){return t}}function nn(t,e,n){var r=typeof t;if(null==t||"function"==r)return b(t,e,n);if("object"!=r)return cn(t);var i=pr(t),o=i[0],a=t[o];return 1!=i.length||a!==a||Nt(a)?function(e){for(var n=i.length,r=!1;n--&&(r=at(e[i[n]],t[i[n]],null,!0)););return r}:function(t){var e=t[o];return a===e&&(0!==a||1/a==1/e)}}function rn(t){return null==t?"":Cn(t).replace(br,dt)}function on(t){return t}function an(t,r,i){var o=!0,a=r&&Mt(r);r&&(i||a.length)||(null==i&&(i=r),u=n,r=t,t=e,a=Mt(r)),i===!1?o=!1:Nt(i)&&"chain"in i&&(o=i.chain);var u=t,s=Lt(u);re(a,function(e){var n=t[e]=r[e];s&&(u.prototype[e]=function(){var e=this.__chain__,r=this.__wrapped__,i=[r];Vn.apply(i,arguments);var a=n.apply(t,i);if(o||e){if(r===a&&Nt(a))return this;a=new u(a),a.__chain__=e}return a})})}function un(){return t._=Ln,this}function sn(){}function cn(t){return function(e){return e[t]}}function fn(t,e,n){var r=null==t,i=null==e;if(null==n&&("boolean"==typeof t&&i?(n=t,t=1):i||"boolean"!=typeof e||(n=e,i=!0)),r&&i&&(e=1),t=+t||0,i?(e=t,t=0):e=+e||0,n||t%1||e%1){var o=or();return rr(t+o*(e-t+parseFloat("1e-"+((o+"").length-1))),e)}return st(t,e)}function ln(t,e){if(t){var n=t[e];return Lt(n)?t[e]():n}}function hn(t,n,r){var i=e.templateSettings;t=Cn(t||""),r=Er({},r,i);var o,a=Er({},r.imports,i.imports),u=pr(a),s=Qt(a),c=0,f=r.interpolate||N,h="__p += '",p=An((r.escape||N).source+"|"+f.source+"|"+(f===F?R:N).source+"|"+(r.evaluate||N).source+"|$","g");t.replace(p,function(e,n,r,i,a,u){return r||(r=i),h+=t.slice(c,u).replace(D,l),n&&(h+="' +\n__e("+n+") +\n'"),a&&(o=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),c=u+e.length,e}),h+="';\n";var d=r.variable,v=d;v||(d="obj",h="with ("+d+") {\n"+h+"\n}\n"),h=(o?h.replace(A,""):h).replace(C,"$1").replace(T,"$1;"),h="function("+d+") {\n"+(v?"":d+" || ("+d+" = {});\n")+"var __t, __p = '', __e = _.escape"+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var y="\n/*\n//# sourceURL="+(r.sourceURL||"/lodash/template/source["+q++ +"]")+"\n*/";try{var g=Pn(u,"return "+h+y).apply(_,s)}catch(t){throw t.source=h,t}return n?g(n):(g.source=h,g)}function pn(t,e,n){t=(t=+t)>-1?t:0;var r=-1,i=wn(t);for(e=b(e,n,1);++r<t;)i[r]=e(r);return i}function dn(t){return null==t?"":Cn(t).replace(_r,mt)}function vn(t){var e=++x;return Cn(null==t?"":t)+e}function yn(t){return t=new n(t),t.__chain__=!0,t}function gn(t,e){return e(t),t}function mn(){return this.__chain__=!0,this}function _n(){return Cn(this.__wrapped__)}function bn(){return this.__wrapped__}t=t?ct.defaults(ot.Object(),t,ct.pick(ot,U)):ot;var wn=t.Array,xn=t.Boolean,En=t.Date,kn=t.Error,Pn=t.Function,Sn=t.Math,Mn=t.Number,On=t.Object,An=t.RegExp,Cn=t.String,Tn=t.TypeError,Rn=[],jn=kn.prototype,In=On.prototype,Fn=Cn.prototype,Ln=t._,Nn=In.toString,Bn=An("^"+Cn(Nn).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Dn=Sn.ceil,Un=t.clearTimeout,zn=Sn.floor,qn=Pn.prototype.toString,Yn=yt(Yn=On.getPrototypeOf)&&Yn,Hn=In.hasOwnProperty,Vn=Rn.push,Gn=In.propertyIsEnumerable,Wn=t.setTimeout,Xn=Rn.splice,$n=Rn.unshift,Qn=function(){try{var t={},e=yt(e=On.defineProperty)&&e,n=e(t,t,t)&&e}catch(t){}return n}(),Jn=yt(Jn=On.create)&&Jn,Kn=yt(Kn=wn.isArray)&&Kn,Zn=t.isFinite,tr=t.isNaN,er=yt(er=On.keys)&&er,nr=Sn.max,rr=Sn.min,ir=t.parseInt,or=Sn.random,ar={};ar[H]=wn,ar[V]=xn,ar[G]=En,ar[X]=Pn,ar[Q]=On,ar[$]=Mn,ar[J]=An,ar[K]=Cn;var ur={};ur[H]=ur[G]=ur[$]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ur[V]=ur[K]={constructor:!0,toString:!0,valueOf:!0},ur[W]=ur[X]=ur[J]={constructor:!0,toString:!0},ur[Q]={constructor:!0},function(){for(var t=z.length;t--;){var e=z[t];for(var n in ur)Hn.call(ur,n)&&!Hn.call(ur[n],e)&&(ur[n][e]=!1)}}(),n.prototype=e.prototype;var sr=e.support={};!function(){var e=function(){this.x=1},n={0:1,length:1},r=[];e.prototype={valueOf:1,y:1};for(var i in new e)r.push(i);for(i in arguments);sr.argsClass=Nn.call(arguments)==Y,sr.argsObject=arguments.constructor==On&&!(arguments instanceof wn),sr.enumErrorProps=Gn.call(jn,"message")||Gn.call(jn,"name"),sr.enumPrototypes=Gn.call(e,"prototype"),sr.funcDecomp=!yt(t.WinRTError)&&B.test(m),sr.funcNames="string"==typeof Pn.name,sr.nonEnumArgs=0!=i,sr.nonEnumShadows=!/valueOf/.test(r),sr.ownLast="x"!=r[0],sr.spliceObjects=(Rn.splice.call(n,0,1),!n[0]),sr.unindexedChars="x"[0]+On("x")[0]!="xx";try{sr.nodeClass=!(Nn.call(document)==Q&&!({toString:0}+""))}catch(t){sr.nodeClass=!0}}(1),e.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:F,variable:"",imports:{_:e}};var cr=function(t){var e="var index, iterable = "+t.firstArg+", result = "+t.init+";\nif (!iterable) return result;\n"+t.top+";";t.array?(e+="\nvar length = iterable.length; index = -1;\nif ("+t.array+") {  ",sr.unindexedChars&&(e+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),e+="\n  while (++index < length) {\n    "+t.loop+";\n  }\n}\nelse {  "):sr.nonEnumArgs&&(e+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+t.loop+";\n    }\n  } else {  "),sr.enumPrototypes&&(e+="\n  var skipProto = typeof iterable == 'function';\n  "),sr.enumErrorProps&&(e+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var n=[];if(sr.enumPrototypes&&n.push('!(skipProto && index == "prototype")'),sr.enumErrorProps&&n.push('!(skipErrorProps && (index == "message" || index == "name"))'),t.useHas&&t.keys)e+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }  ";else if(e+="\n  for (index in iterable) {\n",t.useHas&&n.push("hasOwnProperty.call(iterable, index)"),n.length&&(e+="    if ("+n.join(" && ")+") {\n  "),e+=t.loop+";    ",n.length&&(e+="\n    }"),e+="\n  }    ",sr.nonEnumShadows){for(e+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)e+="\n    index = '"+t.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",t.useHas||(e+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),e+=") {\n      "+t.loop+";\n    }      ";e+="\n  }    "}return(t.array||sr.nonEnumArgs)&&(e+="\n}"),e+=t.bottom+";\nreturn result"};Jn||(u=function(){function e(){}return function(n){if(Nt(n)){e.prototype=n;var r=new e;e.prototype=null}return r||t.Object()}}());var fr=Qn?function(t,e){et.value=e,Qn(t,"__bindData__",et),et.value=null}:sn;sr.argsClass||(_t=function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Hn.call(t,"callee")&&!Gn.call(t,"callee")||!1});var lr=Kn||function(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Nn.call(t)==H||!1},hr=pt({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),pr=er?function(t){return Nt(t)?sr.enumPrototypes&&"function"==typeof t||sr.nonEnumArgs&&t.length&&_t(t)?hr(t):er(t):[]}:hr,dr={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:pr,loop:"if (callback(iterable[index], index, collection) === false) return result"},vr={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:pr,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},yr={top:"if (!objectTypes[typeof iterable]) return result;\n"+dr.top,array:!1},gr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},mr=At(gr),_r=An("("+pr(mr).join("|")+")","g"),br=An("["+pr(gr).join("")+"]","g"),wr=pt(dr),xr=pt(vr,{top:vr.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),Er=pt(vr),kr=pt(dr,yr,{useHas:!1}),Pr=pt(dr,yr);Lt(/x/)&&(Lt=function(t){return"function"==typeof t&&Nn.call(t)==X});var Sr=Yn?function(t){if(!t||Nn.call(t)!=Q||!sr.argsClass&&_t(t))return!1;var e=t.valueOf,n=yt(e)&&(n=Yn(e))&&Yn(n);return n?t==n||Yn(t)==n:gt(t)}:gt,Mr=lt(function(t,e,n){Hn.call(t,n)?t[n]++:t[n]=1}),Or=lt(function(t,e,n){(Hn.call(t,n)?t[n]:t[n]=[]).push(e)}),Ar=lt(function(t,e,n){t[n]=e}),Cr=ae,Tr=te,Rr=yt(Rr=En.now)&&Rr||function(){return(new En).getTime()},jr=8==ir(O+"08")?ir:function(t,e){return ir(qt(t)?t.replace(L,""):t,e||0)};return e.after=Ue,e.assign=xr,e.at=Jt,e.bind=ze,e.bindAll=qe,e.bindKey=Ye,e.chain=yn,e.compact=me,e.compose=He,e.constant=en,e.countBy=Mr,e.create=xt,e.createCallback=nn,e.curry=Ve,e.debounce=Ge,e.defaults=Er,e.defer=We,e.delay=Xe,e.difference=_e,e.filter=te,e.flatten=Ee,e.forEach=re,e.forEachRight=ie,e.forIn=kr,e.forInRight=Pt,e.forOwn=Pr,e.forOwnRight=St,e.functions=Mt,e.groupBy=Or,e.indexBy=Ar,e.initial=Pe,e.intersection=Se,e.invert=At,e.invoke=oe,e.keys=pr,e.map=ae,e.mapValues=Ht,e.max=ue,e.memoize=$e,e.merge=Vt,e.min=se,e.omit=Gt,e.once=Qe,e.pairs=Wt,e.partial=Je,e.partialRight=Ke,e.pick=Xt,e.pluck=Cr,e.property=cn,e.pull=Ae,e.range=Ce,e.reject=le,e.remove=Te,e.rest=Re,e.shuffle=pe,e.sortBy=ye,e.tap=gn,e.throttle=Ze,e.times=pn,e.toArray=ge,e.transform=$t,e.union=Ie,e.uniq=Fe,e.values=Qt,e.where=Tr,e.without=Le,e.wrap=tn,e.xor=Ne,e.zip=Be,e.zipObject=De,e.collect=ae,e.drop=Re,e.each=re,e.eachRight=ie,e.extend=xr,e.methods=Mt,e.object=De,e.select=te,e.tail=Re,e.unique=Fe,e.unzip=Be,an(e),e.clone=bt,e.cloneDeep=wt,e.contains=Kt,e.escape=rn,e.every=Zt,e.find=ee,e.findIndex=be,e.findKey=Et,e.findLast=ne,e.findLastIndex=we,e.findLastKey=kt,e.has=Ot,e.identity=on,e.indexOf=ke,e.isArguments=_t,e.isArray=lr,e.isBoolean=Ct,e.isDate=Tt,e.isElement=Rt,e.isEmpty=jt,e.isEqual=It,e.isFinite=Ft,e.isFunction=Lt,e.isNaN=Bt,e.isNull=Dt,e.isNumber=Ut,e.isObject=Nt,e.isPlainObject=Sr,e.isRegExp=zt,e.isString=qt,e.isUndefined=Yt,e.lastIndexOf=Oe,e.mixin=an,e.noConflict=un,e.noop=sn,e.now=Rr,e.parseInt=jr,e.random=fn,e.reduce=ce,e.reduceRight=fe,e.result=ln,e.runInContext=m,e.size=de,e.some=ve,e.sortedIndex=je,e.template=hn,e.unescape=dn,e.uniqueId=vn,e.all=Zt,e.any=ve,e.detect=ee,e.findWhere=ee,e.foldl=ce,e.foldr=fe,e.include=Kt,e.inject=ce,an(function(){var t={};return Pr(e,function(n,r){e.prototype[r]||(t[r]=n)}),t}(),!1),e.first=xe,e.last=Me,e.sample=he,e.take=xe,e.head=xe,Pr(e,function(t,r){var i="sample"!==r;e.prototype[r]||(e.prototype[r]=function(e,r){var o=this.__chain__,a=t(this.__wrapped__,e,r);return o||null!=e&&(!r||i&&"function"==typeof e)?new n(a,o):a})}),e.VERSION="2.4.2",e.prototype.chain=mn,e.prototype.toString=_n,e.prototype.value=bn,e.prototype.valueOf=bn,wr(["join","pop","shift"],function(t){var r=Rn[t];e.prototype[t]=function(){var t=this.__chain__,e=r.apply(this.__wrapped__,arguments);return t?new n(e,t):e}}),wr(["push","reverse","sort","unshift"],function(t){var n=Rn[t];e.prototype[t]=function(){return n.apply(this.__wrapped__,arguments),this}}),wr(["concat","slice","splice"],function(t){var r=Rn[t];e.prototype[t]=function(){return new n(r.apply(this.__wrapped__,arguments),this.__chain__)}}),sr.spliceObjects||wr(["pop","shift","splice"],function(t){var r=Rn[t],i="splice"==t;e.prototype[t]=function(){var t=this.__chain__,e=this.__wrapped__,o=r.apply(e,arguments);return 0===e.length&&delete e[0],t||i?new n(o,t):o}}),e}var _,b=[],w=[],x=0,E={},P=+new Date+"",S=75,M=40,O=" \t\v\f \ufeff\n\r\u2028\u2029 ᠎             　",A=/\b__p \+= '';/g,C=/\b(__p \+=) '' \+/g,T=/(__e\(.*?\)|\b__t\)) \+\n'';/g,R=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,j=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,F=/<%=([\s\S]+?)%>/g,L=RegExp("^["+O+"]*0+(?=.$)"),N=/($^)/,B=/\bthis\b/,D=/['\n\r\t\u2028\u2029\\]/g,U=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],z=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],q=0,Y="[object Arguments]",H="[object Array]",V="[object Boolean]",G="[object Date]",W="[object Error]",X="[object Function]",$="[object Number]",Q="[object Object]",J="[object RegExp]",K="[object String]",Z={};Z[X]=!1,Z[Y]=Z[H]=Z[V]=Z[G]=Z[$]=Z[Q]=Z[J]=Z[K]=!0;var tt={leading:!1,maxWait:0,trailing:!1},et={configurable:!1,enumerable:!1,value:null,writable:!1},nt={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},rt={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},it={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},ot=rt[typeof window]&&window||this,at=rt[typeof e]&&e&&!e.nodeType&&e,ut=rt[typeof t]&&t&&!t.nodeType&&t,st=(ut&&ut.exports===at&&at,rt[typeof i]&&i);!st||st.global!==st&&st.window!==st||(ot=st);var ct=m();ot._=ct,r=function(){return ct}.call(e,n,e,t),!(r!==_&&(t.exports=r))}).call(this)}).call(e,n(373)(t),function(){return this}())},function(t,e,n){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileLoaderPolicy=void 0;var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=n(400),a=n(370),u=n(393),s=n(402),c={},f=function(){function t(){r(this,t)}return i(t,null,[{key:"load",value:function(t,e){console.log("params:",t);var n=t.id,r=c[n];if(!r)return e(new Error("No such profile loaded"));var i=r.buffer.length/r.totalPoints*4,o=[["position",0,3],["color",0,3]];e(null,{pointStride:i,totalPoints:r.totalPoints,attributes:o,data:r.buffer,stats:{}})}},{key:"key",get:function(){return"profile-loader"}},{key:"provides",get:function(){return"point-buffer"}}]),t}();e.ProfileLoaderPolicy=function(){function t(e,n,i){if(r(this,t),this.mainRenderer=e,this.renderer=n,this.params=i,this.fullPointCloudBBox=i.fullPointCloudBBox,this.lastAddedBuffers=[],!this.fullPointCloudBBox)throw new Error("Missing field fullPointCloudBBox in params.  This is needed for the profiler.");n.addLoader(f),n.addLoader(u.TransformLoader)}return i(t,[{key:"setProfileRegions",value:function(t){var e=this;console.log(this.fullPointCloudBBox);var n=new o.Profiler(this.mainRenderer,[[t.start,t.end]],t.width,this.fullPointCloudBBox);n.extractProfile(!0,function(n,r){if(n)return console.warn("Failed to run profile on region:",t);e.lastAddedBuffers.forEach(function(t){e.renderer.removePointBuffer(t),delete c[t["profile-loader"].id]});var i=r[0];console.log("got profile:",i);var o=(0,a.randomId)("profile"),f=new u.TransformLoader,l={"profile-loader":{id:o},transform:f.queryFor({worldBBox:new s.BBox(i.mins,i.maxs),normalize:!0})};c[o]=i,e.lastAddedBuffers=[l],e.renderer.addPointBuffer(l),console.log("Added buffer:",l)})}}]),t}()}]);