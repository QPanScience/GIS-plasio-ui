<!DOCTYPE html>
<html>
<head>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
            font-size: 14px;
            margin: 0;
            padding: 0;
            overflow: hidden;
            line-height: 1.5;
            color: #666;
        }

        .bootup {
            position: fixed;
            left: 0; right: 0; top: 0; bottom: 0;
            text-align: center;
            padding-top: 30px;
            color: #444;
            font-size: 60px;
            letter-spacing: -5px;
            margin: 0;
        }

        .bootup .powered-by {
            font-size: 14px;
            letter-spacing: 0;
            margin-top: 6em;
            font-weight: bold;
            color: #888;
            position: relative;
            left: -3rem;
        }

        .bootup .speckly-startup-logo {
            color: #0097a7;
            margin: 5rem 10rem 0 10rem;
        }

        .bootup .speckly-border-image {
            position: relative;
            top: -2rem;
            left: 2rem;
        }

        .bootup .entwine-startup-logo {
            background: url(img/entwine.png);
            height: 40px;
            width: auto;
            margin: 0;
            padding: 0;
            background-size: contain;
            background-position: center center;
            background-repeat: no-repeat no-repeat;
        }

        html {
            height: 100%;
        }

        body {
            height: 100%;
        }

        #app {
            position: relative;
            height: 100%;
        }
    </style>
</head>
<body class="noselect">
<div id="app">
    <div class="bootup">
        <div class="speckly-startup-logo">speck.ly</div>
        <img class="speckly-border-image" src="img/speckly_bottom_border.svg">

        <div>
            <div class="powered-by">Powered by </div>
            <div class="entwine-startup-logo"></div>
        </div>
    </div>
</div>
<script>
    var DEV_MODE = true;
    var DECOMPRESS_WORKER_PATH="workers/decompress.js";
</script>
<script src="js/compiled/plasio_ui.js" type="text/javascript"></script>
<script type="text/javascript">
 var plasioUI = null;
 var createUI = function() {
     plasioUI = plasio_ui.core.createUI(document.getElementById("app"), {
         includeExternalDependencies: true,
         googleMapsAPIKey: "AIzaSyAUWT5-vsCeQb1vYYamCw-RFvKTzLlY9iU",

         useBrowserHistory: true,
         allowGreyhoundCredentials: false,
         rememberUIState: true,

         colorChannelRules: [
             ["Red", 5]
         ],

         defaultColorChannelIndex: 2,
         deriveColorChannelsFromAddonFields: true,
         showApplicationBar: true,
         additionalInformation: "<p>What <a href='http://google.com'>Google</a></p>",

         resources: {
             "servers": {
                 "items": [{
                     "url": "data.greyhound.io",
                     "name": "data.greyhound.io"
                 }, {
                     "url": "ushr.greyhound.io",
                     "name": "ushr.greyhound.io"
                 }]
             },
	     "resources": {
             "items": [
                 {
                     "displayName": "USHR",
                     "server": "ushr.greyhound.io",
                     "name": ["17_40"],
                     "params": {
                         "c0s": "local://color",
                         "nsl": 1
                     }
                 },
                 {
                     "name": "ept://na.entwine.io/nyc",
                     "displayName": "New York City",
                     "default": true,
                     "params": {
                         "c0s": "remote://imagery?url=http%3A%2F%2Fserver.arcgisonline.com%2FArcGIS%2Frest%2Fservices%2FWorld_Imagery%2FMapServer%2Ftile%2F%7B%7Bz%7D%7D%2F%7B%7By%7D%7D%2F%7B%7Bx%7D%7D.jpg"
                     }
                 },
                 {
                     "displayName": "AHN & DK",
                     "server": "data.greyhound.io",
                     "name": ["ahn-z", "dk-z"],
                     "params": {
                         "c0s": "local://color",
                         "nsl": "1"
                     }
                 },
                 {
                     "server": "data.greyhound.io",
                     "name": ["autzen", "epts://s3.amazonaws.com/ept-data/autzen-wbm"],
                     "displayName": "Autzen",
                     "params": {
                         "c0s": "local://color"
                     }
                 },
                 {
                     "server": "data.greyhound.io",
                     "name": [
                         "helheim/2016/0504_000253",
                         "helheim/2016/0527_180709",
                         "helheim/2016/0528_001113"
                     ],
                     "displayName": "Helheim (SMALL)",
                     "params": {
                         "c0s": "local://color"
                     },
                     "frames": [
                         {
                             "resource": "helheim/2016/0504_000253",
                             "ts": "2017-05-27T00:02:53Z"
                         },
                         {
                             "resource": "helheim/2016/0527_180709",
                             "ts": "2017-05-27T18:07:09Z"
                         },
                         {
                             "resource": "helheim/2016/0528_001113",
                             "ts": "2017-05-28T00:11:13Z"
                         }
                     ]
                 },
                 {
                     "server": "data.greyhound.io",
                     "name": [
                         "helheim/2016/0504_000253",
                         "helheim/2016/0527_180709",
                         "helheim/2016/0528_001113",
                         "helheim/2016/0528_180509",
                         "helheim/2016/0604_180222",
                         "helheim/2016/0605_000216",
                         "helheim/2016/0607_000522",
                         "helheim/2016/0607_120218",
                         "helheim/2016/0608_000217"
                     ],
                     "displayName": "Helheim",
                     "params": {
                         "c0s": "local://color"
                     },
                     "frames": [
                         {
                             "resource": "helheim/2016/0504_000253",
                             "ts": "2017-05-27T00:02:53Z"
                         },
                         {
                             "resource": "helheim/2016/0527_180709",
                             "ts": "2017-05-27T18:07:09Z"
                         },
                         {
                             "resource": "helheim/2016/0528_001113",
                             "ts": "2017-05-28T00:11:13Z"
                         },
                         {
                             "resource": "helheim/2016/0528_180509",
                             "ts": "2017-05-28T18:05:09Z"
                         },
                         {
                             "resource": "helheim/2016/0604_180222",
                             "ts": "2017-06-04T18:02:22Z"
                         },
                         {
                             "resource": "helheim/2016/0605_000216",
                             "ts": "2017-06-05T00:02:16Z"
                         },
                         {
                             "resource": "helheim/2016/0607_000522",
                             "ts": "2017-05-27T00:05:22Z"
                         },
                         {
                             "resource": "helheim/2016/0607_120218",
                             "ts": "2017-06-07T12:02:18Z"
                         },
                         {
                             "resource": "helheim/2016/0608_000217",
                             "ts": "2017-06-08T00:02:17Z"
                         }
                     ]
                 }
             ]
	     }
	 },

	 filters: [{
	     "name": "SuchWow",
	     "spec": {
                 "Classification": 2
             }
         }],

         colorSources: [
             ["remote://imagery?url=" + encodeURIComponent("http://api.tiles.mapbox.com/v4/mapbox.satellite/{{z}}/{{x}}/{{y}}.jpg70?access_token=pk.eyJ1IjoiaG9idSIsImEiOiItRUhHLW9NIn0.RJvshvzdstRBtmuzSzmLZw"), "Mapbox Satellite Imagery"],
             ["remote://imagery?url=" + encodeURIComponent("http://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{{z}}/{{y}}/{{x}}.jpg"), "ArcGIS Satellite Imagery"],
             ["local://ramp?field=Z&start=#FF0000&end=#00FF00", "Elevation RED -> GREEN"],
             ["local://ramp?field=Z&start=#FFFFFF&end=#0000FF", "Elevation WHITE -> BLUE"],
             ["local://ramp?field=Z", "Elevation"],
             ["local://color", "Color"],
             ["local://field-color?field=Classification", "Classification"],
             ["local://ramp?field=Intensity", "Intensity"],
             ["local://field-color?field=OriginId", "Origin ID"],
             ["local://field-color?field=point-source-id", "Point Source ID"]
         ]});

     var firstDispatched = null;
     var id = plasioUI.addChangeListener(function(v) {
         console.log("-- -- dispatch", v);
         if (v.camera && firstDispatched === null)
             firstDispatched = v;
     });
     /*

     setTimeout(function() {
         console.log("-- -- dispatch", id);
         plasioUI.removeChangeListener(id);
     }, 3000);

     setTimeout(function() {
         plasioUI.apply(firstDispatched);
     }, 6000);
     */
 };

 var destroyUI = function() {
     if (plasioUI) {
         plasioUI.destroy();
         plasioUI = null;
     }
 };

 createUI();
</script>
